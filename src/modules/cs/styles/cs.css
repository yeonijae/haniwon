/* CS관리 앱 스타일 */

/* 스크롤바 - 가는 스타일 */
.cs-app ::-webkit-scrollbar,
.cs-app-new ::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

.cs-app ::-webkit-scrollbar-track,
.cs-app-new ::-webkit-scrollbar-track {
  background: transparent;
}

.cs-app ::-webkit-scrollbar-thumb,
.cs-app-new ::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 2px;
}

.cs-app ::-webkit-scrollbar-thumb:hover,
.cs-app-new ::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

.cs-app {
  display: flex;
  height: 100vh;
  background: #f3f4f6;
}

/* 사이드바 */
.cs-sidebar {
  width: 180px;
  background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 100%);
  display: flex;
  flex-direction: column;
  color: white;
}

.cs-sidebar-header {
  padding: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.cs-sidebar-logo {
  font-size: 24px;
}

.cs-sidebar-title {
  font-size: 18px;
  font-weight: 700;
}

/* 기존 메뉴 (하위 호환) */
.cs-sidebar-nav {
  flex: 1;
  padding: 16px 0;
}

.cs-sidebar-item {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 20px;
  background: transparent;
  border: none;
  color: rgba(255, 255, 255, 0.7);
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
  font-size: 15px;
}

.cs-sidebar-item:hover {
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

.cs-sidebar-item.active {
  background: rgba(255, 255, 255, 0.2);
  color: white;
  font-weight: 600;
}

.cs-sidebar-icon {
  font-size: 18px;
}

/* 컴팩트 메뉴 (대기환자 목록과 함께 사용) - 레거시 */
.cs-sidebar-nav-compact {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 10px 10px 6px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.cs-sidebar-item-compact {
  flex: 0 0 calc(50% - 2px);
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 10px;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: rgba(255, 255, 255, 0.7);
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
  font-size: 12px;
}

.cs-sidebar-item-compact:hover {
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

.cs-sidebar-item-compact.active {
  background: rgba(255, 255, 255, 0.2);
  color: white;
  font-weight: 600;
}

.cs-sidebar-item-compact .cs-sidebar-icon {
  font-size: 14px;
}

.cs-sidebar-item-compact .cs-sidebar-label {
  font-size: 12px;
}

/* 1열 세로 메뉴 (아이콘 + 큰 폰트) */
.cs-sidebar-nav-vertical {
  display: flex;
  flex-direction: column;
  padding: 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.cs-sidebar-item-vertical {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: transparent;
  border: none;
  border-radius: 8px;
  color: rgba(255, 255, 255, 0.7);
  cursor: pointer;
  transition: all 0.2s;
  text-align: left;
}

.cs-sidebar-item-vertical:hover {
  background: rgba(255, 255, 255, 0.1);
  color: white;
}

.cs-sidebar-item-vertical.active {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

.cs-sidebar-item-vertical .cs-menu-icon {
  font-size: 18px;
}

.cs-sidebar-item-vertical .cs-menu-label {
  font-size: 17px;
  font-weight: 600;
}

.cs-sidebar-item-vertical.active .cs-menu-label {
  font-weight: 700;
}

/* 대기환자 섹션 */
.cs-waiting-section {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}

.cs-waiting-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: rgba(0, 0, 0, 0.1);
}

.cs-waiting-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 600;
  color: rgba(255, 255, 255, 0.9);
}

.cs-waiting-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 9px;
  font-size: 11px;
  font-weight: 700;
}

.cs-waiting-status {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.3);
}

.cs-waiting-status.connected {
  color: #4ade80;
}

.cs-waiting-list {
  flex: 1;
  overflow-y: auto;
  list-style: none;
  margin: 0;
  padding: 0;
}

.cs-waiting-empty {
  padding: 20px 12px;
  text-align: center;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.4);
}

.cs-waiting-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  cursor: pointer;
  transition: all 0.2s;
}

.cs-waiting-item:hover {
  background: rgba(255, 255, 255, 0.1);
}

.cs-waiting-item.long {
  background: rgba(251, 146, 60, 0.15);
  border-left: 3px solid #fb923c;
}

.cs-waiting-item.very-long {
  background: rgba(248, 113, 113, 0.15);
  border-left: 3px solid #f87171;
}

.cs-waiting-patient {
  display: flex;
  align-items: baseline;
  gap: 6px;
  flex-wrap: wrap;
}

.cs-waiting-name {
  font-size: 16px;
  font-weight: 700;
  color: white;
}

.cs-waiting-info {
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
}

.cs-waiting-time {
  margin-left: auto;
  font-size: 12px;
  color: rgba(255, 255, 255, 0.5);
}

.cs-waiting-time.long {
  color: #fb923c;
  font-weight: 600;
}

.cs-waiting-time.very-long {
  color: #f87171;
  font-weight: 700;
}

.cs-waiting-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 2px;
}

.cs-waiting-doctor {
  font-size: 12px;
  color: #93c5fd;
  font-weight: 500;
}

.cs-waiting-status-text {
  font-size: 12px;
  color: #fbbf24;
  font-weight: 500;
}

.cs-sidebar-footer {
  padding: 10px 12px;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  flex-shrink: 0;
}

.cs-sidebar-user {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 8px;
  font-size: 12px;
}

.cs-sidebar-close {
  width: 100%;
  padding: 8px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 6px;
  color: white;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.cs-sidebar-close:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* 메인 영역 */
.cs-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.cs-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: white;
  padding: 16px 24px;
  border-bottom: 1px solid #e5e7eb;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.cs-header-title {
  font-size: 20px;
  font-weight: 700;
  color: #1f2937;
}

/* 폰트 크기 조절 컨트롤 */
.font-scale-controls {
  display: flex;
  align-items: center;
  gap: 4px;
  background: #f3f4f6;
  border-radius: 6px;
  padding: 4px;
}

.font-scale-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  color: #374151;
  cursor: pointer;
  transition: all 0.15s;
  font-size: 12px;
}

.font-scale-btn:hover:not(:disabled) {
  background: #e5e7eb;
  border-color: #9ca3af;
}

.font-scale-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.font-scale-value {
  min-width: 44px;
  text-align: center;
  font-size: 12px;
  font-weight: 500;
  color: #4b5563;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: background 0.15s;
}

.font-scale-value:hover {
  background: #e5e7eb;
}

.cs-content {
  flex: 1;
  overflow: auto;
}

/* 예약관리 뷰 */
.cs-reservation-view {
  height: 100%;
}

.cs-reservation-view > div {
  height: 100%;
}

/* 예약 모듈 헤더 숨기기 */
.cs-reservation-view header {
  display: none;
}

/* 문의접수 뷰 */
.inquiry-view {
  padding: 0;
}

/* 인바운드 칸반 레이아웃 */
.inquiry-view.inbound-kanban-layout {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: #f8f9fa;
}

.inbound-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: #fff;
  border-bottom: 1px solid #e0e0e0;
}

.inbound-header .btn-add {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: #667eea;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.9em;
  transition: background 0.2s;
}

.inbound-header .btn-add:hover {
  background: #5a6fd6;
}

.stat-item.in-progress {
  background: #e8ecfd;
  color: #4c51bf;
}

.header-center {
  display: flex;
  align-items: center;
  gap: 8px;
}

.date-nav-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  color: #6b7280;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.date-nav-btn:hover {
  background: #f3f4f6;
  color: #374151;
}

.date-today-btn {
  padding: 4px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  color: #6b7280;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.date-today-btn:hover {
  background: #f3f4f6;
  color: #374151;
}

.date-picker {
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  color: #374151;
  background: white;
}

.date-view-toggle {
  display: flex;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  overflow: hidden;
}

.date-view-toggle .toggle-btn {
  padding: 6px 12px;
  border: none;
  background: white;
  font-size: 12px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.15s;
}

.date-view-toggle .toggle-btn.active {
  background: #667eea;
  color: white;
}

.date-view-toggle .toggle-btn:hover:not(.active) {
  background: #f3f4f6;
}

.kanban-card-completed {
  font-size: 11px;
  color: #10b981;
  margin-left: auto;
}

/* 칸반 보드 */
.kanban-board {
  display: flex;
  gap: 16px;
  flex: 1;
  overflow: hidden;
  padding: 16px 20px;
}

.kanban-column {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  background: #f0f2f5;
  border-radius: 10px;
  overflow: hidden;
}

.column-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  font-weight: 600;
  font-size: 0.95em;
  border-bottom: 1px solid #e0e0e0;
  background: #fff;
}

.kanban-column.pending .column-header {
  border-left: 4px solid #f59e0b;
}

.kanban-column.in-progress .column-header {
  border-left: 4px solid #667eea;
}

.kanban-column.done .column-header {
  border-left: 4px solid #10b981;
}

.column-title {
  color: #333;
}

.column-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;
  padding: 0 8px;
  border-radius: 12px;
  font-size: 0.8em;
  font-weight: 600;
  color: #fff;
}

.kanban-column.pending .column-count {
  background: #f59e0b;
}

.kanban-column.in-progress .column-count {
  background: #667eea;
}

.kanban-column.done .column-count {
  background: #10b981;
}

.column-body {
  flex: 1;
  overflow-y: auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.column-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 40px 16px;
  color: #aaa;
  font-size: 0.9em;
}

/* 칸반 카드 */
.kanban-card {
  background: #fff;
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  transition: box-shadow 0.2s;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.kanban-card:hover {
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.12);
}

.kanban-card-top {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.kanban-card-time {
  margin-left: auto;
  font-size: 0.8em;
  color: #9ca3af;
  white-space: nowrap;
}

.kanban-card-sender {
  display: flex;
  gap: 8px;
  font-size: 0.9em;
}

.kanban-card-sender strong {
  color: #1f2937;
}

.kanban-card-sender span {
  color: #6b7280;
}

.kanban-card-content {
  font-size: 0.85em;
  color: #4b5563;
  line-height: 1.4;
  margin: 0;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.kanban-card-response {
  font-size: 0.8em;
  color: #6b7280;
  margin: 0;
  padding: 6px 8px;
  background: #f3f4f6;
  border-radius: 4px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.kanban-card-response span {
  font-weight: 600;
  color: #4b5563;
}

.kanban-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 6px;
  border-top: 1px solid #f3f4f6;
  margin-top: auto;
}

.kanban-card-footer .staff-name {
  font-size: 0.8em;
  color: #9ca3af;
}

.kanban-card-actions {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.kanban-card-actions .action-btn {
  padding: 4px 8px;
  font-size: 0.75em;
}

.action-btn.in-progress {
  background: #667eea;
  color: white;
}

.action-btn.in-progress:hover {
  background: #5a6fd6;
}

.action-btn.convert {
  background: #3b82f6;
  color: white;
}

.action-btn.convert:hover {
  background: #2563eb;
}

.action-btn.match {
  background: #f3f4f6;
  color: #555;
}

.action-btn.match:hover {
  background: #e5e7eb;
}

.action-btn.edit {
  background: #f3f4f6;
  color: #555;
}

.action-btn.edit:hover {
  background: #e5e7eb;
}

.action-btn.delete {
  background: #fee2e2;
  color: #dc2626;
}

.action-btn.delete:hover {
  background: #fecaca;
}

.action-btn.revert {
  background: #fef3c7;
  color: #d97706;
}

.action-btn.revert:hover {
  background: #fde68a;
}

.inquiry-toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  background: white;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.inquiry-filters {
  display: flex;
  gap: 8px;
}

.filter-btn {
  padding: 8px 16px;
  background: #f3f4f6;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}

.filter-btn:hover {
  background: #e5e7eb;
}

.filter-btn.active {
  background: #1e40af;
  color: white;
}

.inquiry-actions {
  display: flex;
  gap: 8px;
}

.refresh-btn,
.add-btn {
  padding: 8px 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}

.refresh-btn {
  background: #f3f4f6;
}

.refresh-btn:hover {
  background: #e5e7eb;
}

.add-btn {
  background: #ec4899;
  color: white;
}

.add-btn:hover {
  background: #db2777;
}

/* 문의 등록/수정 모달 */
.inq-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  animation: cs-quick-memo-fade 0.15s ease-out;
}

.inq-modal {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
  width: 500px;
  max-width: 90vw;
  max-height: 90vh;
  overflow-y: auto;
  animation: cs-quick-memo-slide-up 0.2s ease-out;
}

.inq-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e2e8f0;
}

.inq-modal-title {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
  color: #1e293b;
}

.inq-modal-close {
  background: none;
  border: none;
  font-size: 22px;
  color: #94a3b8;
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.15s;
}

.inq-modal-close:hover {
  background: #fee2e2;
  color: #ef4444;
}

.inq-modal-form {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.inq-modal-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.inq-modal-label {
  font-size: 12px;
  font-weight: 600;
  color: #64748b;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.inq-modal-chips {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.inq-modal-chip {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 14px;
  border: 1px solid #e5e7eb;
  border-radius: 20px;
  background: #fff;
  color: #6b7280;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.inq-modal-chip:hover {
  border-color: #93c5fd;
  color: #1d4ed8;
}

.inq-modal-chip.active {
  background: #1d4ed8;
  border-color: #1d4ed8;
  color: #fff;
}

.inq-modal-row {
  display: flex;
  gap: 8px;
}

.inq-modal-input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  outline: none;
  transition: border-color 0.2s;
}

.inq-modal-input:focus {
  border-color: #60a5fa;
  box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
}

.inq-modal-textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  resize: vertical;
  outline: none;
  font-family: inherit;
  transition: border-color 0.2s;
  box-sizing: border-box;
}

.inq-modal-textarea:focus {
  border-color: #60a5fa;
  box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
}

.inq-modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding-top: 4px;
}

.inq-modal-cancel {
  padding: 8px 20px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: #fff;
  color: #6b7280;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.inq-modal-cancel:hover {
  background: #f1f5f9;
  color: #374151;
}

.inq-modal-submit {
  padding: 8px 24px;
  border: none;
  border-radius: 6px;
  background: #1d4ed8;
  color: #fff;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
}

.inq-modal-submit:hover {
  background: #1e40af;
}

/* 문의 목록 */
.inquiry-list {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.inquiry-empty {
  text-align: center;
  padding: 60px 20px;
  color: #6b7280;
}

.inquiry-loading,
.inquiry-error {
  text-align: center;
  padding: 40px 20px;
}

.inquiry-error {
  color: #dc2626;
}

.inquiry-card {
  display: flex;
  flex-direction: column;
  background: white;
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.inquiry-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.inquiry-meta {
  display: flex;
  gap: 8px;
  align-items: center;
}

.channel-badge,
.type-badge,
.status-badge {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
}

.channel-badge {
  background: #f3f4f6;
}

.type-badge {
  background: #dbeafe;
  color: #1e40af;
}

.status-badge {
  color: white;
}

.inquiry-time {
  font-size: 12px;
  color: #9ca3af;
}

.inquiry-card-body {
  margin-bottom: 12px;
}

.inquiry-patient {
  display: flex;
  gap: 12px;
  margin-bottom: 8px;
  font-size: 14px;
}

.inquiry-patient strong {
  color: #1f2937;
}

.inquiry-patient span {
  color: #6b7280;
}

.inquiry-content {
  font-size: 14px;
  color: #374151;
  line-height: 1.5;
  margin: 0;
}

.inquiry-response {
  margin-top: 8px;
  padding: 8px 12px;
  background: #f9fafb;
  border-radius: 8px;
  font-size: 13px;
  color: #6b7280;
}

.inquiry-response span {
  font-weight: 600;
  color: #374151;
}

.inquiry-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 12px;
  border-top: 1px solid #f3f4f6;
  margin-top: auto;
}

.staff-name {
  font-size: 12px;
  color: #9ca3af;
}

.inquiry-card-actions {
  display: flex;
  gap: 6px;
}

.action-btn {
  padding: 6px 12px;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.action-btn.complete {
  background: #d1fae5;
  color: #059669;
}

.action-btn.convert {
  background: #dbeafe;
  color: #2563eb;
}

.action-btn.revert {
  background: #fef3c7;
  color: #d97706;
}

.action-btn.delete {
  background: #fee2e2;
  color: #dc2626;
}

.action-btn:hover {
  opacity: 0.8;
}

.action-btn.edit {
  background: #e0f2fe;
  color: #0369a1;
}

.action-btn.match {
  background: #ede9fe;
  color: #7c3aed;
}

/* 환자 매칭 뱃지 */
.inquiry-matched-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: #ede9fe;
  border: 1px solid #c4b5fd;
  border-radius: 16px;
  font-size: 12px;
  margin-bottom: 6px;
}

.inquiry-matched-badge .matched-icon {
  font-size: 13px;
}

.inquiry-matched-badge .matched-name {
  font-weight: 600;
  color: #5b21b6;
}

.inquiry-matched-badge .matched-chart {
  color: #7c3aed;
}

.inquiry-matched-badge .matched-unlink {
  background: none;
  border: none;
  color: #a78bfa;
  font-size: 16px;
  cursor: pointer;
  padding: 0 2px;
  line-height: 1;
}

.inquiry-matched-badge .matched-unlink:hover {
  color: #ef4444;
}

/* 환자 매칭 검색 팝업 */
.match-popup {
  position: absolute;
  bottom: calc(100% + 4px);
  right: 0;
  width: 320px;
  background: #fff;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  z-index: 9999;
  padding: 8px;
}

.match-popup-input {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  outline: none;
  box-sizing: border-box;
}

.match-popup-input:focus {
  border-color: #60a5fa;
}

.match-popup-results {
  max-height: 200px;
  overflow-y: auto;
  margin-top: 4px;
}

.match-popup-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  cursor: pointer;
  font-size: 13px;
  border-radius: 4px;
  transition: background 0.1s;
}

.match-popup-item:hover {
  background: #eff6ff;
}

.match-item-name {
  font-weight: 600;
  color: #1e293b;
}

.match-item-chart {
  color: #6366f1;
  font-size: 12px;
}

.match-item-phone {
  color: #64748b;
  font-size: 12px;
  margin-left: auto;
}

.match-popup-empty {
  padding: 12px;
  text-align: center;
  color: #94a3b8;
  font-size: 13px;
}

/* 수납관리 뷰 */
.receipt-view {
  padding: 5px;
  display: flex;
  flex-direction: column;
  height: 100%;
  box-sizing: border-box;
}

.receipt-search-bar {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
  background: white;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.receipt-search-bar .search-input {
  flex: 1;
  padding: 10px 16px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
}

.receipt-search-bar .search-input:focus {
  outline: none;
  border-color: #3b82f6;
}

.receipt-search-bar .search-btn,
.receipt-search-bar .refresh-btn {
  padding: 10px 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
}

.receipt-search-bar .search-btn {
  background: #ec4899;
  color: white;
}

.receipt-search-bar .refresh-btn {
  background: #f3f4f6;
}

.receipt-loading,
.receipt-empty {
  text-align: center;
  padding: 60px 20px;
  color: #6b7280;
}

.receipt-table {
  width: 100%;
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  border-collapse: collapse;
}

.receipt-table th,
.receipt-table td {
  padding: 12px 16px;
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
}

.receipt-table th {
  background: #f9fafb;
  font-weight: 600;
  font-size: 13px;
  color: #374151;
}

.receipt-table td {
  font-size: 14px;
}

.receipt-table .chart-number {
  font-family: monospace;
  color: #6b7280;
}

.receipt-table .patient-name {
  font-weight: 600;
}

.receipt-table .amount {
  text-align: right;
}

.receipt-table .unpaid {
  text-align: right;
}

.receipt-table .unpaid.has-unpaid {
  color: #dc2626;
  font-weight: 600;
}

.receipt-table .edit-input,
.receipt-table .edit-textarea {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 13px;
}

.receipt-table .actions {
  white-space: nowrap;
}

.receipt-table .edit-btn,
.receipt-table .save-btn,
.receipt-table .cancel-btn {
  padding: 4px 10px;
  border: none;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  margin-right: 4px;
}

.receipt-table .edit-btn {
  background: #dbeafe;
  color: #2563eb;
}

.receipt-table .save-btn {
  background: #d1fae5;
  color: #059669;
}

.receipt-table .cancel-btn {
  background: #f3f4f6;
  color: #6b7280;
}

/* 환자검색 뷰 */
.patient-search-view {
  padding: 20px;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.patient-search-bar {
  display: flex;
  gap: 8px;
  margin-bottom: 20px;
  background: white;
  padding: 16px;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.patient-search-bar .search-input {
  flex: 1;
  padding: 12px 16px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 15px;
}

.patient-search-bar .search-input:focus {
  outline: none;
  border-color: #3b82f6;
}

.patient-search-bar .search-btn {
  padding: 12px 24px;
  background: #ec4899;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
}

.patient-search-bar .search-btn:hover {
  background: #db2777;
}

.patient-search-bar .search-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
}

.search-error {
  margin-bottom: 16px;
  padding: 12px 16px;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 8px;
}

.patient-search-content {
  flex: 1;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  min-height: 0;
}

.patient-list-panel {
  background: white;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  overflow-y: auto;
}

.patient-empty {
  padding: 60px 20px;
  text-align: center;
  color: #6b7280;
}

.patient-list-item {
  padding: 14px 16px;
  border-bottom: 1px solid #f3f4f6;
  cursor: pointer;
  transition: all 0.2s;
}

.patient-list-item:hover {
  background: #f9fafb;
}

.patient-list-item.selected {
  background: #dbeafe;
  border-left: 3px solid #3b82f6;
}

.patient-list-main {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 4px;
}

.patient-chart {
  font-family: monospace;
  font-size: 13px;
  color: #6b7280;
}

.patient-name {
  font-weight: 600;
  font-size: 15px;
}

.patient-name.clickable {
  cursor: pointer;
  color: #4f46e5;
}

.patient-name.clickable:hover {
  text-decoration: underline;
}

.patient-gender {
  font-size: 13px;
  color: #6b7280;
}

.patient-list-sub {
  display: flex;
  gap: 16px;
  font-size: 13px;
  color: #9ca3af;
}

/* 환자 상세 */
.patient-detail-panel {
  background: white;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  padding: 20px;
  overflow-y: auto;
}

.patient-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid #e5e7eb;
}

.patient-detail-header h3 {
  font-size: 20px;
  font-weight: 700;
}

.patient-detail-chart {
  font-family: monospace;
  font-size: 14px;
  color: #6b7280;
  background: #f3f4f6;
  padding: 4px 12px;
  border-radius: 6px;
}

.patient-detail-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 24px;
}

.detail-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.detail-item.full-width {
  grid-column: 1 / -1;
}

.detail-item label {
  font-size: 12px;
  color: #6b7280;
  font-weight: 500;
}

.detail-item span {
  font-size: 14px;
  color: #1f2937;
}

.patient-detail-actions {
  display: flex;
  gap: 8px;
}

.patient-detail-actions .action-btn {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
}

.patient-detail-actions .action-btn.reservation {
  background: #3b82f6;
  color: white;
}

.patient-detail-actions .action-btn.reservation:hover {
  background: #2563eb;
}

.patient-detail-actions .action-btn.dashboard {
  background: #667eea;
  color: white;
}

.patient-detail-actions .action-btn.dashboard:hover {
  background: #5a6fd6;
}

/* ============================================
   수납관리 뷰 - 아코디언 스타일
   ============================================ */

/* 날짜 선택 바 */
.receipt-date-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
  background: white;
  padding: 12px 16px;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.receipt-date-bar .date-nav-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.receipt-date-bar .date-nav-btn:hover {
  background: #e5e7eb;
}

.receipt-date-bar .date-input-wrap {
  position: relative;
  display: inline-flex;
  align-items: center;
}
.receipt-date-bar .date-input-hidden {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  opacity: 0;
  pointer-events: none;
}
.receipt-date-bar .date-display {
  padding: 8px 14px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  background: white;
  cursor: pointer;
  white-space: nowrap;
}
.receipt-date-bar .date-display:hover {
  border-color: #3b82f6;
}

.receipt-date-bar .today-btn {
  padding: 8px 16px;
  background: #ec4899;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
}

.receipt-date-bar .today-btn:hover {
  background: #db2777;
}

.receipt-date-bar .refresh-btn {
  padding: 8px 16px;
  background: #f3f4f6;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
  margin-left: auto;
}

.receipt-date-bar .refresh-btn:hover {
  background: #e5e7eb;
}

/* 환자 검색 */
.receipt-search-container {
  position: relative;
  margin-left: auto;
  margin-right: 12px;
}

.receipt-search-input-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 6px 12px;
  transition: all 0.2s;
}

.receipt-search-input-wrapper:focus-within {
  background: white;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}

.receipt-search-input-wrapper i {
  color: #9ca3af;
  font-size: 14px;
}

.receipt-search-input {
  border: none;
  background: transparent;
  outline: none;
  font-size: 14px;
  width: 140px;
  color: #1f2937;
}

.receipt-search-input::placeholder {
  color: #9ca3af;
}

.receipt-search-input-wrapper .search-loading {
  color: #3b82f6;
}

.search-clear-btn {
  background: none;
  border: none;
  padding: 2px;
  cursor: pointer;
  color: #9ca3af;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: color 0.2s;
}

.search-clear-btn:hover {
  color: #6b7280;
}

.receipt-search-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  margin-top: 4px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  max-height: 320px;
  overflow-y: auto;
  min-width: 280px;
}

.receipt-search-result-item {
  padding: 10px 14px;
  cursor: pointer;
  border-bottom: 1px solid #f3f4f6;
  transition: background 0.15s;
}

.receipt-search-result-item:last-child {
  border-bottom: none;
}

.receipt-search-result-item:hover,
.receipt-search-result-item.highlighted {
  background: #f0f9ff;
}

.search-result-main {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
}

.search-result-name {
  font-weight: 600;
  color: #1f2937;
  font-size: 14px;
}

.search-result-chart {
  font-size: 13px;
  color: #6b7280;
}

.search-result-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: #9ca3af;
}

.search-result-meta span {
  display: flex;
  align-items: center;
}

.search-result-footer {
  padding: 8px 14px;
  background: #f9fafb;
  border-top: 1px solid #e5e7eb;
  font-size: 12px;
  color: #6b7280;
  text-align: center;
}

.search-no-results {
  padding: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  color: #9ca3af;
}

.search-no-results i {
  font-size: 24px;
}

.search-no-results span {
  font-size: 13px;
}

/* 기록 상태 필터 */
.record-filter-group {
  display: flex;
  gap: 4px;
  margin-left: 16px;
  background: #f3f4f6;
  border-radius: 8px;
  padding: 3px;
}

.record-filter-btn {
  padding: 6px 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 6px;
}

.record-filter-btn:hover {
  background: rgba(255, 255, 255, 0.6);
}

.record-filter-btn.active {
  background: white;
  color: #1f2937;
  font-weight: 500;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.record-filter-btn.incomplete.active {
  background: #fef3c7;
  color: #d97706;
}

.record-filter-btn.completed.active {
  background: #d1fae5;
  color: #059669;
}

.record-filter-btn .filter-count {
  display: inline-block;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  background: rgba(0, 0, 0, 0.08);
  border-radius: 9px;
  font-size: 11px;
  font-weight: 600;
  line-height: 18px;
  text-align: center;
}

.record-filter-btn.active .filter-count {
  background: rgba(0, 0, 0, 0.1);
}

/* 현장예약율 표시 */
.onsite-rate-display {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-left: 16px;
  padding: 6px 14px;
  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
  border: 1px solid #bfdbfe;
  border-radius: 8px;
}

.onsite-rate-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.onsite-rate-divider {
  width: 1px;
  height: 20px;
  background: #93c5fd;
}

.onsite-label {
  font-size: 12px;
  color: #64748b;
  font-weight: 500;
}

.onsite-value {
  font-size: 16px;
  font-weight: 700;
  color: #10b981;
}

.onsite-value.reserved {
  color: #3b82f6;
}

.onsite-detail {
  font-size: 11px;
  color: #94a3b8;
}

.receipt-error {
  padding: 12px 16px;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 8px;
  margin-bottom: 16px;
}

/* 아코디언 테이블 */
.receipt-accordion-table {
  background: white;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow: auto;
}

/* 테이블 헤더 */
.receipt-header-row {
  display: grid;
  grid-template-columns: 36px 50px 120px 36px 32px 65px 75px 75px 95px 1fr 75px;
  /* #, 시간, 환자, 나이, 담당, 종별, 본인부담, 비급여, 수납/방식, 메모, 예약 */
  gap: 6px;
  padding: 12px 16px;
  background: #f9fafb;
  border-bottom: 2px solid #e5e7eb;
  font-weight: 600;
  font-size: 13px;
  color: #374151;
  align-items: center;
}

/* 헤더 컬럼 기본 좌측 정렬 */
.receipt-header-row > div {
  text-align: left;
}

/* 금액 관련 헤더 우측 정렬 */
.receipt-header-row .col-self,
.receipt-header-row .col-general,
.receipt-header-row .col-payment {
  text-align: right;
}

/* 데이터 행 */
.receipt-row {
  display: grid;
  grid-template-columns: 36px 50px 120px 36px 32px 65px 75px 75px 95px 1fr 75px;
  /* #, 시간, 환자, 나이, 담당, 종별, 본인부담, 비급여, 수납/방식, 메모, 예약 */
  gap: 6px;
  padding: 12px 16px;
  border-bottom: 1px solid #f3f4f6;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
  align-items: center;
}

.receipt-row:hover {
  background: #f9fafb;
}

.receipt-row.expanded {
  background: #eff6ff;
  border-bottom-color: transparent;
}

/* 완료된 행 */
.receipt-row.completed {
  background: #f0fdf4;
}

.receipt-row.completed:hover {
  background: #dcfce7;
}

.receipt-row.completed .col-patient .patient-name {
  color: #059669;
}

/* 완료 처리 버튼 및 배지 */
.reservation-actions {
  display: flex;
  align-items: center;
  gap: 6px;
  justify-content: center;
}

.complete-btn {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: 1px dashed #d1d5db;
  border-radius: 4px;
  color: #9ca3af;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 11px;
}

.complete-btn:hover {
  background: #d1fae5;
  border-color: #10b981;
  border-style: solid;
  color: #059669;
}

.complete-badge {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #10b981;
  border-radius: 4px;
  color: white;
  font-size: 11px;
}

/* 열 스타일 */
.receipt-row .col-num {
  text-align: center;
  color: #9ca3af;
  font-size: 13px;
}

.receipt-row .col-time {
  font-family: monospace;
  font-size: 13px;
  color: #6b7280;
}

.receipt-row .col-patient {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  align-items: baseline;
}

.receipt-row .col-patient .patient-name {
  font-weight: 600;
  color: #1f2937;
}

.receipt-row .col-patient .patient-info {
  color: #9ca3af;
}

.receipt-row .col-age {
  text-align: center;
  font-size: 13px;
  color: #6b7280;
}

.receipt-row .col-doctor {
  font-weight: 600;
  color: #6366f1;
  text-align: center;
}

.receipt-row .col-type {
  font-size: 12px;
}

.receipt-row .col-type .type-badge {
  display: inline-block;
  padding: 2px 8px;
  background: #e0e7ff;
  color: #4338ca;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
}

/* 건보 (건강보험) - 파란색 계열 */
.receipt-row .col-type .type-badge.type-gunbo {
  background: #dbeafe;
  color: #1d4ed8;
}

/* 자보 (자동차보험) - 주황색 계열 */
.receipt-row .col-type .type-badge.type-jabo {
  background: #fef3c7;
  color: #d97706;
}

.receipt-row .col-self,
.receipt-row .col-general {
  text-align: right;
  font-family: monospace;
  font-size: 13px;
}

.receipt-row .col-self {
  color: #0369a1;
}

.receipt-row .col-general {
  color: #059669;
  font-weight: 500;
}

.receipt-row .col-payment {
  text-align: right;
}

.receipt-row .col-payment .payment-amount {
  font-weight: 600;
  font-size: 13px;
  font-family: monospace;
}

.receipt-row .col-payment .payment-methods {
  display: flex;
  justify-content: flex-end;
  gap: 6px;
  margin-top: 2px;
  font-size: 12px;
}

.receipt-row .col-memo {
  font-size: 12px;
  color: #6b7280;
  overflow: hidden;
  min-width: 0;
}

.receipt-row .col-memo .memo-summary {
  color: #3b82f6;
  font-weight: 500;
}

/* ===== 메모 태그 리스트 ===== */
.memo-tag-list {
  display: flex;
  flex-wrap: nowrap;
  gap: 4px;
  overflow: hidden;
  align-items: center;
  height: 100%;
}

/* +메모 버튼 */
.memo-tag--add {
  background: #f3f4f6;
  border-color: #d1d5db;
  color: #6b7280;
}

.memo-tag--add:hover {
  background: #e5e7eb;
  color: #374151;
}

/* 개별 메모 태그 */
.memo-tag {
  display: inline-flex;
  align-items: center;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  white-space: nowrap;
  transition: all 0.15s ease;
  flex-shrink: 0;
  color: #3b82f6;
}

.memo-tag:hover {
  opacity: 0.8;
}

/* 타입별 색상 */
.memo-tag--yakchim { color: #1d4ed8; background: #dbeafe; }        /* 약침: 파랑 */
.memo-tag--yakchim-onetime { color: #1d4ed8; background: #dbeafe; }  /* 약침 일회성: 파랑 */
.memo-tag--treatment { color: #6d28d9; background: #ede9fe; }      /* 시술패키지: 보라 */
.memo-tag--herbal { color: #047857; background: #d1fae5; }         /* 한약: 초록 */
.memo-tag--nokryong { color: #b45309; background: #fef3c7; }       /* 녹용: 노랑 */
.memo-tag--point-used { color: #78350f; background: #fde68a; }     /* 포인트사용: 진한노랑 */
.memo-tag--point-earned { color: #047857; background: #d1fae5; }   /* 포인트적립: 초록 */
.memo-tag--membership { color: #be185d; background: #fce7f3; }     /* 멤버십: 분홍 */
.memo-tag--dispensing { color: #c2410c; background: #ffedd5; }     /* 한약출납: 주황 */
.memo-tag--gift { color: #b91c1c; background: #fee2e2; }           /* 증정품: 빨강 */
.memo-tag--document { color: #374151; background: #f3f4f6; }       /* 서류: 회색 */
.memo-tag--medicine { color: #0e7490; background: #cffafe; }       /* 상비약: 청록 */

/* +메모 버튼만 박스 스타일 */
.memo-tag--add {
  margin-left: auto;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  padding: 2px 6px;
  color: #6b7280;
}

.memo-tag--add:hover {
  background: #e5e7eb;
  color: #374151;
}

/* 메모 상태 배지 (비급여 항목용) */
.memo-badge {
  font-size: 10px;
  padding: 1px 4px;
  border-radius: 3px;
  margin-left: 4px;
  font-weight: 500;
}

.memo-badge.empty {
  background: #fef3c7;
  color: #92400e;
}

.memo-badge.filled {
  background: #dcfce7;
  color: #16a34a;
}

/* 예약 상태 */
.receipt-row .col-reservation {
  text-align: center;
}

.reservation-btn {
  padding: 4px 12px;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.reservation-btn.empty {
  background: #f3f4f6;
  color: #6b7280;
}

.reservation-btn.empty:hover {
  background: #3b82f6;
  color: white;
}

.reservation-status {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
}

.reservation-status.pending_call {
  background: #fef3c7;
  color: #d97706;
}

.reservation-status.pending_kakao {
  background: #fef3c7;
  color: #d97706;
}

.reservation-status.pending_naver {
  background: #d1fae5;
  color: #059669;
}

.reservation-status.pending_anytime {
  background: #e0e7ff;
  color: #4f46e5;
}

.reservation-status.confirmed {
  background: #dbeafe;
  color: #2563eb;
  font-weight: 600;
}

/* 상세 패널 */
.receipt-detail-panel {
  background: #f8fafc;
  border-bottom: 2px solid #e5e7eb;
  padding: 16px;
}

.detail-loading {
  padding: 20px;
  text-align: center;
  color: #6b7280;
}

.detail-content {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* 3x2 그리드 레이아웃 */
.detail-grid-3x2 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.grid-card {
  background: white;
  border-radius: 6px;
  border: 1px solid #e5e7eb;
  overflow: hidden;
}

.grid-card-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: #f9fafb;
  border-bottom: 1px solid #e5e7eb;
}

.grid-icon {
  font-size: 12px;
}

.grid-title {
  font-size: 12px;
  font-weight: 600;
  color: #374151;
}

.grid-add-btn {
  margin-left: auto;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 1px dashed #d1d5db;
  border-radius: 4px;
  font-size: 12px;
  color: #9ca3af;
  cursor: pointer;
}

.grid-add-btn:hover {
  background: #f3f4f6;
  border-color: #9ca3af;
  color: #6b7280;
}

.grid-card-body {
  padding: 8px 10px;
  min-height: 36px;
  display: flex;
  align-items: center;
}

.grid-empty {
  color: #d1d5db;
  font-size: 12px;
}

/* 그리드 태그 */
.grid-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.grid-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 11px;
}

.grid-tag .tag-name {
  font-weight: 600;
}

.grid-tag .tag-count {
  font-family: monospace;
  font-size: 10px;
}

.grid-tag .tag-extra {
  font-size: 9px;
  opacity: 0.7;
}

.grid-tag .tag-expire {
  font-size: 9px;
  opacity: 0.7;
}

.grid-tag .tag-use-btn {
  margin-left: 2px;
  padding: 1px 5px;
  background: rgba(255,255,255,0.8);
  border: none;
  border-radius: 3px;
  font-size: 10px;
  cursor: pointer;
}

.grid-tag .tag-use-btn:hover {
  background: white;
}

.grid-tag .tag-type {
  padding: 1px 4px;
  background: rgba(255,255,255,0.5);
  border-radius: 2px;
  font-size: 9px;
  font-weight: 600;
}

.grid-tag .tag-qty {
  font-size: 10px;
  opacity: 0.8;
}

/* 그리드 태그 색상 */
.grid-tag.pkg {
  background: #dbeafe;
  color: #1e40af;
}

.grid-tag.herbal {
  background: #dcfce7;
  color: #166534;
}

.grid-tag.membership {
  background: #fef3c7;
  color: #92400e;
}

.grid-tag.dispensing {
  background: #f3e8ff;
  color: #7c3aed;
}

.grid-tag.gift {
  background: #fce7f3;
  color: #be185d;
}

/* 포인트 */
.grid-point-balance {
  margin-left: auto;
  font-size: 13px;
  font-weight: 700;
  color: #2563eb;
}

.grid-point-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  width: 100%;
}

.grid-point-actions input {
  flex: 1;
  min-width: 0;
  padding: 4px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 11px;
}

.point-btn {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
}

.point-btn.use {
  background: #fee2e2;
  color: #dc2626;
}

.point-btn.earn {
  background: #dcfce7;
  color: #16a34a;
}

/* 예약 버튼 */
.grid-res-btns {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.grid-res-btns .res-btn {
  padding: 4px 8px;
  background: #f3f4f6;
  border: none;
  border-radius: 4px;
  font-size: 11px;
  color: #6b7280;
  cursor: pointer;
}

.grid-res-btns .res-btn:hover {
  background: #e5e7eb;
}

.grid-res-btns .res-btn.active {
  background: #dbeafe;
  color: #2563eb;
  font-weight: 500;
}

/* 메모 */
.grid-memo {
  display: flex;
  gap: 4px;
  width: 100%;
}

.grid-memo input {
  flex: 1;
  min-width: 0;
  padding: 4px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 11px;
}

.grid-memo input:focus {
  outline: none;
  border-color: #3b82f6;
}

.grid-memo button {
  padding: 4px 10px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
}

.grid-memo button:hover {
  background: #2563eb;
}

/* 지금 예약 버튼 */
.grid-quick-res-btn {
  margin-left: auto;
  padding: 3px 10px;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.grid-quick-res-btn:hover {
  background: #059669;
}

/* 패키지 목록 */
.package-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.package-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #f9fafb;
  border-radius: 6px;
  font-size: 13px;
}

.package-item .pkg-name {
  font-weight: 600;
  color: #1f2937;
}

.package-item .pkg-count {
  color: #3b82f6;
  font-family: monospace;
}

.package-item .pkg-includes {
  color: #6b7280;
  font-size: 12px;
}

.package-item .pkg-delivery {
  color: #6b7280;
  font-size: 12px;
  margin-left: auto;
}

.package-item .pkg-completed {
  color: #10b981;
  font-size: 12px;
  font-weight: 500;
}

.package-item .use-btn {
  padding: 4px 10px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  margin-left: auto;
}

.package-item .use-btn:hover {
  background: #2563eb;
}

/* 멤버십 정보 */
.membership-info {
  display: flex;
  gap: 16px;
  padding: 12px;
  background: #fef3c7;
  border-radius: 8px;
  font-size: 13px;
}

.membership-info .membership-type {
  font-weight: 600;
  color: #d97706;
}

.membership-info .membership-count {
  color: #92400e;
}

.membership-info .membership-expire {
  color: #78716c;
  margin-left: auto;
}

/* 포인트 탭 */
.point-tab .point-balance {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  border-radius: 8px;
  margin-bottom: 12px;
}

.point-tab .point-balance .label {
  color: rgba(255, 255, 255, 0.8);
  font-size: 13px;
}

.point-tab .point-balance .amount {
  color: white;
  font-size: 24px;
  font-weight: 700;
}

.point-tab .point-today {
  display: flex;
  gap: 16px;
  margin-bottom: 16px;
  font-size: 13px;
}

.point-tab .point-today .used {
  color: #dc2626;
}

.point-tab .point-today .earned {
  color: #059669;
}

.point-tab .point-actions {
  display: flex;
  gap: 12px;
}

.point-tab .point-input-group {
  display: flex;
  gap: 8px;
  flex: 1;
}

.point-tab .point-input-group input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
}

.point-tab .point-input-group button {
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s;
}

.point-tab .point-input-group:first-child button {
  background: #fee2e2;
  color: #dc2626;
}

.point-tab .point-input-group:last-child button {
  background: #d1fae5;
  color: #059669;
}

/* 출납 목록 */
.dispensing-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.dispensing-list li {
  padding: 8px 12px;
  background: #f9fafb;
  border-radius: 6px;
  margin-bottom: 6px;
  font-size: 13px;
  color: #374151;
}

.dispensing-list li:last-child {
  margin-bottom: 0;
}

/* 메모/예약 탭 */
.memo-tab .reservation-status-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 16px;
}

.memo-tab .reservation-status-buttons button {
  padding: 8px 14px;
  background: #f3f4f6;
  border: 2px solid transparent;
  border-radius: 8px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s;
}

.memo-tab .reservation-status-buttons button:hover {
  background: #e5e7eb;
}

.memo-tab .reservation-status-buttons button.active {
  background: #dbeafe;
  border-color: #3b82f6;
  color: #1e40af;
  font-weight: 500;
}

.memo-tab .confirmed-date-input {
  display: flex;
  gap: 8px;
  margin-left: auto;
}

.memo-tab .confirmed-date-input input {
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
}

.memo-tab .confirmed-date-input button {
  padding: 6px 14px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
}

.memo-tab textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  resize: vertical;
  min-height: 80px;
}

.memo-tab textarea:focus {
  outline: none;
  border-color: #3b82f6;
}

.memo-tab .save-memo-btn {
  margin-top: 8px;
  padding: 8px 20px;
  background: #ec4899;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
}

.memo-tab .save-memo-btn:hover {
  background: #db2777;
}

/* 빈 상태 */
.receipt-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  background: white;
  border-radius: 12px;
  color: #9ca3af;
}

.receipt-empty i {
  font-size: 48px;
  margin-bottom: 16px;
}

/* ============================================ */
/* 수납상세 2단 레이아웃                        */
/* ============================================ */

.receipt-detail-2col {
  display: grid;
  grid-template-columns: 260px 1fr;
  gap: 12px;
}

/* 왼쪽: 진료상세 컬럼 */
.treatment-detail-col {
  display: flex;
  flex-direction: column;
  gap: 12px;
  background: white;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
  padding: 12px;
}

/* 진료항목 */
.treatment-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* 급여 항목 뱃지 영역 */
.treatment-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.treatment-badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
}

/* 초진/재진 뱃지 */
.treatment-badge.consult {
  background: #dbeafe;
  color: #1d4ed8;
}

/* 급여 항목 뱃지 */
.treatment-badge.covered {
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #e5e7eb;
}

/* 비급여 항목 영역 (약침, 상비약) */
.treatment-extras {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.treatment-extra {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #6b7280;
}

.treatment-extra i {
  font-size: 14px;
}

/* 약침 */
.treatment-extra.yakchim {
  color: #7c3aed;
}

.treatment-extra.yakchim i {
  color: #8b5cf6;
}

/* 상비약 */
.treatment-extra.sangbiyak {
  color: #059669;
}

.treatment-extra.sangbiyak i {
  color: #10b981;
}

/* 수납금액 섹션 */
.receipt-amount-section {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-top: 10px;
  border-top: 1px solid #e5e7eb;
}

.amount-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
}

.amount-row .amount-label {
  color: #6b7280;
}

.amount-row .amount-value {
  font-family: monospace;
  font-weight: 500;
}

.amount-row .amount-value.insurance {
  color: #0369a1;
}

.amount-row .amount-value.general {
  color: #059669;
}

.amount-row.total {
  padding-top: 6px;
  border-top: 1px dashed #e5e7eb;
  margin-top: 2px;
}

.amount-row.total .amount-label {
  font-weight: 600;
  color: #374151;
}

.amount-row.total .amount-value {
  font-size: 15px;
  font-weight: 700;
  color: #1f2937;
}

/* 결제방식 */
.payment-method-row {
  display: flex;
  gap: 8px;
  margin-top: 4px;
  flex-wrap: wrap;
}

.payment-method-row .method {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  padding: 3px 8px;
  border-radius: 4px;
}

.payment-method-row .method i {
  font-size: 10px;
}

.payment-method-row .method.card {
  background: #f3e8ff;
  color: #7c3aed;
}

.payment-method-row .method.cash {
  background: #fef3c7;
  color: #d97706;
}

.payment-method-row .method.transfer {
  background: #ccfbf1;
  color: #0d9488;
}

/* ============================================ */
/* 환자 수납이력 모달                           */
/* ============================================ */

/* 환자 클릭 가능 표시 */
.receipt-row .col-patient.clickable {
  cursor: pointer;
  border-radius: 4px;
  padding: 2px 4px;
  margin: -2px -4px;
  transition: background 0.2s;
}

.receipt-row .col-patient.clickable:hover {
  background: #dbeafe;
}

.receipt-row .col-patient.clickable:hover .patient-name {
  color: #2563eb;
}

/* 모달 오버레이 - 헤더/사이드바 안쪽 영역만 */
.patient-history-modal-overlay {
  position: fixed;
  top: 56px;    /* 헤더 높이 */
  left: 220px;  /* 사이드바 너비 */
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 1000;
}

/* 모달 본체 - 콘텐츠 영역 내 전체 */
.patient-history-modal {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: white;
  display: flex;
  flex-direction: column;
}

/* 모달 헤더 */
.history-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
}

.history-modal-header h3 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 18px;
  font-weight: 700;
  margin: 0;
}

.history-modal-header .patient-name {
  color: #1f2937;
}

.history-modal-header .chart-no {
  color: #6b7280;
  font-weight: 500;
}

.history-modal-header .title-suffix {
  color: #9ca3af;
  font-weight: 500;
}

.history-modal-header .close-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  color: #6b7280;
  font-size: 18px;
  transition: all 0.2s;
}

.history-modal-header .close-btn:hover {
  background: #f3f4f6;
  color: #1f2937;
}

/* 툴바 */
.history-modal-toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px;
  background: #f9fafb;
  border-bottom: 1px solid #e5e7eb;
}

.period-filters {
  display: flex;
  gap: 6px;
}

.period-btn {
  padding: 6px 14px;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.period-btn:hover {
  background: #f3f4f6;
}

.period-btn.active {
  background: #2563eb;
  border-color: #2563eb;
  color: white;
}

.history-summary {
  font-size: 14px;
  color: #6b7280;
}

.history-summary strong {
  color: #1f2937;
  font-weight: 600;
}

/* 모달 바디 */
.history-modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 0;
}

.history-loading,
.history-error,
.history-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: #6b7280;
}

.history-error {
  color: #dc2626;
}

.history-empty i {
  font-size: 48px;
  margin-bottom: 12px;
  opacity: 0.5;
}

/* 이력 테이블 */
.history-table {
  width: 100%;
}

.history-header-row {
  display: grid;
  grid-template-columns: 80px 1fr 75px 75px 60px 1fr;
  /* 날짜, 진료항목, 본인부담, 비급여, 방식, 메모 */
  gap: 8px;
  padding: 10px 20px;
  background: #f9fafb;
  border-bottom: 2px solid #e5e7eb;
  font-weight: 600;
  font-size: 13px;
  color: #374151;
  position: sticky;
  top: 0;
}

/* 헤더 기본 좌측 정렬 */
.history-header-row > div {
  text-align: left;
}

/* 금액 관련 헤더 우측 정렬 */
.history-header-row .col-self,
.history-header-row .col-general {
  text-align: right;
}

.history-row {
  display: grid;
  grid-template-columns: 80px 1fr 75px 75px 60px 1fr;
  /* 날짜, 진료항목, 본인부담, 비급여, 방식, 메모 */
  gap: 8px;
  padding: 12px 20px;
  border-bottom: 1px solid #f3f4f6;
  cursor: pointer;
  transition: background 0.2s;
  font-size: 14px;
  align-items: center;
}

.history-row:hover {
  background: #f9fafb;
}

.history-row.expanded {
  background: #eff6ff;
  border-bottom-color: transparent;
}

.history-row .col-date {
  font-weight: 500;
  color: #374151;
}

.history-row .col-items {
  color: #6b7280;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.history-row .col-self,
.history-row .col-general {
  text-align: right;
  font-family: monospace;
  font-size: 13px;
}

.history-row .col-self {
  color: #0369a1;
}

.history-row .col-general {
  color: #059669;
  font-weight: 500;
}

.history-row .col-method {
  display: flex;
  gap: 6px;
  font-size: 13px;
}

.history-row .col-memo .memo-text {
  color: #3b82f6;
  font-size: 13px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* 상세 패널 */
.history-detail-panel {
  background: #f8fafc;
  border-bottom: 2px solid #e5e7eb;
  padding: 16px 20px;
}

.history-detail-panel .detail-loading {
  padding: 20px;
  text-align: center;
  color: #6b7280;
}

/* 2단 레이아웃 (수납상세와 동일) */
.history-detail-2col {
  display: grid;
  grid-template-columns: 260px 1fr;
  gap: 12px;
}

/* 포인트 정보 */
.grid-point-info {
  display: flex;
  gap: 8px;
  font-size: 13px;
}

.grid-point-info .point-used {
  color: #dc2626;
}

.grid-point-info .point-earned {
  color: #059669;
}

/* 모달 푸터 (페이징) */
.history-modal-footer {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
  padding: 12px 20px;
  border-top: 1px solid #e5e7eb;
  background: #f9fafb;
}

.page-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
}

.page-btn:hover:not(:disabled) {
  background: #f3f4f6;
}

.page-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.page-info {
  font-size: 14px;
  color: #6b7280;
}

/* ============================================ */
/* 추가 모달 공통 스타일 */
/* ============================================ */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-content {
  background: white;
  border-radius: 12px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
  min-width: 400px;
  max-width: 500px;
  max-height: 90vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
  background: #f9fafb;
}

.modal-header h3 {
  margin: 0;
  font-size: 17px;
  font-weight: 600;
  color: #1f2937;
}

.modal-close-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.modal-close-btn:hover {
  background: #e5e7eb;
  color: #1f2937;
}

.modal-tabs {
  display: flex;
  border-bottom: 1px solid #e5e7eb;
  background: #f9fafb;
}

.modal-tabs .tab-btn {
  flex: 1;
  padding: 12px 16px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  font-size: 14px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.modal-tabs .tab-btn:hover {
  color: #1f2937;
  background: rgba(0, 0, 0, 0.02);
}

.modal-tabs .tab-btn.active {
  color: #2563eb;
  border-bottom-color: #2563eb;
  font-weight: 500;
}

.modal-body {
  padding: 20px;
  overflow-y: auto;
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 16px 20px;
  border-top: 1px solid #e5e7eb;
  background: #f9fafb;
}

/* 환자 정보 바 */
.patient-info-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: #eff6ff;
  border-radius: 8px;
  margin-bottom: 16px;
}

.patient-info-bar .patient-name {
  font-weight: 600;
  color: #1e40af;
}

.patient-info-bar .patient-chart {
  color: #6b7280;
  font-size: 13px;
}

/* 폼 그룹 */
.form-group {
  margin-bottom: 16px;
}

.form-group label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  margin-bottom: 6px;
}

.form-group input[type="text"],
.form-group input[type="number"],
.form-group input[type="date"],
.form-group select {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  transition: all 0.2s;
}

.form-group input:focus,
.form-group select:focus {
  outline: none;
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.form-row {
  display: flex;
  gap: 12px;
}

.form-group.half {
  flex: 1;
}

/* 패키지/멤버십 선택 행 */
.package-select-row {
  display: flex;
  gap: 10px;
}

.package-select-row select {
  flex: 0 0 140px;
}

.package-select-row .custom-input {
  flex: 1;
}

/* 프리셋 칩 */
.preset-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
}

.preset-chip {
  padding: 5px 10px;
  background: #f3f4f6;
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  font-size: 12px;
  color: #4b5563;
  cursor: pointer;
  transition: all 0.2s;
}

.preset-chip:hover {
  background: #e5e7eb;
}

.preset-chip.active {
  background: #dbeafe;
  border-color: #93c5fd;
  color: #1e40af;
}

/* 라디오 그룹 */
.radio-group {
  display: flex;
  gap: 16px;
}

.radio-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  color: #374151;
  cursor: pointer;
}

.radio-label input[type="radio"] {
  width: 16px;
  height: 16px;
  accent-color: #2563eb;
}

/* 버튼 */
.btn-cancel {
  padding: 10px 20px;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-cancel:hover {
  background: #f3f4f6;
}

.btn-submit {
  padding: 10px 20px;
  background: #2563eb;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-submit:hover {
  background: #1d4ed8;
}

.btn-submit:disabled {
  background: #93c5fd;
  cursor: not-allowed;
}

/* 삭제 버튼 */
.btn-delete {
  padding: 10px 20px;
  background: #fee2e2;
  border: 1px solid #fecaca;
  border-radius: 8px;
  font-size: 14px;
  color: #dc2626;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-delete:hover {
  background: #fecaca;
  border-color: #fca5a5;
}

.btn-delete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 모달 푸터 레이아웃 */
.modal-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-footer .footer-right {
  display: flex;
  gap: 10px;
  margin-left: auto;
}

/* 비활성 입력 */
.disabled-input {
  background: #f3f4f6 !important;
  color: #6b7280 !important;
  cursor: not-allowed;
}

/* 클릭 가능한 태그 */
.grid-tag.clickable {
  cursor: pointer;
  transition: all 0.2s;
}

.grid-tag.clickable:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.grid-tag.pkg.clickable:hover {
  background: #bfdbfe;
}

.grid-tag.membership.clickable:hover {
  background: #fde68a;
}

.grid-tag.dispensing.clickable:hover,
.grid-tag.gift.clickable:hover {
  background: #d1d5db;
}

/* ============================================ */
/* 선결제관리 스타일                           */
/* ============================================ */

.prepaid-management {
  padding: 20px;
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* 헤더 */
.prepaid-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  background: white;
  padding: 12px 16px;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.prepaid-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.prepaid-header-left h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
  color: #1f2937;
}

.prepaid-count {
  font-size: 14px;
  color: #6b7280;
}

.prepaid-header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.prepaid-filter-checkbox {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  color: #6b7280;
  cursor: pointer;
}

.prepaid-filter-checkbox input {
  width: 16px;
  height: 16px;
  accent-color: #2563eb;
}

.prepaid-refresh-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: none;
  border-radius: 8px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.prepaid-refresh-btn:hover {
  background: #e5e7eb;
}

.prepaid-add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.prepaid-add-btn:hover {
  background: #059669;
}

/* 패키지 목록 */
.prepaid-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.prepaid-loading,
.prepaid-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: #9ca3af;
}

.prepaid-empty i {
  font-size: 48px;
  margin-bottom: 12px;
}

/* 패키지 카드 */
.prepaid-card {
  background: white;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.prepaid-card.completed {
  opacity: 0.7;
}

/* 카드 헤더 */
.prepaid-card-header {
  display: grid;
  grid-template-columns: 1fr auto auto auto auto;
  gap: 16px;
  padding: 14px 16px;
  align-items: center;
  cursor: pointer;
  transition: background 0.2s;
}

.prepaid-card-header:hover {
  background: #f9fafb;
}

.prepaid-card-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.prepaid-patient {
  display: flex;
  align-items: baseline;
  gap: 6px;
}

.prepaid-patient-name {
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
}

.prepaid-chart-no {
  font-size: 13px;
  color: #9ca3af;
  font-family: monospace;
}

.prepaid-herbal-name {
  font-size: 14px;
  color: #10b981;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
}

.prepaid-unlinked-badge {
  display: inline-block;
  padding: 1px 6px;
  font-size: 10px;
  font-weight: 600;
  border-radius: 4px;
  background: #FEF3C7;
  color: #92400E;
  border: 1px solid #FDE68A;
}

.prepaid-card-meta {
  display: flex;
  align-items: center;
  gap: 16px;
}

.prepaid-type-badge {
  padding: 4px 10px;
  background: #dbeafe;
  color: #1e40af;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
}

.prepaid-progress {
  display: flex;
  align-items: center;
  gap: 8px;
}

.prepaid-progress-bar {
  width: 80px;
  height: 6px;
  background: #e5e7eb;
  border-radius: 3px;
  overflow: hidden;
}

.prepaid-progress-fill {
  height: 100%;
  background: #10b981;
  border-radius: 3px;
  transition: width 0.3s;
}

.prepaid-progress-text {
  font-size: 13px;
  color: #6b7280;
  font-weight: 500;
}

.prepaid-card-dates {
  display: flex;
  gap: 20px;
}

.prepaid-date-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.prepaid-date-label {
  font-size: 11px;
  color: #9ca3af;
}

.prepaid-date-value {
  font-size: 13px;
  color: #374151;
  font-weight: 500;
}

.prepaid-card-actions {
  display: flex;
  gap: 6px;
}

.prepaid-action-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: none;
  border-radius: 6px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.prepaid-action-btn:hover {
  background: #e5e7eb;
}

.prepaid-action-btn.complete:hover {
  background: #d1fae5;
  color: #059669;
}

.prepaid-action-btn.delete:hover {
  background: #fee2e2;
  color: #dc2626;
}

.prepaid-expand-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: #9ca3af;
  cursor: pointer;
}

/* 카드 상세 */
.prepaid-card-detail {
  background: #f8fafc;
  border-top: 1px solid #e5e7eb;
  padding: 16px;
}

.prepaid-memo {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: #fef3c7;
  border-radius: 8px;
  font-size: 13px;
  color: #92400e;
  margin-bottom: 12px;
}

/* 회차 테이블 */
.prepaid-rounds {
  background: white;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
  overflow: hidden;
}

.prepaid-rounds-header {
  display: grid;
  grid-template-columns: 60px 80px 90px 90px 80px 1fr 100px;
  gap: 8px;
  padding: 10px 12px;
  background: #f9fafb;
  border-bottom: 1px solid #e5e7eb;
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
}

.prepaid-round-row {
  display: grid;
  grid-template-columns: 60px 80px 90px 90px 80px 1fr 100px;
  gap: 8px;
  padding: 10px 12px;
  border-bottom: 1px solid #f3f4f6;
  font-size: 13px;
  align-items: center;
}

.prepaid-round-row:last-child {
  border-bottom: none;
}

.prepaid-round-row.pending {
  background: white;
}

.prepaid-round-row.preparing {
  background: #fffbeb;
}

.prepaid-round-row.delivered {
  background: #eff6ff;
}

.prepaid-round-row.completed {
  background: #f0fdf4;
}

.round-col {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.round-col.round-num {
  font-weight: 600;
  color: #374151;
}

.round-col.round-method {
  color: #6b7280;
}

.round-col.round-scheduled,
.round-col.round-delivered {
  font-family: monospace;
  font-size: 12px;
  color: #6b7280;
}

.round-status-badge {
  display: inline-block;
  padding: 3px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
  color: white;
}

.round-col.round-memo {
  color: #9ca3af;
  font-size: 12px;
}

.round-col.round-actions {
  display: flex;
  gap: 4px;
}

.round-action-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: none;
  border-radius: 6px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 12px;
}

.round-action-btn:hover {
  background: #e5e7eb;
  color: #374151;
}

.round-action-btn.edit:hover {
  background: #dbeafe;
  color: #2563eb;
}

/* 선결 모달 */
.prepaid-modal {
  min-width: 480px;
  max-width: 560px;
}

.prepaid-modal.small {
  min-width: 400px;
  max-width: 480px;
}

.prepaid-modal .modal-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.prepaid-modal .modal-close:hover {
  background: #f3f4f6;
  color: #1f2937;
}

.prepaid-modal .form-group textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  resize: vertical;
  font-family: inherit;
}

.prepaid-modal .form-group textarea:focus {
  outline: none;
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.btn-save {
  padding: 10px 24px;
  background: #10b981;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-save:hover {
  background: #059669;
}

.btn-save:disabled {
  background: #6ee7b7;
  cursor: not-allowed;
}

/* ============================================ */
/* 상담 등록 모달                               */
/* ============================================ */

.consultation-modal {
  min-width: 400px;
  max-width: 480px;
}

.consultation-modal .patient-gender {
  margin-left: auto;
  font-size: 13px;
  color: #6b7280;
}

.consultation-type-btns {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.consultation-type-btn {
  flex: 1;
  min-width: 100px;
  padding: 10px 16px;
  background: #f3f4f6;
  border: 2px solid transparent;
  border-radius: 8px;
  font-size: 14px;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
}

.consultation-type-btn:hover {
  background: #e5e7eb;
}

.consultation-type-btn.active {
  background: #dbeafe;
  border-color: #3b82f6;
  color: #1e40af;
  font-weight: 500;
}

.doctor-select-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.doctor-select-btn {
  padding: 12px 16px;
  background: #f3f4f6;
  border: 2px solid transparent;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
}

.doctor-select-btn:hover {
  background: #e5e7eb;
}

.doctor-select-btn.active {
  background: #dbeafe;
  border-color: #3b82f6;
  color: #1e40af;
}

/* ========================================
   새 레이아웃: 헤더에 메뉴, 왼쪽에 대기환자
   ======================================== */

.cs-app-new {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background: #f3f4f6;
}

/* 상단 헤더 */
.cs-top-header {
  display: flex;
  align-items: center;
  height: 56px;
  padding: 0 20px;
  background: linear-gradient(90deg, #1e3a8a 0%, #1e40af 100%);
  color: white;
  flex-shrink: 0;
  gap: 20px;
}

.cs-top-header-left {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-right: auto; /* 왼쪽에 붙이고 나머지 오른쪽으로 */
}

.cs-logo {
  font-size: 24px;
}

.cs-title {
  font-size: 18px;
  font-weight: 700;
}

/* 헤더 내 메뉴 네비게이션 */
.cs-top-nav {
  display: flex;
  align-items: center;
  gap: 4px;
}

.cs-top-nav-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: #3b82f6;
  border: none;
  border-radius: 8px;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 15px;
  font-weight: 500;
}

.cs-top-nav-item:hover {
  background: #60a5fa;
  color: white;
}

.cs-top-nav-item.active {
  background: #fbbf24;
  color: #1e3a8a;
  font-weight: 700;
}

.cs-top-nav-icon {
  font-size: 16px;
}

.cs-top-nav-label {
  font-size: 15px;
}

.cs-top-header-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

.cs-user-info {
  font-size: 14px;
  color: rgba(255, 255, 255, 0.8);
}

.cs-close-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 6px;
  color: white;
  font-size: 18px;
  cursor: pointer;
  transition: all 0.2s;
}

.cs-close-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* 메인 바디 (대기환자 패널 + 콘텐츠) */
.cs-body {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* 왼쪽 대기환자 패널 */
.cs-waiting-panel {
  width: 220px;
  background: #f8fafc;
  color: #1e293b;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  border-right: 1px solid #e2e8f0;
}

.cs-waiting-panel .cs-waiting-header {
  padding: 16px;
  background: #1e40af;
  color: white;
}

.cs-waiting-panel .cs-waiting-title {
  color: white;
}

.cs-waiting-panel .cs-waiting-count {
  background: #fbbf24;
  color: #1e3a8a;
}

.cs-waiting-panel .cs-waiting-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.cs-waiting-panel .cs-waiting-item {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  margin-bottom: 6px;
  padding: 10px 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.cs-waiting-panel .cs-waiting-item:hover {
  background: #eff6ff;
  border-color: #3b82f6;
}

.cs-waiting-panel .cs-waiting-item.long {
  border-left: 3px solid #f97316;
}

.cs-waiting-panel .cs-waiting-item.very-long {
  border-left: 3px solid #ef4444;
}

.cs-waiting-panel .cs-waiting-name {
  font-size: 15px;
  font-weight: 700;
  color: #1e293b;
}

.cs-waiting-panel .cs-waiting-info {
  font-size: 12px;
  color: #64748b;
}

.cs-waiting-panel .cs-waiting-time {
  font-size: 12px;
  color: #3b82f6;
  font-weight: 600;
}

.cs-waiting-panel .cs-waiting-time.long {
  color: #f97316;
}

.cs-waiting-panel .cs-waiting-time.very-long {
  color: #ef4444;
}

.cs-waiting-panel .cs-waiting-doctor {
  font-size: 12px;
  color: #1e40af;
  background: #dbeafe;
  padding: 2px 6px;
  border-radius: 4px;
}

.cs-waiting-panel .cs-waiting-status-text {
  font-size: 11px;
  color: #f59e0b;
  font-weight: 500;
}

.cs-waiting-panel .cs-waiting-empty {
  text-align: center;
  padding: 20px;
  color: #94a3b8;
  font-size: 14px;
}

/* 오른쪽 메인 콘텐츠 */
.cs-main-new {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  position: relative;
}

.cs-main-new .cs-content {
  flex: 1;
  overflow: hidden;
  padding: 5px;
  display: flex;
  flex-direction: column;
}

/* 헤더 내 폰트 스케일 컨트롤 조정 */
.cs-top-header .font-scale-controls {
  display: flex;
  align-items: center;
  gap: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  padding: 4px;
}

.cs-top-header .font-scale-btn {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.cs-top-header .font-scale-btn:hover:not(:disabled) {
  background: rgba(255, 255, 255, 0.15);
}

.cs-top-header .font-scale-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.cs-top-header .font-scale-value {
  min-width: 45px;
  text-align: center;
  font-size: 13px;
  color: rgba(255, 255, 255, 0.9);
  cursor: pointer;
}

/* ====== 상담대기/상담완료 섹션 (CSSidebar) ====== */

/* 섹션 컨테이너 */
.cs-section {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.cs-section-completed {
  flex: 0.8;
  border-top: 1px solid #e2e8f0;
}

/* 섹션 헤더 */
.cs-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: #0ea5e9;
  color: white;
  flex-shrink: 0;
}

.cs-section-completed .cs-section-header {
  background: #059669;
}

.cs-section-title {
  font-size: 13px;
  font-weight: 700;
}

.cs-section-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  background: white;
  color: #0284c7;
  border-radius: 10px;
  font-size: 12px;
  font-weight: 700;
}

.cs-section-completed .cs-section-count {
  background: #a7f3d0;
  color: #065f46;
}

.cs-connection-status {
  margin-left: auto;
  font-size: 10px;
  color: rgba(255, 255, 255, 0.4);
}

.cs-connection-status.connected {
  color: #4ade80;
}

/* 환자 목록 */
.cs-patient-list {
  flex: 1;
  list-style: none;
  margin: 0;
  padding: 8px;
  overflow-y: auto;
}

.cs-patient-empty {
  text-align: center;
  padding: 20px 12px;
  color: #94a3b8;
  font-size: 13px;
}

/* 환자 항목 */
.cs-patient-item {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 10px 12px;
  margin-bottom: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.cs-patient-item:hover {
  background: #eff6ff;
  border-color: #3b82f6;
}

.cs-patient-item.long {
  border-left: 3px solid #f97316;
}

.cs-patient-item.very-long {
  border-left: 3px solid #ef4444;
}

/* 상담중 항목 */
.cs-patient-item.consulting {
  background: #fef2f2;
  border-color: #fecaca;
}

/* 완료 항목 */
.cs-patient-item.done {
  background: #f0fdf4;
  border-color: #bbf7d0;
}

.cs-patient-item.done:hover {
  background: #dcfce7;
  border-color: #86efac;
}

/* 환자 정보 행 */
.cs-patient-row {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.cs-patient-name {
  font-size: 15px;
  font-weight: 700;
  color: #1e293b;
}

.cs-patient-info {
  font-size: 12px;
  color: #64748b;
}

.cs-patient-time {
  margin-left: auto;
  font-size: 12px;
  color: #3b82f6;
  font-weight: 600;
}

.cs-patient-time.long {
  color: #f97316;
}

.cs-patient-time.very-long {
  color: #ef4444;
}

/* 상담중 인디케이터 (붉은 점 + 펄스) */
.cs-consulting-indicator {
  width: 10px;
  height: 10px;
  background: #ef4444;
  border-radius: 50%;
  animation: pulse-consulting 1.5s ease-in-out infinite;
}

@keyframes pulse-consulting {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
  }
  50% {
    opacity: 0.8;
    box-shadow: 0 0 0 6px rgba(239, 68, 68, 0);
  }
}

/* 완료 인디케이터 */
.cs-completed-indicator {
  color: #10b981;
  font-size: 14px;
  font-weight: 700;
}

/* 액팅 정보 */
.cs-patient-acting {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
}

.cs-acting-type {
  font-size: 12px;
  color: #1e40af;
  background: #dbeafe;
  padding: 2px 8px;
  border-radius: 4px;
}

.cs-acting-doctor {
  font-size: 12px;
  color: #6366f1;
  font-weight: 500;
}

/* ====== 우클릭 컨텍스트 메뉴 ====== */

.cs-context-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
}

.cs-context-menu {
  position: fixed;
  z-index: 1000;
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  padding: 4px;
  min-width: 160px;
}

.cs-context-menu-item {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: transparent;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  color: #374151;
  transition: all 0.15s;
}

.cs-context-menu-item:hover {
  background: #eff6ff;
  color: #1e40af;
}

.cs-context-menu-item.cs-context-danger {
  color: #dc2626;
}

.cs-context-menu-item.cs-context-danger:hover {
  background: #fef2f2;
  color: #b91c1c;
}

.cs-context-icon {
  font-size: 16px;
}

/* ====== 상담 유형 그리드 (5가지) ====== */

.consultation-type-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.consultation-type-grid .consultation-type-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 12px 8px;
}

.consultation-type-grid .type-icon {
  font-size: 20px;
}

.consultation-type-grid .type-label {
  font-size: 13px;
}

/* 액팅 배정 모달 스타일 조정 */
.acting-assign-modal {
  max-width: 450px;
}

.acting-assign-modal .consultation-type-btn.active {
  background: #1e40af;
  color: white;
  border-color: #1e40af;
}

/* ====== 치료 프로그램 어드민 ====== */

.treatment-admin {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  max-width: 800px;
  margin: 0 auto;
}

.treatment-admin-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: #1e40af;
  color: white;
}

.treatment-admin-header h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 700;
}

.treatment-admin-close {
  background: transparent;
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
  opacity: 0.8;
}

.treatment-admin-close:hover {
  opacity: 1;
}

.treatment-admin-tabs {
  display: flex;
  background: #f1f5f9;
  border-bottom: 1px solid #e2e8f0;
}

.treatment-admin-tab {
  flex: 1;
  padding: 12px 16px;
  background: transparent;
  border: none;
  font-size: 14px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  transition: all 0.2s;
}

.treatment-admin-tab:hover {
  background: #e2e8f0;
}

.treatment-admin-tab.active {
  background: white;
  color: #1e40af;
  font-weight: 600;
}

.treatment-admin-content {
  padding: 20px;
}

.treatment-admin-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.treatment-admin-form {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.treatment-admin-form input,
.treatment-admin-form select {
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
}

.treatment-admin-form input:focus,
.treatment-admin-form select:focus {
  outline: none;
  border-color: #3b82f6;
}

.treatment-admin-form button {
  padding: 8px 16px;
  background: #1e40af;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: background 0.2s;
}

.treatment-admin-form button:hover {
  background: #1e3a8a;
}

.treatment-admin-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.treatment-admin-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
}

.treatment-admin-item .item-icon {
  font-size: 20px;
}

.treatment-admin-item .item-category {
  font-size: 12px;
  color: #64748b;
  background: #e2e8f0;
  padding: 2px 8px;
  border-radius: 4px;
}

.treatment-admin-item .item-name {
  font-weight: 600;
  color: #1e293b;
}

.treatment-admin-item .item-meta {
  color: #64748b;
  font-size: 13px;
  margin-left: auto;
}

.treatment-admin-item .item-delete {
  padding: 4px 10px;
  background: #fee2e2;
  color: #dc2626;
  border: none;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
}

.treatment-admin-item .item-delete:hover {
  background: #fecaca;
}

.treatment-admin-loading {
  text-align: center;
  padding: 40px;
  color: #64748b;
}

/* ====== 프로그램 등록 모달 ====== */

.program-modal {
  max-width: 500px;
}

.program-modal-loading {
  text-align: center;
  padding: 40px;
  color: #64748b;
}

.program-modal .patient-acting-info {
  font-size: 12px;
  color: #6366f1;
  background: #eef2ff;
  padding: 2px 8px;
  border-radius: 4px;
  margin-left: auto;
}

/* 프로그램 카테고리 그리드 */
.program-category-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
}

.program-category-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 16px 12px;
  background: #f8fafc;
  border: 2px solid #e2e8f0;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.program-category-btn:hover {
  background: #eff6ff;
  border-color: #93c5fd;
}

.program-category-btn.active {
  background: #1e40af;
  border-color: #1e40af;
  color: white;
}

.program-category-btn .category-icon {
  font-size: 24px;
}

.program-category-btn .category-name {
  font-size: 14px;
  font-weight: 600;
}

/* 수량 컨트롤 */
.unit-count-control {
  display: flex;
  align-items: center;
  gap: 12px;
}

.unit-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f1f5f9;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.unit-btn:hover:not(:disabled) {
  background: #e2e8f0;
}

.unit-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.unit-value {
  font-size: 24px;
  font-weight: 700;
  min-width: 40px;
  text-align: center;
  color: #1e40af;
}

.unit-label {
  font-size: 16px;
  color: #64748b;
}

/* 등급 선택 그리드 */
.grade-select-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

.grade-select-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px 8px;
  background: #f8fafc;
  border: 2px solid #e2e8f0;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.grade-select-btn:hover {
  background: #eff6ff;
  border-color: #93c5fd;
}

.grade-select-btn.active {
  background: #059669;
  border-color: #059669;
  color: white;
}

.grade-select-btn .grade-name {
  font-size: 15px;
  font-weight: 700;
}

.grade-select-btn .grade-desc {
  font-size: 11px;
  opacity: 0.8;
}

/* 추가옵션 선택 그리드 */
.addon-select-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.addon-select-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: #f8fafc;
  border: 2px solid #e2e8f0;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.2s;
}

.addon-select-btn:hover {
  background: #fef2f2;
  border-color: #fca5a5;
}

.addon-select-btn.active {
  background: #dc2626;
  border-color: #dc2626;
  color: white;
}

.addon-select-btn .addon-name {
  font-size: 13px;
  font-weight: 600;
}

.addon-select-btn .addon-price {
  font-size: 11px;
  opacity: 0.8;
}

/* 프로그램 등록 폼 */
.program-modal .form-group textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  resize: vertical;
}

.program-modal .form-group textarea:focus {
  outline: none;
  border-color: #3b82f6;
}

/* ===== 프로그램 관리 뷰 (ProgramManagementView) ===== */
.program-management {
  padding: 20px;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.program-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  flex-wrap: wrap;
  gap: 12px;
}

.program-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.program-header-left h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 700;
  color: #1f2937;
}

.program-count {
  background: #e0e7ff;
  color: #4338ca;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 13px;
  font-weight: 600;
}

.program-header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.program-search {
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  width: 200px;
}

.program-search:focus {
  outline: none;
  border-color: #3b82f6;
}

.program-filter-checkbox {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #6b7280;
  cursor: pointer;
}

.program-refresh-btn {
  padding: 8px 12px;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  cursor: pointer;
  color: #374151;
}

.program-refresh-btn:hover {
  background: #e5e7eb;
}

.program-list {
  flex: 1;
  overflow-y: auto;
}

.program-loading,
.program-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: #9ca3af;
  gap: 12px;
}

.program-empty i {
  font-size: 48px;
}

.program-card {
  background: white;
  border-radius: 12px;
  margin-bottom: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.program-card.completed {
  opacity: 0.7;
  background: #f9fafb;
}

.program-card-header {
  display: flex;
  align-items: center;
  padding: 16px;
  gap: 16px;
  cursor: pointer;
  transition: background 0.2s;
}

.program-card-header:hover {
  background: #f9fafb;
}

.program-card-info {
  flex: 1;
  min-width: 0;
}

.program-patient {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.program-patient-name {
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
}

.program-chart-no {
  font-size: 13px;
  color: #6b7280;
}

.program-category {
  display: flex;
  align-items: center;
  gap: 6px;
}

.program-category-icon {
  font-size: 16px;
}

.program-category-name {
  font-size: 14px;
  color: #4b5563;
}

.program-grade {
  background: #dbeafe;
  color: #1d4ed8;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 12px;
}

.program-card-meta {
  width: 150px;
}

.program-progress {
  display: flex;
  align-items: center;
  gap: 10px;
}

.program-progress-bar {
  flex: 1;
  height: 8px;
  background: #e5e7eb;
  border-radius: 4px;
  overflow: hidden;
}

.program-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #10b981, #34d399);
  border-radius: 4px;
  transition: width 0.3s;
}

.program-progress-text {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  white-space: nowrap;
}

.program-card-dates {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 100px;
}

.program-date-item {
  display: flex;
  gap: 6px;
  font-size: 12px;
}

.program-date-label {
  color: #9ca3af;
}

.program-date-value {
  color: #4b5563;
  font-weight: 500;
}

.program-card-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.program-action-btn {
  width: 32px;
  height: 32px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

.program-action-btn.use {
  background: #dbeafe;
  color: #2563eb;
}

.program-action-btn.use:hover {
  background: #bfdbfe;
}

.program-action-btn.complete {
  background: #d1fae5;
  color: #059669;
}

.program-action-btn.complete:hover {
  background: #a7f3d0;
}

.program-expand-btn {
  background: transparent;
  border: none;
  color: #9ca3af;
  cursor: pointer;
  padding: 4px;
}

.program-card-detail {
  padding: 0 16px 16px;
  border-top: 1px solid #f3f4f6;
}

.program-addons {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 0;
  flex-wrap: wrap;
}

.program-addons-label {
  font-size: 13px;
  color: #6b7280;
}

.program-addon-badge {
  background: #fef3c7;
  color: #92400e;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
}

.program-memo {
  padding: 10px 12px;
  background: #fffbeb;
  border-radius: 8px;
  font-size: 13px;
  color: #92400e;
  margin-bottom: 12px;
}

.program-usage-section {
  margin-top: 12px;
}

.program-usage-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
  font-size: 14px;
  font-weight: 600;
  color: #374151;
}

.program-add-usage-btn {
  padding: 6px 12px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 4px;
}

.program-add-usage-btn:hover {
  background: #2563eb;
}

.program-usage-list {
  background: #f9fafb;
  border-radius: 8px;
  overflow: hidden;
}

.program-usage-empty {
  padding: 20px;
  text-align: center;
  color: #9ca3af;
  font-size: 13px;
}

.program-usage-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-bottom: 1px solid #e5e7eb;
  font-size: 13px;
}

.program-usage-item:last-child {
  border-bottom: none;
}

.usage-date {
  font-weight: 600;
  color: #1f2937;
}

.usage-count {
  color: #059669;
  font-weight: 600;
}

.usage-doctor {
  color: #6b7280;
}

.usage-memo {
  color: #9ca3af;
  flex: 1;
  text-align: right;
}

/* 사용 기록 추가 모달 */
.program-usage-modal .patient-info-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: #f3f4f6;
  border-radius: 8px;
  margin-bottom: 16px;
}

.program-usage-modal .program-info {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #4b5563;
}

.program-usage-modal .remaining {
  background: #dbeafe;
  color: #1d4ed8;
  padding: 2px 8px;
  border-radius: 4px;
  font-weight: 600;
}

/* ===== 환자별 프로그램 관리 모달 (PatientProgramModal) ===== */
.patient-program-modal {
  width: 600px;
  max-width: 95vw;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
}

.patient-program-modal .modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
}

/* 목록 뷰 */
.program-list-view {
  min-height: 200px;
}

.program-list-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  font-size: 14px;
  color: #4b5563;
}

.btn-add-program {
  padding: 8px 14px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
}

.btn-add-program:hover {
  background: #2563eb;
}

.loading-text,
.empty-text {
  text-align: center;
  padding: 40px;
  color: #9ca3af;
  font-size: 14px;
}

.program-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.program-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: #f9fafb;
  border-radius: 10px;
  border: 1px solid #e5e7eb;
}

.program-item.completed {
  opacity: 0.6;
  background: #f3f4f6;
}

.program-item-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.program-item-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.program-item-info .program-icon {
  font-size: 18px;
}

.program-item-info .program-name {
  font-weight: 600;
  color: #1f2937;
}

.program-grade-badge {
  background: #dbeafe;
  color: #1d4ed8;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 11px;
}

.program-addons-count {
  background: #fef3c7;
  color: #92400e;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 11px;
}

.program-item-progress {
  display: flex;
  align-items: center;
  gap: 10px;
}

.program-item-progress .progress-bar {
  width: 100px;
  height: 6px;
  background: #e5e7eb;
  border-radius: 3px;
  overflow: hidden;
}

.program-item-progress .progress-fill {
  height: 100%;
  background: #10b981;
  border-radius: 3px;
}

.program-item-progress .progress-text {
  font-size: 12px;
  color: #6b7280;
}

.program-item-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.program-item-actions .btn-usage,
.program-item-actions .btn-complete {
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.program-item-actions .btn-usage {
  background: #dbeafe;
  color: #2563eb;
}

.program-item-actions .btn-usage:hover {
  background: #bfdbfe;
}

.program-item-actions .btn-complete {
  background: #d1fae5;
  color: #059669;
}

.program-item-actions .btn-complete:hover {
  background: #a7f3d0;
}

.program-item-actions .status-badge.completed {
  background: #d1d5db;
  color: #6b7280;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 12px;
}

/* 등록 뷰 (program-add-view) - 기존 스타일 재사용 */

/* 사용 기록 뷰 */
.program-usage-view {
  min-height: 200px;
}

.usage-program-info {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: #f3f4f6;
  border-radius: 8px;
  margin-bottom: 16px;
}

.usage-program-info .program-icon {
  font-size: 20px;
}

.usage-program-info .program-name {
  font-weight: 600;
  color: #1f2937;
}

.usage-program-info .program-remaining {
  margin-left: auto;
  background: #dbeafe;
  color: #1d4ed8;
  padding: 4px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
}

.usage-add-form {
  background: #f9fafb;
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 20px;
}

.usage-add-form .form-row {
  display: flex;
  gap: 12px;
  margin-bottom: 12px;
}

.usage-add-form .form-group {
  flex: 1;
}

.usage-add-form .form-group label {
  display: block;
  font-size: 12px;
  color: #6b7280;
  margin-bottom: 4px;
}

.usage-add-form .form-group input {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
}

.usage-add-form .form-group input:focus {
  outline: none;
  border-color: #3b82f6;
}

.btn-add-usage {
  width: 100%;
  padding: 10px;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  margin-top: 8px;
}

.btn-add-usage:hover {
  background: #059669;
}

.btn-add-usage:disabled {
  background: #9ca3af;
  cursor: not-allowed;
}

.usage-records h4 {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 10px;
}

.usage-records-list {
  background: white;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
  overflow: hidden;
}

.usage-record-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-bottom: 1px solid #f3f4f6;
  font-size: 13px;
}

.usage-record-item:last-child {
  border-bottom: none;
}

.usage-record-item .usage-date {
  font-weight: 600;
  color: #1f2937;
  min-width: 90px;
}

.usage-record-item .usage-count {
  color: #10b981;
  font-weight: 600;
}

.usage-record-item .usage-doctor {
  color: #6b7280;
}

.usage-record-item .usage-memo {
  color: #9ca3af;
  flex: 1;
  text-align: right;
}

/* ============================================ */
/* 비급여관리 타임라인 (NonCoveredManagementView) */
/* ============================================ */

.noncovered-management {
  padding: 0px 5px 5px;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  min-height: 0;
}

.noncovered-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  flex-wrap: wrap;
  gap: 12px;
  background: white;
  padding: 16px 20px;
  border-radius: 12px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.noncovered-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.noncovered-header-left h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 700;
  color: #1f2937;
}

.noncovered-count {
  background: #e0e7ff;
  color: #4338ca;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 13px;
  font-weight: 600;
}

.noncovered-header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.noncovered-search {
  padding: 8px 14px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  width: 180px;
}

.noncovered-search:focus {
  outline: none;
  border-color: #3b82f6;
}

.noncovered-filter {
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  background: white;
}

.noncovered-add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.noncovered-add-btn:hover {
  background: #059669;
}

.noncovered-refresh-btn {
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  cursor: pointer;
  color: #374151;
}

.noncovered-refresh-btn:hover {
  background: #e5e7eb;
}

/* 타임라인 컨테이너 */
.timeline-container {
  flex: 1;
  overflow-y: auto;
  padding-right: 4px;
}

.timeline-loading,
.timeline-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: #9ca3af;
  gap: 12px;
}

.timeline-empty i {
  font-size: 48px;
}

/* 날짜별 그룹 */
.timeline-date-group {
  margin-bottom: 24px;
}

.timeline-date-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 2px solid #e5e7eb;
}

.timeline-date {
  font-size: 16px;
  font-weight: 700;
  color: #1f2937;
}

.timeline-date-full {
  font-size: 13px;
  color: #9ca3af;
}

/* 타임라인 이벤트 목록 */
.timeline-events {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-left: 20px;
  border-left: 3px solid #e5e7eb;
  margin-left: 10px;
}

/* 타임라인 이벤트 항목 */
.timeline-event {
  display: flex;
  gap: 16px;
  position: relative;
  background: white;
  border-radius: 10px;
  padding: 14px 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  border-left: 4px solid var(--event-color, #64748b);
  margin-left: -23px;
}

.timeline-event-dot {
  position: absolute;
  left: -35px;
  top: 16px;
  width: 24px;
  height: 24px;
  background: white;
  border: 3px solid var(--event-color, #64748b);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.timeline-event-icon {
  font-size: 12px;
}

.timeline-event-content {
  flex: 1;
  min-width: 0;
}

.timeline-event-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
  flex-wrap: wrap;
}

.timeline-event-time {
  font-size: 13px;
  font-weight: 600;
  color: #6b7280;
  min-width: 50px;
}

.timeline-event-patient {
  font-size: 15px;
  font-weight: 600;
  color: #1f2937;
}

.timeline-event-chart {
  font-size: 13px;
  color: #9ca3af;
  font-weight: 400;
  margin-left: 4px;
}

.timeline-event-type-badge {
  padding: 3px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  color: white;
}

.timeline-event-program {
  font-size: 13px;
  color: #10b981;
  margin-bottom: 4px;
}

.timeline-event-body {
  font-size: 14px;
  color: #4b5563;
  line-height: 1.5;
}

.timeline-event-result {
  font-size: 13px;
  color: #0369a1;
  margin-top: 4px;
  padding-left: 10px;
  border-left: 2px solid #0ea5e9;
}

.result-label {
  font-weight: 600;
}

.timeline-event-footer {
  font-size: 12px;
  color: #9ca3af;
  margin-top: 6px;
}

/* 이벤트 추가 모달 */
.add-event-modal {
  width: 500px;
  max-width: 95vw;
}

.add-event-modal .form-group textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  resize: vertical;
  min-height: 80px;
  font-family: inherit;
}

.add-event-modal .form-group textarea:focus {
  outline: none;
  border-color: #3b82f6;
}

.add-event-modal .form-group input[type="time"] {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
}

/* 환자 검색 */
.patient-search-wrapper {
  position: relative;
}

.patient-search-wrapper input {
  width: 100%;
}

.patient-search-results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 10;
  max-height: 200px;
  overflow-y: auto;
}

.patient-search-item {
  width: 100%;
  padding: 10px 14px;
  background: transparent;
  border: none;
  text-align: left;
  font-size: 14px;
  cursor: pointer;
}

.patient-search-item:hover {
  background: #f3f4f6;
}

.selected-patient-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: #eff6ff;
  border-radius: 8px;
}

.selected-patient-name {
  font-weight: 600;
  color: #1e40af;
}

.selected-patient-chart {
  color: #6b7280;
}

.clear-patient-btn {
  margin-left: auto;
  width: 24px;
  height: 24px;
  background: #e5e7eb;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  color: #6b7280;
  font-size: 14px;
}

.clear-patient-btn:hover {
  background: #d1d5db;
}

/* 이벤트 유형 그리드 */
.event-type-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
}

.event-type-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 12px 8px;
  background: #f8fafc;
  border: 2px solid #e2e8f0;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.event-type-btn:hover {
  background: #f1f5f9;
  border-color: var(--type-color, #64748b);
}

.event-type-btn.active {
  background: var(--type-color, #64748b);
  border-color: var(--type-color, #64748b);
  color: white;
}

.event-type-btn .type-icon {
  font-size: 18px;
}

.event-type-btn .type-label {
  font-size: 12px;
  font-weight: 500;
}

/* 프로그램 선택 그리드 */
.program-select-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.program-select-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 14px;
  background: #f8fafc;
  border: 2px solid #e2e8f0;
  border-radius: 8px;
  cursor: pointer;
  font-size: 13px;
  transition: all 0.2s;
}

.program-select-btn:hover {
  background: #eff6ff;
  border-color: #93c5fd;
}

.program-select-btn.active {
  background: #1e40af;
  border-color: #1e40af;
  color: white;
}

.program-select-btn .usage-info {
  font-size: 11px;
  opacity: 0.8;
}

/* ============================================ */
/* 환자별 타임라인 모달 (PatientTimelineModal)   */
/* ============================================ */

.patient-timeline-modal {
  width: 650px;
  max-width: 95vw;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
}

.patient-timeline-header-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.patient-timeline-header-info h3 {
  margin: 0;
  font-size: 17px;
  font-weight: 600;
  color: #1f2937;
}

.patient-timeline-patient {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
}

.patient-timeline-patient .patient-name {
  font-weight: 600;
  color: #1e40af;
}

.patient-timeline-patient .patient-chart {
  color: #6b7280;
}

.patient-timeline-patient .patient-demo {
  color: #9ca3af;
}

/* 탭 메뉴 */
.patient-timeline-tabs {
  display: flex;
  background: #f1f5f9;
  border-bottom: 1px solid #e2e8f0;
}

.timeline-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 12px 16px;
  background: transparent;
  border: none;
  border-bottom: 3px solid transparent;
  font-size: 14px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  transition: all 0.2s;
}

.timeline-tab:hover {
  background: #e2e8f0;
  color: #1e293b;
}

.timeline-tab.active {
  background: white;
  color: #1e40af;
  border-bottom-color: #1e40af;
  font-weight: 600;
}

.patient-timeline-body {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
}

/* 진행 중인 프로그램 요약 */
.patient-programs-summary {
  margin-bottom: 20px;
  padding: 12px 16px;
  background: #f0fdf4;
  border: 1px solid #bbf7d0;
  border-radius: 10px;
}

.patient-programs-summary h4 {
  margin: 0 0 10px 0;
  font-size: 13px;
  font-weight: 600;
  color: #166534;
}

.programs-summary-list {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.program-summary-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: white;
  border-radius: 8px;
  font-size: 13px;
}

.program-summary-item .program-icon {
  font-size: 16px;
}

.program-summary-item .program-name {
  font-weight: 500;
  color: #1f2937;
}

.program-summary-item .program-progress {
  color: #059669;
  font-weight: 600;
}

/* 환자별 타임라인 리스트 */
.patient-timeline-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.patient-timeline-item {
  display: flex;
  gap: 14px;
  padding: 14px 16px;
  background: #f9fafb;
  border-radius: 10px;
  border-left: 4px solid var(--event-color, #64748b);
}

.timeline-item-dot {
  width: 32px;
  height: 32px;
  background: white;
  border: 2px solid var(--event-color, #64748b);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.timeline-item-dot span {
  font-size: 16px;
}

.timeline-item-content {
  flex: 1;
  min-width: 0;
}

.timeline-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
  flex-wrap: wrap;
}

.timeline-item-date {
  font-size: 15px;
  font-weight: 600;
  color: #374151;
}

.timeline-item-time {
  font-size: 14px;
  color: #9ca3af;
}

.timeline-item-type {
  padding: 3px 10px;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 600;
  color: white;
}

.timeline-item-program {
  font-size: 14px;
  color: #10b981;
  margin-bottom: 4px;
}

.timeline-item-body {
  font-size: 15px;
  color: #4b5563;
  line-height: 1.5;
}

.timeline-item-result {
  font-size: 14px;
  color: #0369a1;
  margin-top: 6px;
}

.timeline-item-by {
  font-size: 13px;
  color: #9ca3af;
  margin-top: 6px;
}

/* 프로그램/이벤트 등록 폼 */
.program-add-form,
.event-add-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding-top: 12px;
  border-top: 1px solid #e5e7eb;
  margin-top: 8px;
}

/* 카테고리 선택 그리드 */
.category-select-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
}

.category-select-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 16px 8px;
  background: #f8fafc;
  border: 2px solid #e2e8f0;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.2s;
}

.category-select-btn:hover {
  background: #eff6ff;
  border-color: #93c5fd;
}

.category-select-btn.active {
  background: #1e40af;
  border-color: #1e40af;
  color: white;
}

.category-select-btn .cat-icon {
  font-size: 22px;
}

.category-select-btn .cat-name {
  font-size: 13px;
  font-weight: 600;
}

/* ===== 인라인 메모 에디터 ===== */
.inline-memo-editor {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 120px;
}

.memo-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  align-items: center;
}

.memo-tag {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s;
}

.memo-tag:hover {
  filter: brightness(0.95);
}

.memo-tag .memo-icon {
  font-size: 10px;
}

.memo-tag .memo-content {
  max-width: 70px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.memo-tag .memo-delete-btn {
  opacity: 0;
  background: none;
  border: none;
  padding: 0 2px;
  cursor: pointer;
  color: inherit;
  font-size: 10px;
  transition: opacity 0.15s;
}

.memo-tag:hover .memo-delete-btn {
  opacity: 0.6;
}

.memo-tag .memo-delete-btn:hover {
  opacity: 1;
  color: #dc2626;
}

/* 메모 타입별 색상 */
.memo-tag.package {
  background: #f3e8ff;
  color: #7c3aed;
}

.memo-tag.membership {
  background: #dbeafe;
  color: #2563eb;
}

.memo-tag.event {
  background: #fce7f3;
  color: #db2777;
}

.memo-tag.point {
  background: #fef3c7;
  color: #d97706;
}

.memo-tag.refund {
  background: #fee2e2;
  color: #dc2626;
}

.memo-tag.other {
  background: #f3f4f6;
  color: #4b5563;
}

/* 메모 추가 버튼 */
.memo-add-btn {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  padding: 2px 6px;
  border: 1px dashed #d1d5db;
  border-radius: 4px;
  background: transparent;
  color: #9ca3af;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s;
}

.memo-add-btn:hover {
  border-color: #3b82f6;
  color: #3b82f6;
  background: #eff6ff;
}

.memo-add-btn i {
  font-size: 9px;
}

/* 메모 추가 폼 */
.memo-add-form {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 2px;
}

.memo-type-select {
  padding: 3px 4px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 11px;
  background: white;
  cursor: pointer;
  max-width: 90px;
}

.memo-type-select:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 1px #3b82f6;
}

.memo-content-input {
  flex: 1;
  min-width: 60px;
  padding: 3px 6px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 11px;
}

.memo-content-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 1px #3b82f6;
}

.memo-submit-btn {
  padding: 3px 8px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
  transition: background 0.15s;
}

.memo-submit-btn:hover:not(:disabled) {
  background: #2563eb;
}

.memo-submit-btn:disabled {
  background: #d1d5db;
  cursor: not-allowed;
}

.memo-cancel-btn {
  padding: 3px 6px;
  background: transparent;
  border: none;
  color: #6b7280;
  cursor: pointer;
  font-size: 11px;
}

.memo-cancel-btn:hover {
  color: #374151;
}

/* 메모 수정 폼 */
.memo-edit-form {
  display: flex;
  align-items: center;
  gap: 4px;
  width: 100%;
}

.memo-type-icon {
  font-size: 10px;
}

.memo-edit-input {
  flex: 1;
  padding: 2px 6px;
  border: 1px solid #3b82f6;
  border-radius: 4px;
  font-size: 11px;
}

.memo-edit-input:focus {
  outline: none;
  box-shadow: 0 0 0 1px #3b82f6;
}

/* ===== 수납 메모 모달 ===== */
.receipt-memo-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.receipt-memo-modal {
  background: white;
  border-radius: 12px;
  width: 700px;
  max-width: 95vw;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.receipt-memo-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
  background: #f8fafc;
  border-radius: 12px 12px 0 0;
}

.receipt-memo-modal-header .patient-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.receipt-memo-modal-header .patient-name {
  font-size: 18px;
  font-weight: 700;
  color: #1e293b;
}

.receipt-memo-modal-header .chart-no {
  font-size: 14px;
  color: #64748b;
}

.receipt-memo-modal-header .close-btn {
  background: none;
  border: none;
  font-size: 20px;
  color: #64748b;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.15s;
}

.receipt-memo-modal-header .close-btn:hover {
  background: #e2e8f0;
  color: #1e293b;
}

.receipt-memo-modal-body {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* 세로 탭 */
.memo-tabs {
  width: 100px;
  background: #f1f5f9;
  border-right: 1px solid #e2e8f0;
  display: flex;
  flex-direction: column;
  padding: 8px 0;
}

.memo-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 14px 8px;
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all 0.15s;
  border-left: 3px solid transparent;
}

.memo-tab:hover {
  background: #e2e8f0;
}

.memo-tab.active {
  background: white;
  border-left-color: #3b82f6;
}

.memo-tab .tab-icon {
  font-size: 20px;
}

.memo-tab .tab-label {
  font-size: 12px;
  font-weight: 600;
  color: #64748b;
}

.memo-tab.active .tab-label {
  color: #3b82f6;
}

/* 탭 내용 */
.memo-tab-content {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

.memo-tab-content .loading-state,
.memo-tab-content .empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px;
  color: #94a3b8;
  gap: 12px;
}

.memo-tab-content .empty-state i {
  font-size: 40px;
}

.memo-tab-content .empty-state p {
  font-size: 14px;
}

/* 공통 폼 스타일 */
.memo-tab-content .add-form {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 16px;
  margin-top: 16px;
}

.memo-tab-content .add-form .form-title {
  font-size: 14px;
  font-weight: 600;
  color: #1e293b;
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px solid #e2e8f0;
}

.memo-tab-content .form-row {
  display: flex;
  gap: 12px;
}

.memo-tab-content .form-group {
  flex: 1;
  margin-bottom: 12px;
}

.memo-tab-content .form-group label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: #64748b;
  margin-bottom: 4px;
}

.memo-tab-content .form-group input,
.memo-tab-content .form-group textarea,
.memo-tab-content .form-group select {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
}

.memo-tab-content .form-group input:focus,
.memo-tab-content .form-group textarea:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}

.memo-tab-content .form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 12px;
}

.memo-tab-content .cancel-btn {
  padding: 8px 16px;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
}

.memo-tab-content .cancel-btn:hover {
  background: #f3f4f6;
}

.memo-tab-content .submit-btn {
  padding: 8px 16px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

.memo-tab-content .submit-btn:hover:not(:disabled) {
  background: #2563eb;
}

.memo-tab-content .submit-btn:disabled {
  background: #94a3b8;
  cursor: not-allowed;
}

.memo-tab-content .add-btn {
  width: 100%;
  padding: 12px;
  background: white;
  border: 2px dashed #d1d5db;
  border-radius: 8px;
  font-size: 13px;
  color: #64748b;
  cursor: pointer;
  margin-top: 16px;
  transition: all 0.15s;
}

.memo-tab-content .add-btn:hover {
  border-color: #3b82f6;
  color: #3b82f6;
  background: #eff6ff;
}

/* 패키지 탭 */
.package-tab .package-cards {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.package-card {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  overflow: hidden;
}

.package-card.completed {
  opacity: 0.6;
}

.package-card .card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  background: #f8fafc;
  border-bottom: 1px solid #e2e8f0;
}

.package-card .package-name {
  font-weight: 600;
  color: #1e293b;
}

.package-card .card-actions {
  display: flex;
  gap: 4px;
}

.package-card .card-actions button {
  background: none;
  border: none;
  padding: 4px 6px;
  cursor: pointer;
  border-radius: 4px;
  color: #94a3b8;
  font-size: 12px;
}

.package-card .card-actions .edit-btn:hover {
  background: #dbeafe;
  color: #3b82f6;
}

.package-card .card-actions .delete-btn:hover {
  background: #fee2e2;
  color: #dc2626;
}

.package-card .card-body {
  padding: 12px;
}

.package-card .progress-info {
  display: flex;
  align-items: center;
  gap: 12px;
}

.package-card .progress-bar {
  flex: 1;
  height: 8px;
  background: #e2e8f0;
  border-radius: 4px;
  overflow: hidden;
}

.package-card .progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #3b82f6, #60a5fa);
  border-radius: 4px;
  transition: width 0.3s;
}

.package-card .progress-text {
  font-size: 13px;
  font-weight: 600;
  color: #3b82f6;
  white-space: nowrap;
}

.package-card .includes {
  font-size: 12px;
  color: #64748b;
  margin-top: 8px;
}

.package-card .memo {
  font-size: 12px;
  color: #94a3b8;
  margin-top: 4px;
  font-style: italic;
}

.package-card .card-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background: #fafafa;
  border-top: 1px solid #e2e8f0;
}

.package-card .start-date {
  font-size: 11px;
  color: #94a3b8;
}

.package-card .use-btn {
  padding: 6px 12px;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
}

.package-card .use-btn:hover:not(:disabled) {
  background: #059669;
}

.package-card .use-btn:disabled {
  background: #d1d5db;
  cursor: not-allowed;
}

/* 멤버십 탭 */
.membership-tab .membership-cards {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.membership-card {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  overflow: hidden;
}

.membership-card.expiring {
  border-color: #f59e0b;
}

.membership-card.expired {
  border-color: #ef4444;
  opacity: 0.7;
}

.membership-card .card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  background: linear-gradient(90deg, #8b5cf6, #a78bfa);
  color: white;
}

.membership-card .membership-type {
  font-weight: 600;
}

.membership-card .card-actions button {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  padding: 4px 6px;
  cursor: pointer;
  border-radius: 4px;
  color: white;
  font-size: 12px;
}

.membership-card .card-actions button:hover {
  background: rgba(255, 255, 255, 0.3);
}

.membership-card .card-body {
  padding: 12px;
}

.membership-card .expire-info,
.membership-card .remaining-info {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #475569;
  margin-bottom: 6px;
}

.membership-card .expire-info i,
.membership-card .remaining-info i {
  color: #94a3b8;
  width: 16px;
}

.membership-card .days-left {
  font-size: 12px;
  color: #64748b;
}

.membership-card .days-left.warning {
  color: #f59e0b;
  font-weight: 600;
}

.membership-card .days-left.expired {
  color: #ef4444;
  font-weight: 600;
}

/* 수납상세 탭 */
.detail-tab .memo-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.detail-tab .memo-item {
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 12px;
  border-left: 4px solid #94a3b8;
}

.detail-tab .memo-item.event {
  border-left-color: #ec4899;
}

.detail-tab .memo-item.refund {
  border-left-color: #ef4444;
}

.detail-tab .memo-item.other {
  border-left-color: #64748b;
}

.detail-tab .memo-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.detail-tab .memo-type-badge {
  font-size: 12px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 4px;
  background: #f1f5f9;
}

.detail-tab .memo-item.event .memo-type-badge {
  background: #fce7f3;
  color: #db2777;
}

.detail-tab .memo-item.refund .memo-type-badge {
  background: #fee2e2;
  color: #dc2626;
}

.detail-tab .memo-actions {
  display: flex;
  gap: 4px;
}

.detail-tab .memo-actions button {
  background: none;
  border: none;
  padding: 4px 6px;
  cursor: pointer;
  border-radius: 4px;
  color: #94a3b8;
  font-size: 12px;
}

.detail-tab .memo-actions .edit-btn:hover {
  background: #dbeafe;
  color: #3b82f6;
}

.detail-tab .memo-actions .delete-btn:hover {
  background: #fee2e2;
  color: #dc2626;
}

.detail-tab .memo-content {
  font-size: 14px;
  color: #1e293b;
  line-height: 1.5;
}

.detail-tab .memo-date {
  font-size: 11px;
  color: #94a3b8;
  margin-top: 8px;
}

.detail-tab .type-buttons {
  display: flex;
  gap: 8px;
}

.detail-tab .type-btn {
  padding: 8px 14px;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.detail-tab .type-btn:hover {
  border-color: #3b82f6;
}

.detail-tab .type-btn.active {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
}

/* 포인트 탭 */
.point-tab .point-summary {
  display: flex;
  gap: 16px;
  margin-bottom: 20px;
}

.point-tab .balance-card {
  flex: 1;
  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
  color: white;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}

.point-tab .balance-card .label {
  font-size: 12px;
  opacity: 0.8;
  margin-bottom: 4px;
}

.point-tab .balance-card .value {
  font-size: 28px;
  font-weight: 700;
}

.point-tab .today-stats {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.point-tab .today-stats .stat {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 12px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.point-tab .today-stats .stat .label {
  font-size: 12px;
  color: #64748b;
}

.point-tab .today-stats .stat.earned .value {
  color: #10b981;
  font-weight: 600;
}

.point-tab .today-stats .stat.used .value {
  color: #ef4444;
  font-weight: 600;
}

.point-tab .point-input-section {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 16px;
  margin-bottom: 20px;
}

.point-tab .input-row {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.point-tab .input-row input {
  flex: 1;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
}

.point-tab .input-row input:focus {
  outline: none;
  border-color: #3b82f6;
}

.point-tab .button-row {
  display: flex;
  gap: 8px;
}

.point-tab .button-row button {
  flex: 1;
  padding: 10px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.point-tab .use-btn {
  background: #fee2e2;
  color: #dc2626;
}

.point-tab .use-btn:hover:not(:disabled) {
  background: #fecaca;
}

.point-tab .earn-btn {
  background: #d1fae5;
  color: #059669;
}

.point-tab .earn-btn:hover:not(:disabled) {
  background: #a7f3d0;
}

.point-tab .button-row button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.point-tab .transaction-history {
  border-top: 1px solid #e2e8f0;
  padding-top: 16px;
}

.point-tab .history-title {
  font-size: 13px;
  font-weight: 600;
  color: #64748b;
  margin-bottom: 12px;
}

.point-tab .transaction-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
}

.point-tab .transaction-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: #fafafa;
  border-radius: 6px;
  font-size: 13px;
}

.point-tab .transaction-item .tx-info {
  display: flex;
  gap: 12px;
}

.point-tab .transaction-item .tx-date {
  color: #94a3b8;
}

.point-tab .transaction-item .tx-desc {
  color: #475569;
}

.point-tab .transaction-item .tx-amount {
  text-align: right;
}

.point-tab .transaction-item .tx-amount .earned {
  color: #10b981;
  font-weight: 600;
}

.point-tab .transaction-item .tx-amount .used {
  color: #ef4444;
  font-weight: 600;
}

.point-tab .transaction-item .tx-balance {
  display: block;
  font-size: 11px;
  color: #94a3b8;
}

/* 메모 컬럼 클릭 가능 스타일 */
.receipt-row .col-memo {
  cursor: pointer;
  transition: background 0.15s;
}

.receipt-row .col-memo:hover {
  background: #f0f9ff;
}

.memo-summary-display {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: #64748b;
}

.memo-summary-display .memo-badge {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 500;
}

.memo-summary-display .memo-badge.package {
  background: #f3e8ff;
  color: #7c3aed;
}

.memo-summary-display .memo-badge.membership {
  background: #dbeafe;
  color: #2563eb;
}

.memo-summary-display .memo-badge.point {
  background: #fef3c7;
  color: #d97706;
}

.memo-summary-display .memo-badge.detail {
  background: #fce7f3;
  color: #db2777;
}

.memo-click-hint {
  color: #94a3b8;
  font-size: 11px;
}

/* ============================================
   2행 레이아웃 스타일
   ============================================ */

.receipt-2row-layout {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

/* 2행 헤더 */
.receipt-header-2row {
  background: #f9fafb;
  border-bottom: 2px solid #e5e7eb;
  position: sticky;
  top: 0;
  z-index: 10;
}

.receipt-header-2row .header-row-1,
.receipt-header-2row .header-row-2 {
  display: grid;
  grid-template-columns: 24px 40px 80px 32px 70px 55px 55px;
  /* #, 시간, 환자, 담당, 총수납, 본부금, 비급여 */
  gap: 4px;
  padding: 8px 16px;
  font-weight: 600;
  font-size: 13px;
  color: #1f2937;
  align-items: center;
}

.receipt-header-2row .header-row-1 {
  padding-bottom: 2px;
}

.receipt-header-2row .header-row-2 {
  padding-top: 2px;
  font-weight: 500;
  color: #6b7280;
  font-size: 11px;
}

/* Row 1 헤더 - 금액 컬럼 */
.receipt-header-2row .col-total {
  text-align: left;
  margin-left: 5px;
}

.receipt-header-2row .col-self,
.receipt-header-2row .col-general {
  text-align: right;
}

.receipt-header-2row .col-uncovered {
  text-align: left;
}

/* Row 2 헤더 - 열 정렬 */
.receipt-header-2row .header-row-2 .col-chart-info {
  grid-column: 3;  /* 환자 아래: 차트/나이 */
}

.receipt-header-2row .header-row-2 .col-type {
  grid-column: 4;  /* 담당 아래: 종별 */
}

.receipt-header-2row .header-row-2 .col-uncovered {
  grid-column: 5 / span 3;  /* 결제+총수납/본부금/비급여 아래: 비급여내역 (3컬럼 병합) */
  text-align: left;
}

.receipt-header-2row .col-custom-memo {
  margin-left: 10px;
}

.receipt-header-2row .col-reservation {
  text-align: center;
}

.receipt-header-2row .header-row-2 .col-memo {
  grid-column: 8;  /* 임의메모 아래: 빠른메모+메모요약 */
  text-align: left;
  margin-left: 10px;
}

.receipt-header-2row .header-row-2 .col-complete {
  grid-column: 8;  /* 예약 아래: 완료 */
  text-align: center;
}

/* 2행 수납 항목 */
.receipt-item-2row {
  border-bottom: 1px solid #e5e7eb;
  transition: all 0.2s;
}

.receipt-item-2row:hover {
  background: #f9fafb;
}

.receipt-item-2row.expanded {
  background: #eff6ff;
  border-bottom-color: transparent;
}

.receipt-item-2row.completed {
  background: #f0fdf4;
}

.receipt-item-2row.completed:hover {
  background: #dcfce7;
}

/* 2행 항목의 각 행 */
.receipt-item-2row .receipt-row-1,
.receipt-item-2row .receipt-row-2 {
  display: grid;
  grid-template-columns: 24px 40px 80px 32px 70px 55px 55px;
  /* #, 시간, 환자, 담당, 총수납, 본부금, 비급여 */
  gap: 4px;
  padding: 6px 16px;
  cursor: pointer;
  font-size: 13px;
  align-items: center;
}

.receipt-item-2row .receipt-row-1 {
  padding-bottom: 2px;
}

.receipt-item-2row .receipt-row-2 {
  padding-top: 0;
  padding-bottom: 8px;
}

/* 열 스타일 - 2행 */
.receipt-item-2row .col-num {
  text-align: center;
  color: #9ca3af;
  font-size: 12px;
}

.receipt-item-2row .col-time {
  font-family: monospace;
  font-size: 12px;
  color: #6b7280;
}

.receipt-item-2row .col-patient {
  display: flex;
  align-items: center;
}

.receipt-item-2row .col-patient .patient-name {
  font-weight: 700;
  color: #111827;
  font-size: 14px;
}

.receipt-item-2row .col-patient.clickable:hover .patient-name {
  color: #2563eb;
  text-decoration: underline;
}

.receipt-item-2row .col-age {
  text-align: center;
  font-size: 12px;
  color: #6b7280;
}

.receipt-item-2row .col-doctor {
  font-weight: 600;
  color: #6366f1;
  text-align: center;
  font-size: 12px;
}

.receipt-item-2row .col-type .type-badge {
  display: inline-block;
  padding: 2px 6px;
  background: #e0e7ff;
  color: #4338ca;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 500;
  white-space: nowrap;
}

.receipt-item-2row .col-type .type-badge.type-gunbo {
  background: #f3f4f6;
  color: #9ca3af;
}

.receipt-item-2row .col-type .type-badge.type-jabo {
  background: #fef3c7;
  color: #d97706;
}

/* 결제+총수납 (Row 1 - column 5) */
.receipt-item-2row .col-total {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: 5px;
  font-family: monospace;
  font-size: 12px;
  text-align: left;
  color: #1f2937;
  font-weight: 600;
  cursor: pointer;
}

.receipt-item-2row .col-total .payment-icons {
  display: flex;
  gap: 3px;
}

.receipt-item-2row .col-total .payment-icons span {
  font-size: 11px;
}

.receipt-item-2row .col-total:hover {
  opacity: 0.7;
}

.receipt-item-2row .col-total.clickable {
  cursor: pointer;
  transition: all 0.15s ease;
}

.receipt-item-2row .col-total.clickable:hover {
  color: #2563eb;
  opacity: 1;
}

/* 본부금 (Row 1 - column 6) */
.receipt-item-2row .col-self {
  font-family: monospace;
  font-size: 12px;
  text-align: right;
  color: #0369a1;
  cursor: pointer;
}

.receipt-item-2row .col-self.high {
  color: #dc2626;
  font-weight: 500;
}

.receipt-item-2row .col-self:hover {
  opacity: 0.7;
}

/* 비급여 (Row 1 - column 7) */
.receipt-item-2row .col-general {
  font-family: monospace;
  font-size: 12px;
  text-align: right;
  color: #ea580c;
  cursor: pointer;
}

.receipt-item-2row .col-general:hover {
  opacity: 0.7;
}

/* 비급여내역 (Row 2 - column 5-7) */
.receipt-item-2row .col-uncovered {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-left: 5px;
  font-size: 12px;
}

/* 임의메모 (Row 1 - column 8) */
.receipt-item-2row .col-custom-memo {
  display: flex;
  align-items: center;
  margin-left: 10px;
  font-size: 13px;
  color: #374151;
  min-width: 0;
  overflow: hidden;
}

.receipt-item-2row .col-custom-memo .custom-memo-text {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 4px;
  transition: background 0.15s;
}

.receipt-item-2row .col-custom-memo .custom-memo-text:hover {
  background: #f3f4f6;
}

.receipt-item-2row .col-custom-memo .custom-memo-add-btn {
  padding: 3px 10px;
  font-size: 11px;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.15s;
}

.receipt-item-2row .col-custom-memo .custom-memo-add-btn:hover {
  background: #e5e7eb;
  color: #374151;
}

.receipt-item-2row .col-custom-memo .custom-memo-input {
  flex: 1;
  padding: 4px 8px;
  font-size: 13px;
  border: 1px solid #3b82f6;
  border-radius: 4px;
  outline: none;
  min-width: 0;
}

.receipt-item-2row .col-custom-memo .custom-memo-input:focus {
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

/* Row 2 - 차트/나이 (column 3) */
.receipt-item-2row .receipt-row-2 .col-chart-info {
  grid-column: 3;
  font-size: 12px;
  color: #6b7280;
}

/* Row 2 - 종별 (column 4) */
.receipt-item-2row .receipt-row-2 .col-type {
  grid-column: 4;
}

/* Row 2 - 비급여내역 (column 5-7, 3컬럼 병합) */
.receipt-item-2row .receipt-row-2 .col-uncovered {
  grid-column: 5 / span 3;
  font-size: 12px;
  align-items: center;
  gap: 6px;
}

/* Row 2 - 완료 버튼 (column 9) */
.receipt-item-2row .receipt-row-2 .col-complete {
  grid-column: 8;
}

/* 수납내역 금액 스타일 */
.receipt-item-2row .col-receipt-detail .amount-item {
  white-space: nowrap;
}

.receipt-item-2row .col-receipt-detail .amount-item.self {
  color: #0369a1;
}

.receipt-item-2row .col-receipt-detail .amount-item.self.high {
  color: #dc2626;
  font-weight: 500;
}

.receipt-item-2row .col-receipt-detail .amount-group.clickable {
  cursor: pointer;
}

.receipt-item-2row .col-receipt-detail .amount-group.clickable:hover {
  opacity: 0.7;
}

.receipt-item-2row .col-receipt-detail .choona-type {
  color: #6b7280;
  font-size: 11px;
  font-family: inherit;
  margin-left: 2px;
}

.receipt-item-2row .col-receipt-detail .amount-item.total {
  color: #1f2937;
  font-weight: 600;
}

.receipt-item-2row .col-receipt-detail .amount-divider,
.receipt-item-2row .col-uncovered .amount-divider {
  color: #d1d5db;
  margin: 0 2px;
}

.receipt-item-2row .col-receipt-detail .payment-methods-inline {
  display: flex;
  gap: 4px;
  margin-right: 6px;
}

.receipt-item-2row .col-receipt-detail .payment-methods-inline span {
  font-size: 12px;
}

/* 비급여내역 금액 스타일 */
.receipt-item-2row .col-uncovered .amount-item.general {
  color: #ea580c;
  font-weight: 500;
}

.receipt-item-2row .col-uncovered .uncovered-items {
  color: #4b5563;
  font-size: 11px;
  font-family: inherit;
}

.receipt-item-2row .col-uncovered .choona-type {
  color: #ea580c;
  font-weight: 500;
}

.receipt-item-2row .col-uncovered .uncovered-divider {
  color: #9ca3af;
  margin: 0 2px;
}

/* 빠른 메모 버튼 스타일 (Row 2) */
.receipt-item-2row .col-memo .quick-memo-btns {
  display: inline-flex;
  gap: 4px;
}

.receipt-item-2row .col-memo .quick-memo-btn {
  padding: 3px 10px;
  font-size: 11px;
  font-weight: 500;
  border: 1px solid transparent;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.receipt-item-2row .col-memo .quick-memo-btn.yakchim {
  background: #dbeafe;
  color: #1d4ed8;
}

.receipt-item-2row .col-memo .quick-memo-btn.yakchim:hover {
  background: #bfdbfe;
  color: #1e40af;
}

.receipt-item-2row .col-memo .quick-memo-btn.herbal {
  background: #dcfce7;
  color: #15803d;
}

.receipt-item-2row .col-memo .quick-memo-btn.herbal:hover {
  background: #bbf7d0;
}

.receipt-item-2row .col-memo .quick-memo-btn.medicine {
  background: #fef3c7;
  color: #b45309;
}

.receipt-item-2row .col-memo .quick-memo-btn.medicine:hover {
  background: #fde68a;
}

.receipt-item-2row .col-memo .quick-memo-btn.gongjindan {
  background: #fce7f3;
  color: #be185d;
}

.receipt-item-2row .col-memo .quick-memo-btn.gongjindan:hover {
  background: #fbcfe8;
}

.receipt-item-2row .col-memo .quick-memo-btn.gyeongokgo {
  background: #e0e7ff;
  color: #4338ca;
}

.receipt-item-2row .col-memo .quick-memo-btn.gyeongokgo:hover {
  background: #c7d2fe;
}

.receipt-item-2row .col-memo .quick-memo-btn.diet {
  background: #ccfbf1;
  color: #0d9488;
}

.receipt-item-2row .col-memo .quick-memo-btn.diet:hover {
  background: #99f6e4;
}

/* 메모 완료 상태 - 회색 */
.receipt-item-2row .col-memo .quick-memo-btn.completed {
  background: #e5e7eb;
  color: #9ca3af;
  cursor: default;
}

.receipt-item-2row .col-memo .quick-memo-btn.completed:hover {
  background: #e5e7eb;
}

/* 수납메모 내부 스타일 (Row 2) */
.receipt-item-2row .col-memo .memo-summary-display {
  width: 100%;
}

.receipt-item-2row .col-memo .memo-text {
  font-size: 12px;
  color: #475569;
  line-height: 1.4;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.receipt-item-2row .col-memo .memo-click-hint {
  color: #94a3b8;
  font-size: 11px;
  display: flex;
  align-items: center;
  gap: 4px;
}

/* 예약 열 */
.receipt-item-2row .col-reservation {
  text-align: center;
}

.receipt-item-2row .col-reservation .reservation-status {
  font-size: 11px;
  padding: 3px 8px;
  border-radius: 4px;
  font-weight: 500;
}

.receipt-item-2row .col-reservation .reservation-status.confirmed {
  background: #dbeafe;
  color: #1d4ed8;
}

.receipt-item-2row .col-reservation .reservation-btn.empty {
  padding: 3px 10px;
  font-size: 11px;
  background: #f1f5f9;
  border: 1px dashed #cbd5e1;
  border-radius: 4px;
  color: #64748b;
  cursor: pointer;
  transition: all 0.15s;
}

.receipt-item-2row .col-reservation .reservation-btn.empty:hover {
  background: #e0f2fe;
  border-color: #38bdf8;
  color: #0284c7;
}

/* 완료 열 */
.receipt-item-2row .col-complete {
  text-align: center;
}

.receipt-item-2row .col-complete .complete-btn {
  width: 22px;
  height: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: 1px dashed #d1d5db;
  border-radius: 4px;
  color: #9ca3af;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 10px;
}

.receipt-item-2row .col-complete .complete-btn:hover {
  background: #d1fae5;
  border-color: #10b981;
  border-style: solid;
  color: #059669;
}

.receipt-item-2row .col-complete .complete-btn.completed {
  background: #10b981;
  border: 1px solid #10b981;
  color: white;
}

.receipt-item-2row .col-complete .complete-btn.completed:hover {
  background: #f3f4f6;
  border-color: #d1d5db;
  color: #9ca3af;
}

.receipt-item-2row .col-complete .complete-badge {
  width: 22px;
  height: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: #10b981;
  border-radius: 4px;
  color: white;
  font-size: 10px;
}

/* 완료된 항목 스타일 */
.receipt-item-2row.completed .col-patient .patient-name {
  color: #059669;
}

/* ============================================ */
/* 약침 모달 & 패널 스타일                       */
/* ============================================ */

/* 모달 백드롭 */
.yakchim-modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

/* 모달 */
.yakchim-modal {
  background: white;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  width: 600px;
  max-width: 95vw;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* 넓은 모달 (2단 레이아웃용) */
.yakchim-modal.wide {
  width: 850px;
}

/* 모달 헤더 */
.yakchim-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
  background: #f8fafc;
}

.yakchim-modal-header.draggable {
  cursor: grab;
  user-select: none;
}

.yakchim-modal-header.draggable:active {
  cursor: grabbing;
}

.yakchim-modal.dragging {
  user-select: none;
  transition: none;
}

.yakchim-modal.dragging .yakchim-modal-header {
  cursor: grabbing;
}

.yakchim-modal-header h2 {
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.yakchim-modal-header h2 i {
  color: #6366f1;
}

.yakchim-modal-header .patient-info {
  font-weight: 400;
  color: #6b7280;
  font-size: 14px;
  margin-left: 4px;
}

.yakchim-modal-header .modal-close-btn {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;
  color: #6b7280;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
}

.yakchim-modal-header .modal-close-btn:hover {
  background: #e5e7eb;
  color: #1f2937;
}

/* 모달 바디 */
.yakchim-modal-body {
  flex: 1;
  overflow-y: auto;
}

/* 패널 */
.yakchim-panel {
  padding: 16px 20px;
}

.yakchim-panel.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

/* 2단 레이아웃 */
.yakchim-columns {
  display: flex;
  gap: 20px;
  min-height: 350px;
}

.yakchim-columns .left-column {
  flex: 0 0 280px;
  min-width: 250px;
  border-right: 1px solid #e5e7eb;
  padding-right: 20px;
}

.yakchim-columns .right-column {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* 왼쪽 컬럼 - 사용 기록 */
.yakchim-columns .left-column .history-section {
  height: 100%;
}

.yakchim-columns .left-column .usage-history {
  max-height: 320px;
  overflow-y: auto;
}

.yakchim-columns .left-column .history-item {
  padding: 8px 10px;
  font-size: 12px;
  border-bottom: 1px solid #f3f4f6;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 4px;
}

.yakchim-columns .left-column .history-date {
  color: #6b7280;
  font-weight: 500;
  min-width: 35px;
}

.yakchim-columns .left-column .history-item-name {
  color: #374151;
  flex: 1;
  min-width: 60px;
}

.yakchim-columns .left-column .history-arrow {
  color: #9ca3af;
  font-size: 10px;
}

.yakchim-columns .left-column .history-source {
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 4px;
}

.yakchim-columns .left-column .history-source.membership {
  background: #dbeafe;
  color: #1e40af;
}

.yakchim-columns .left-column .history-source.package {
  background: #dcfce7;
  color: #166534;
}

.yakchim-columns .left-column .history-remaining {
  color: #9ca3af;
  font-size: 10px;
}

/* 오른쪽 컬럼 - 섹션 컴팩트화 */
.yakchim-columns .right-column .panel-section {
  margin-bottom: 0;
}

.yakchim-columns .right-column .section-header h3 {
  font-size: 13px;
}

/* 인라인 폼 */
.yakchim-panel .inline-form {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
}

.yakchim-panel .inline-form-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.yakchim-panel .inline-form-row:last-child {
  margin-bottom: 0;
}

.yakchim-panel .inline-form-row label {
  font-size: 12px;
  color: #64748b;
  min-width: 35px;
}

.yakchim-panel .inline-form-row select {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  background: white;
}

.yakchim-panel .inline-form-row input[type="number"],
.yakchim-panel .inline-form-row input[type="date"] {
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
}

.yakchim-panel .inline-form-row input[type="number"].input-small {
  width: 60px;
}

.yakchim-panel .inline-form-row input[type="date"] {
  flex: 1;
}

.yakchim-panel .inline-form-row .input-suffix {
  font-size: 12px;
  color: #64748b;
}

.yakchim-panel .inline-form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #e2e8f0;
}

.yakchim-panel .btn-cancel-small,
.yakchim-panel .btn-save-small {
  padding: 5px 12px;
  border-radius: 5px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-panel .btn-cancel-small {
  background: white;
  border: 1px solid #d1d5db;
  color: #4b5563;
}

.yakchim-panel .btn-cancel-small:hover {
  background: #f3f4f6;
}

.yakchim-panel .btn-save-small {
  background: #6366f1;
  border: 1px solid #6366f1;
  color: white;
}

.yakchim-panel .btn-save-small:hover {
  background: #4f46e5;
}

.yakchim-panel .btn-save-small:disabled,
.yakchim-panel .btn-cancel-small:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* 인라인 폼 (한 줄) */
.yakchim-panel .inline-form-single {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 10px 12px;
  margin-bottom: 12px;
  box-sizing: border-box;
}

.yakchim-panel .inline-form-single select {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
  background: white;
  min-width: 90px;
}

.yakchim-panel .inline-form-single .input-qty {
  width: 50px;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
  text-align: center;
}

.yakchim-panel .inline-form-single .input-suffix {
  font-size: 12px;
  color: #64748b;
  flex-shrink: 0;
}

.yakchim-panel .inline-form-single .input-date {
  flex: 1;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
  min-width: 120px;
}

.yakchim-panel .inline-form-single .btn-cancel-small,
.yakchim-panel .inline-form-single .btn-save-small {
  padding: 6px 14px;
  font-size: 12px;
  white-space: nowrap;
  flex-shrink: 0;
}

/* 아이템 리스트 (한 줄 표시) */
.yakchim-panel .item-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.yakchim-panel .item-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  font-size: 13px;
}

.yakchim-panel .item-row.expired,
.yakchim-panel .item-row.depleted {
  background: #fef2f2;
  border-color: #fecaca;
  opacity: 0.7;
}

.yakchim-panel .item-type {
  font-weight: 600;
  color: #1e40af;
  min-width: 80px;
}

.yakchim-panel .item-qty {
  color: #059669;
  font-weight: 500;
  min-width: 50px;
}

.yakchim-panel .item-expire {
  color: #6b7280;
  font-size: 12px;
  flex: 1;
}

.yakchim-panel .item-status {
  color: #dc2626;
  font-size: 11px;
  font-weight: 500;
}

.yakchim-panel .btn-use {
  padding: 4px 10px;
  background: #6366f1;
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  white-space: nowrap;
  transition: background 0.15s;
}

.yakchim-panel .btn-use:hover {
  background: #4f46e5;
}

.yakchim-panel .btn-use.package {
  background: #0891b2;
}

.yakchim-panel .btn-use.package:hover {
  background: #0e7490;
}

.yakchim-panel .btn-use:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.yakchim-panel .loading-spinner {
  color: #6b7280;
}

.yakchim-panel .error-message {
  background: #fef2f2;
  color: #dc2626;
  padding: 10px 14px;
  border-radius: 6px;
  margin-bottom: 16px;
  font-size: 13px;
}

/* 섹션 */
.yakchim-panel .panel-section {
  margin-bottom: 20px;
}

.yakchim-panel .section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.yakchim-panel .section-header h3 {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  margin: 0;
}

/* 버튼 */
.yakchim-panel .btn-add {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  background: #eff6ff;
  color: #2563eb;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-panel .btn-add:hover {
  background: #dbeafe;
}

.yakchim-panel .btn-add-small {
  padding: 4px 10px;
  background: #f3f4f6;
  color: #4b5563;
  border: none;
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-panel .btn-add-small:hover {
  background: #e5e7eb;
}

/* 사용 테이블 */
.yakchim-panel .usage-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.yakchim-panel .usage-table th {
  text-align: left;
  padding: 8px 10px;
  background: #f9fafb;
  color: #6b7280;
  font-weight: 500;
  font-size: 11px;
  border-bottom: 1px solid #e5e7eb;
}

.yakchim-panel .usage-table td {
  padding: 8px 10px;
  border-bottom: 1px solid #f3f4f6;
  vertical-align: middle;
}

.yakchim-panel .usage-table select {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 12px;
  background: white;
}

.yakchim-panel .usage-table select:focus {
  outline: none;
  border-color: #6366f1;
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
}

.yakchim-panel .amount-input {
  display: flex;
  align-items: center;
  gap: 4px;
}

.yakchim-panel .amount-input input {
  width: 60px;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 12px;
  text-align: right;
}

.yakchim-panel .amount-input input:focus {
  outline: none;
  border-color: #6366f1;
}

.yakchim-panel .amount-input .unit {
  color: #6b7280;
  font-size: 12px;
}

.yakchim-panel .status-cell {
  min-width: 120px;
}

.yakchim-panel .status-cell select {
  font-size: 11px;
}

.yakchim-panel .status-badge {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
}

.yakchim-panel .status-badge.valid {
  background: #dcfce7;
  color: #15803d;
}

.yakchim-panel .status-badge.invalid {
  background: #fef2f2;
  color: #dc2626;
}

.yakchim-panel .status-text {
  color: #9ca3af;
  font-size: 12px;
}

.yakchim-panel .service-reason {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 11px;
}

.yakchim-panel .btn-remove {
  width: 26px;
  height: 26px;
  border: none;
  background: transparent;
  color: #9ca3af;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-panel .btn-remove:hover:not(:disabled) {
  background: #fef2f2;
  color: #dc2626;
}

.yakchim-panel .btn-remove:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* 빈 상태 */
.yakchim-panel .empty-state {
  padding: 20px;
  text-align: center;
  color: #9ca3af;
  font-size: 13px;
  background: #f9fafb;
  border-radius: 6px;
}

/* 패키지 목록 */
.yakchim-panel .package-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.yakchim-panel .package-item {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  overflow: hidden;
}

.yakchim-panel .package-summary {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  cursor: pointer;
  transition: background 0.15s;
}

.yakchim-panel .package-summary:hover {
  background: #f9fafb;
}

.yakchim-panel .package-name {
  font-weight: 500;
  color: #1f2937;
  font-size: 13px;
  min-width: 100px;
}

.yakchim-panel .package-progress {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
}

.yakchim-panel .progress-bar {
  flex: 1;
  height: 8px;
  background: #e5e7eb;
  border-radius: 4px;
  overflow: hidden;
}

.yakchim-panel .progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #6366f1, #8b5cf6);
  border-radius: 4px;
  transition: width 0.3s;
}

.yakchim-panel .progress-text {
  font-size: 12px;
  color: #4b5563;
  min-width: 60px;
}

.yakchim-panel .package-expire {
  font-size: 11px;
  color: #9ca3af;
}

.yakchim-panel .package-summary i {
  color: #9ca3af;
  font-size: 10px;
}

/* 패키지 이력 */
.yakchim-panel .package-history {
  background: #f9fafb;
  border-top: 1px solid #e5e7eb;
  padding: 10px 14px;
}

.yakchim-panel .package-history table {
  width: 100%;
  font-size: 11px;
}

.yakchim-panel .package-history td {
  padding: 4px 8px;
}

.yakchim-panel .history-date {
  color: #6b7280;
}

.yakchim-panel .history-action {
  font-weight: 500;
}

.yakchim-panel .history-action.purchase {
  color: #16a34a;
}

.yakchim-panel .history-action.use {
  color: #2563eb;
}

.yakchim-panel .history-change {
  font-weight: 600;
  text-align: right;
}

.yakchim-panel .history-change.plus {
  color: #16a34a;
}

.yakchim-panel .history-change.minus {
  color: #dc2626;
}

.yakchim-panel .history-remaining {
  color: #6b7280;
  text-align: right;
}

/* 멤버십 목록 */
.yakchim-panel .membership-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.yakchim-panel .membership-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: #f8fafc;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
}

.yakchim-panel .membership-icon {
  width: 36px;
  height: 36px;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 16px;
}

.yakchim-panel .membership-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.yakchim-panel .membership-name {
  font-weight: 500;
  color: #1f2937;
  font-size: 13px;
}

.yakchim-panel .membership-period {
  font-size: 11px;
  color: #6b7280;
}

.yakchim-panel .membership-status {
  font-size: 12px;
  font-weight: 500;
}

.yakchim-panel .membership-status.valid {
  color: #16a34a;
}

.yakchim-panel .membership-status.warning {
  color: #d97706;
}

.yakchim-panel .membership-status.expired {
  color: #dc2626;
}

/* 메모 입력 */
.yakchim-panel .memo-input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  font-size: 13px;
  resize: none;
  font-family: inherit;
}

.yakchim-panel .memo-input:focus {
  outline: none;
  border-color: #6366f1;
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
}

/* 패널 푸터 */
.yakchim-panel .panel-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding-top: 16px;
  border-top: 1px solid #e5e7eb;
  margin-top: 10px;
}

.yakchim-panel .btn-cancel {
  padding: 10px 20px;
  background: #f3f4f6;
  color: #4b5563;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-panel .btn-cancel:hover {
  background: #e5e7eb;
}

.yakchim-panel .btn-save {
  padding: 10px 24px;
  background: #6366f1;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-panel .btn-save:hover:not(:disabled) {
  background: #4f46e5;
}

.yakchim-panel .btn-save:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* 오늘 처리 필요 섹션 */
.yakchim-panel .pending-section {
  background: #fef3c7;
  border: 1px solid #fcd34d;
  border-radius: 8px;
  padding: 12px 16px;
  margin-bottom: 16px;
}

.yakchim-panel .pending-section .section-header h3 {
  color: #92400e;
}

.yakchim-panel .pending-section .section-header h3 i {
  margin-right: 6px;
  color: #d97706;
}

.yakchim-panel .pending-count {
  display: inline-block;
  background: #dc2626;
  color: white;
  font-size: 11px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 10px;
  margin-left: 8px;
}

.yakchim-panel .pending-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.yakchim-panel .pending-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: white;
  padding: 10px 14px;
  border-radius: 6px;
  border: 1px solid #fcd34d;
}

.yakchim-panel .pending-item.processed {
  background: #dcfce7;
  border-color: #86efac;
}

.yakchim-panel .pending-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.yakchim-panel .pending-name {
  font-weight: 500;
  color: #1f2937;
  font-size: 13px;
}

.yakchim-panel .pending-amount {
  color: #6b7280;
  font-size: 12px;
}

.yakchim-panel .pending-badge {
  background: #fef3c7;
  color: #92400e;
  font-size: 11px;
  font-weight: 500;
  padding: 4px 10px;
  border-radius: 4px;
}

.yakchim-panel .pending-status {
  display: flex;
  align-items: center;
  gap: 8px;
}

.yakchim-panel .processed-badge {
  color: #15803d;
  font-size: 12px;
  font-weight: 500;
}

.yakchim-panel .btn-undo {
  padding: 4px 10px;
  background: #f3f4f6;
  color: #6b7280;
  border: none;
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-panel .btn-undo:hover:not(:disabled) {
  background: #fee2e2;
  color: #dc2626;
}

/* 멤버십/패키지 카드 */
.yakchim-panel .membership-card,
.yakchim-panel .package-card {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 14px 16px;
  margin-bottom: 10px;
  background: white;
}

.yakchim-panel .membership-main,
.yakchim-panel .package-main {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}

.yakchim-panel .membership-info,
.yakchim-panel .package-info {
  flex: 1;
}

.yakchim-panel .membership-type,
.yakchim-panel .package-name {
  font-weight: 600;
  color: #1f2937;
  font-size: 14px;
  margin-bottom: 4px;
}

.yakchim-panel .membership-remaining {
  font-size: 13px;
  color: #4b5563;
}

.yakchim-panel .membership-remaining strong {
  color: #6366f1;
  font-size: 16px;
}

.yakchim-panel .membership-expire,
.yakchim-panel .package-expire {
  font-size: 12px;
  color: #6b7280;
}

.yakchim-panel .membership-expire.warning {
  color: #d97706;
}

.yakchim-panel .membership-expire.expired {
  color: #dc2626;
}

/* 차감 버튼 영역 */
.yakchim-panel .deduct-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px dashed #e5e7eb;
}

.yakchim-panel .btn-deduct {
  padding: 8px 14px;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
}

.yakchim-panel .btn-deduct:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.yakchim-panel .btn-deduct:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 사용 기록 */
.yakchim-panel .usage-history {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.yakchim-panel .history-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: #f9fafb;
  border-radius: 6px;
  font-size: 12px;
}

.yakchim-panel .history-date {
  color: #6b7280;
  min-width: 40px;
}

.yakchim-panel .history-item-name {
  color: #1f2937;
  font-weight: 500;
}

.yakchim-panel .history-arrow {
  color: #9ca3af;
}

.yakchim-panel .history-source {
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
}

.yakchim-panel .history-source.membership {
  background: #dbeafe;
  color: #1d4ed8;
}

.yakchim-panel .history-source.package {
  background: #f3e8ff;
  color: #7c3aed;
}

.yakchim-panel .history-remaining {
  color: #6b7280;
  font-size: 11px;
}

/* 빈 상태 - light */
.yakchim-panel .empty-state.light {
  background: transparent;
  border: 1px dashed #d1d5db;
  padding: 16px;
}

/* 푸터 경고 */
.yakchim-panel .footer-warning {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #d97706;
  font-size: 12px;
  margin-right: auto;
}

.yakchim-panel .footer-warning i {
  color: #f59e0b;
}

/* 섹션 헤더 아이콘 */
.yakchim-panel .section-header h3 i {
  margin-right: 6px;
  color: #6366f1;
}

.yakchim-panel .membership-section .section-header h3 i {
  color: #2563eb;
}

.yakchim-panel .package-section .section-header h3 i {
  color: #7c3aed;
}

.yakchim-panel .history-section .section-header h3 i {
  color: #6b7280;
}

/* ============================================ */
/* 한약 관리 패널 스타일                          */
/* ============================================ */

/* 모달 백드롭 */
.herbal-modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

/* 모달 */
.herbal-modal {
  background: white;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  width: 650px;
  max-width: 95vw;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* 모달 헤더 */
.herbal-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
  background: #f8fafc;
}

.herbal-modal-header.draggable {
  cursor: grab;
  user-select: none;
}

.herbal-modal-header.draggable:active {
  cursor: grabbing;
}

.herbal-modal.dragging {
  user-select: none;
  transition: none;
}

.herbal-modal.dragging .herbal-modal-header {
  cursor: grabbing;
}

.herbal-modal-header h2 {
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.herbal-modal-header h2 i {
  color: #059669;
}

.herbal-modal-header .patient-info {
  font-weight: 400;
  color: #6b7280;
  font-size: 14px;
  margin-left: 4px;
}

.herbal-modal-header .modal-close-btn {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;
  color: #6b7280;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
}

.herbal-modal-header .modal-close-btn:hover {
  background: #e5e7eb;
  color: #1f2937;
}

/* 모달 바디 */
.herbal-modal-body {
  flex: 1;
  overflow-y: auto;
}

/* 패널 */
.herbal-panel {
  padding: 16px 20px;
}

.herbal-panel.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
}

.herbal-panel .loading-spinner {
  color: #6b7280;
}

.herbal-panel .error-message {
  background: #fef2f2;
  color: #dc2626;
  padding: 10px 14px;
  border-radius: 6px;
  margin-bottom: 16px;
  font-size: 13px;
}

/* 섹션 */
.herbal-panel .panel-section {
  margin-bottom: 20px;
}

.herbal-panel .section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.herbal-panel .section-header h3 {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  margin: 0;
}

.herbal-panel .section-header.collapsible {
  cursor: pointer;
  padding: 8px 0;
}

.herbal-panel .section-header.collapsible:hover h3 {
  color: #059669;
}

.herbal-panel .section-header.collapsible h3 i {
  margin-right: 6px;
  font-size: 10px;
  color: #9ca3af;
}

/* 버튼 */
.herbal-panel .btn-add {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  background: #ecfdf5;
  color: #059669;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.herbal-panel .btn-add:hover:not(:disabled) {
  background: #d1fae5;
}

.herbal-panel .btn-add:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.herbal-panel .btn-add-small {
  padding: 4px 10px;
  background: #f3f4f6;
  color: #4b5563;
  border: none;
  border-radius: 4px;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s;
}

.herbal-panel .btn-add-small:hover {
  background: #e5e7eb;
}

/* 빈 상태 */
.herbal-panel .empty-state {
  padding: 20px;
  text-align: center;
  color: #9ca3af;
  font-size: 13px;
  background: #f9fafb;
  border-radius: 6px;
}

.herbal-panel .empty-state.light {
  background: transparent;
  border: 1px dashed #e5e7eb;
  padding: 16px;
}

/* 수령 테이블 */
.herbal-panel .pickup-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.herbal-panel .pickup-table th {
  text-align: left;
  padding: 8px 10px;
  background: #f9fafb;
  color: #6b7280;
  font-weight: 500;
  font-size: 11px;
  border-bottom: 1px solid #e5e7eb;
}

.herbal-panel .pickup-table td {
  padding: 8px 10px;
  border-bottom: 1px solid #f3f4f6;
  vertical-align: middle;
}

.herbal-panel .pickup-table select {
  width: 100%;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 12px;
  background: white;
}

.herbal-panel .pickup-table select:focus {
  outline: none;
  border-color: #059669;
  box-shadow: 0 0 0 2px rgba(5, 150, 105, 0.1);
}

/* 회차 셀 */
.herbal-panel .round-cell {
  white-space: nowrap;
}

.herbal-panel .round-number {
  font-weight: 600;
  color: #059669;
  font-size: 14px;
}

.herbal-panel .round-total {
  color: #9ca3af;
  font-size: 12px;
}

/* 녹용 셀 */
.herbal-panel .nokryong-cell .checkbox-label {
  display: flex;
  align-items: center;
  gap: 6px;
}

.herbal-panel .nokryong-cell input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #059669;
}

.herbal-panel .nokryong-cell select {
  width: auto;
  font-size: 11px;
  padding: 4px 6px;
}

.herbal-panel .nokryong-badge {
  background: #fef3c7;
  color: #b45309;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
}

/* 잔여 셀 */
.herbal-panel .remaining-cell {
  text-align: center;
}

.herbal-panel .remaining-count {
  font-weight: 600;
  color: #374151;
}

.herbal-panel .remaining-count.low {
  color: #dc2626;
}

/* 삭제 버튼 */
.herbal-panel .btn-remove {
  width: 26px;
  height: 26px;
  border: none;
  background: transparent;
  color: #9ca3af;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.herbal-panel .btn-remove:hover {
  background: #fef2f2;
  color: #dc2626;
}

/* 패키지 목록 */
.herbal-panel .package-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.herbal-panel .package-item {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  overflow: hidden;
}

.herbal-panel .package-summary {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  cursor: pointer;
  transition: background 0.15s;
}

.herbal-panel .package-summary:hover {
  background: #f9fafb;
}

.herbal-panel .package-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 100px;
}

.herbal-panel .herbal-name {
  font-weight: 600;
  color: #1f2937;
  font-size: 13px;
}

.herbal-panel .package-type {
  font-size: 11px;
  color: #6b7280;
}

.herbal-panel .package-progress {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 10px;
}

.herbal-panel .progress-bar {
  flex: 1;
  height: 8px;
  background: #e5e7eb;
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}

.herbal-panel .progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #059669, #10b981);
  border-radius: 4px;
  transition: width 0.3s;
}

.herbal-panel .progress-today {
  height: 100%;
  background: #fbbf24;
  position: absolute;
  top: 0;
  transition: width 0.3s;
}

.herbal-panel .progress-text {
  font-size: 12px;
  color: #4b5563;
  min-width: 70px;
}

.herbal-panel .today-pickup {
  color: #d97706;
  font-weight: 500;
  margin-left: 2px;
}

.herbal-panel .package-start {
  font-size: 11px;
  color: #9ca3af;
}

.herbal-panel .package-summary > i {
  color: #9ca3af;
  font-size: 10px;
}

/* 패키지 회차 테이블 */
.herbal-panel .package-rounds {
  background: #f9fafb;
  border-top: 1px solid #e5e7eb;
  padding: 10px 14px;
}

.herbal-panel .package-rounds table {
  width: 100%;
  font-size: 11px;
}

.herbal-panel .package-rounds th {
  text-align: left;
  padding: 6px 8px;
  color: #6b7280;
  font-weight: 500;
  border-bottom: 1px solid #e5e7eb;
}

.herbal-panel .package-rounds td {
  padding: 6px 8px;
  border-bottom: 1px solid #f3f4f6;
}

.herbal-panel .package-rounds tr.completed td {
  color: #6b7280;
}

.herbal-panel .package-rounds tr.pending td {
  color: #9ca3af;
}

.herbal-panel .round-status {
  display: inline-block;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 500;
}

.herbal-panel .round-status.completed {
  background: #dcfce7;
  color: #15803d;
}

.herbal-panel .round-status.delivered {
  background: #dbeafe;
  color: #1d4ed8;
}

.herbal-panel .round-status.preparing {
  background: #fef3c7;
  color: #b45309;
}

.herbal-panel .round-status.pending {
  background: #f3f4f6;
  color: #6b7280;
}

/* 녹용 패키지 목록 */
.herbal-panel .nokryong-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.herbal-panel .nokryong-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: #fffbeb;
  border: 1px solid #fde68a;
  border-radius: 8px;
}

.herbal-panel .nokryong-icon {
  width: 36px;
  height: 36px;
  background: linear-gradient(135deg, #d97706, #f59e0b);
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 16px;
}

.herbal-panel .nokryong-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.herbal-panel .nokryong-name {
  font-weight: 500;
  color: #1f2937;
  font-size: 13px;
}

.herbal-panel .nokryong-period {
  font-size: 11px;
  color: #6b7280;
}

.herbal-panel .nokryong-remaining {
  display: flex;
  align-items: center;
  gap: 6px;
}

.herbal-panel .nokryong-remaining .remaining {
  font-size: 12px;
  font-weight: 500;
  color: #92400e;
}

.herbal-panel .nokryong-remaining .remaining.low {
  color: #dc2626;
}

.herbal-panel .nokryong-remaining .today-used {
  font-size: 11px;
  color: #d97706;
}

/* 완료된 패키지 섹션 */
.herbal-panel .collapsed-section {
  background: #f9fafb;
  border-radius: 8px;
  padding: 10px 14px;
}

.herbal-panel .completed-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 8px;
}

.herbal-panel .completed-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 10px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  font-size: 12px;
}

.herbal-panel .completed-item .herbal-name {
  font-weight: 500;
  color: #6b7280;
}

.herbal-panel .completed-item .package-type {
  color: #9ca3af;
}

.herbal-panel .completed-item .completed-date {
  flex: 1;
  color: #9ca3af;
  text-align: right;
}

.herbal-panel .completed-badge {
  background: #f3f4f6;
  color: #6b7280;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 500;
}

/* 수령 이력 */
.herbal-panel .history-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.herbal-panel .history-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 10px;
  background: #f9fafb;
  border-radius: 6px;
  font-size: 12px;
}

.herbal-panel .history-date {
  color: #6b7280;
  min-width: 40px;
}

.herbal-panel .history-herbal {
  font-weight: 500;
  color: #374151;
  flex: 1;
}

.herbal-panel .history-round {
  color: #059669;
  font-weight: 500;
}

.herbal-panel .history-delivery {
  color: #6b7280;
  font-size: 11px;
}

.herbal-panel .history-nokryong {
  background: #fef3c7;
  color: #b45309;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 500;
}

/* 메모 입력 */
.herbal-panel .memo-input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  font-size: 13px;
  resize: none;
  font-family: inherit;
}

.herbal-panel .memo-input:focus {
  outline: none;
  border-color: #059669;
  box-shadow: 0 0 0 2px rgba(5, 150, 105, 0.1);
}

/* 패널 푸터 */
.herbal-panel .panel-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding-top: 16px;
  border-top: 1px solid #e5e7eb;
  margin-top: 10px;
}

.herbal-panel .btn-cancel {
  padding: 10px 20px;
  background: #f3f4f6;
  color: #4b5563;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.herbal-panel .btn-cancel:hover {
  background: #e5e7eb;
}

.herbal-panel .btn-save {
  padding: 10px 24px;
  background: #059669;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.herbal-panel .btn-save:hover:not(:disabled) {
  background: #047857;
}

.herbal-panel .btn-save:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* ==============================================
   공통 모달 드래그 스타일
   ============================================== */

/* 드래그 가능한 헤더 */
.modal-header.draggable {
  cursor: grab;
  user-select: none;
}

.modal-header.draggable:active {
  cursor: grabbing;
}

/* 드래그 중인 모달 */
.modal-content.dragging {
  cursor: grabbing;
  user-select: none;
}

.modal-content.dragging * {
  user-select: none;
}

.modal-content.dragging .modal-header {
  cursor: grabbing;
}

/* ===================================
   수납 2단 레이아웃
   =================================== */

/* 2단 레이아웃 컨테이너 */
.receipt-two-column-layout {
  display: flex;
  gap: 5px;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

/* 왼쪽: 수납 목록 패널 */
/* min-width 계산: columns(356) + gaps(24) + padding(32) + scrollbar(17) = 429px */
.receipt-list-panel {
  flex: 0 0 auto;
  min-width: 430px;
  max-width: 50%;
  overflow: auto;
  display: flex;
  flex-direction: column;
}

/* 리사이즈 핸들 */
.resize-handle {
  flex: 0 0 6px;
  background: #e5e7eb;
  cursor: col-resize;
  position: relative;
  transition: background 0.2s;
}

.resize-handle:hover,
.resize-handle.dragging {
  background: #3b82f6;
}

.resize-handle::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 2px;
  height: 30px;
  background: #9ca3af;
  border-radius: 1px;
}

.resize-handle:hover::after,
.resize-handle.dragging::after {
  background: white;
}

/* 오른쪽 패널 빈 상태 */
.side-panel-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: #9ca3af;
  text-align: center;
  padding: 40px 20px;
}

.side-panel-empty i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.side-panel-empty p {
  font-size: 16px;
  font-weight: 500;
  color: #6b7280;
  margin: 0 0 8px 0;
}

.side-panel-empty span {
  font-size: 13px;
  color: #9ca3af;
}

/* 선택된 행 스타일 */
.receipt-item-2row.selected {
  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%) !important;
  border-left: 3px solid #3b82f6;
}

.receipt-item-2row.selected .receipt-row-1,
.receipt-item-2row.selected .receipt-row-2 {
  background: transparent !important;
}

/* 행에 커서 스타일 추가 */
.receipt-item-2row {
  cursor: pointer;
  transition: background 0.15s ease;
}

.receipt-item-2row:hover:not(.selected) {
  background: #f8fafc;
}

/* 오른쪽: 상세 패널 */
.receipt-detail-side-panel {
  flex: 1;
  min-width: 400px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* 상세 패널 스크롤 영역 */
.side-panel-body {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
}

/* 상세 패널 2단 레이아웃 */
.side-panel-body.side-panel-two-column {
  display: flex;
  gap: 8px;
  padding: 8px;
  overflow: hidden;
}

/* 왼쪽 단: 진료상세내역 */
.side-panel-two-column .detail-column {
  flex: 1;
  min-width: 0;
  background: white;
  border-radius: 8px;
  padding: 4px;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.side-panel-two-column .detail-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  color: #6c757d;
  gap: 8px;
}

.side-panel-two-column .detail-empty i {
  font-size: 32px;
  color: #9ca3af;
}

.side-panel-two-column .detail-empty p {
  margin: 0;
  font-size: 13px;
}

/* 진료상세내역 컨텐츠 (모달 스타일) */
.side-panel-two-column .receipt-detail-content {
  flex: 1;
  overflow-y: auto;
}

.side-panel-two-column .receipt-detail-section {
  margin-bottom: 16px;
}

.side-panel-two-column .receipt-detail-section .section-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  font-weight: 600;
  margin: 0 0 8px 0;
  padding: 6px 10px;
  border-radius: 4px;
}

.side-panel-two-column .receipt-detail-section .section-title.insurance {
  background: #e3f2fd;
  color: #1565c0;
}

.side-panel-two-column .receipt-detail-section .section-title.general {
  background: #fff3e0;
  color: #e65100;
}

/* 급여 항목 2단 그리드 */
.side-panel-two-column .insurance-items-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 4px 8px;
  margin-bottom: 8px;
}

.side-panel-two-column .insurance-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 5px 8px;
  background: #f8f9fa;
  border-radius: 4px;
  font-size: 13px;
}

.side-panel-two-column .insurance-item .item-name {
  color: #374151;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex: 1;
  margin-right: 4px;
}

.side-panel-two-column .insurance-item .item-amount {
  color: #1f2937;
  font-weight: 500;
  font-variant-numeric: tabular-nums;
  flex-shrink: 0;
}

.side-panel-two-column .insurance-total {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  background: #e3f2fd;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 600;
  color: #1565c0;
}

.side-panel-two-column .insurance-total .amount {
  font-variant-numeric: tabular-nums;
}

.side-panel-two-column .receipt-detail-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.side-panel-two-column .receipt-detail-table th,
.side-panel-two-column .receipt-detail-table td {
  padding: 8px 10px;
  border-bottom: 1px solid #e9ecef;
}

.side-panel-two-column .receipt-detail-table th {
  background: #f8f9fa;
  font-weight: 500;
  color: #495057;
  text-align: left;
}

.side-panel-two-column .receipt-detail-table .col-name {
  width: auto;
}

.side-panel-two-column .receipt-detail-table .col-amount {
  width: 120px;
  text-align: right;
  font-variant-numeric: tabular-nums;
}

.side-panel-two-column .receipt-detail-table tfoot .total-row {
  font-weight: 600;
  background: #f8f9fa;
}

.side-panel-two-column .receipt-detail-table tfoot .total-row.general {
  background: #fff3e0;
  color: #e65100;
}

.side-panel-two-column .receipt-detail-table tfoot .total-row td {
  border-bottom: none;
}

.side-panel-two-column .receipt-detail-table tbody tr.clickable-row {
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.side-panel-two-column .receipt-detail-table tbody tr.clickable-row:hover {
  background-color: #fff3e0;
}

.side-panel-two-column .receipt-detail-table tbody tr.clickable-row.active {
  background-color: #fef3c7;
  font-weight: 500;
}

/* 메모 입력 패널 */
.memo-input-panel {
  background: #fffbeb;
  border: 1px solid #fcd34d;
  border-radius: 8px;
  margin-bottom: 12px;
  overflow: hidden;
}

.memo-input-panel.loading {
  padding: 20px;
  text-align: center;
  color: #92400e;
}

.memo-input-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: #fef3c7;
  border-bottom: 1px solid #fcd34d;
}

.memo-input-title {
  font-size: 14px;
  font-weight: 600;
  color: #92400e;
}

.memo-input-title i {
  margin-right: 6px;
}

.memo-input-amount {
  font-weight: 400;
  color: #b45309;
  margin-left: 6px;
}

.memo-input-close {
  background: none;
  border: none;
  color: #92400e;
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  transition: background 0.15s;
}

.memo-input-close:hover {
  background: rgba(0, 0, 0, 0.1);
}

.memo-input-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

.memo-input-action-btn {
  background: none;
  border: none;
  color: #22c55e;
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 4px;
  font-size: 16px;
  transition: all 0.15s;
}

.memo-input-action-btn:hover {
  background: rgba(34, 197, 94, 0.15);
  color: #16a34a;
}

.memo-input-body {
  padding: 10px 12px;
}

/* 탭 버튼 */
.memo-input-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 10px;
}

.memo-input-tabs .tab-btn {
  flex: 1;
  padding: 8px 10px;
  font-size: 13px;
  border: 1px solid #d1d5db;
  background: #fff;
  color: #374151;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.memo-input-tabs .tab-btn:hover {
  background: #f3f4f6;
}

.memo-input-tabs .tab-btn.active {
  background: #f59e0b;
  border-color: #f59e0b;
  color: #fff;
}

.memo-input-content {
  min-height: 60px;
}

/* 일회성 섹션 */
.onetime-section {
  text-align: left;
}

.onetime-desc {
  font-size: 13px;
  color: #6b7280;
  margin-bottom: 10px;
}

/* 약침 종류/갯수 선택 */
.yakchim-type-selector {
  margin-bottom: 12px;
}

.yakchim-type-selector label,
.yakchim-qty-selector label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: #374151;
  margin-bottom: 6px;
}

.yakchim-type-selector .empty-hint {
  font-size: 12px;
  color: #9ca3af;
  margin: 0;
}

.yakchim-type-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.yakchim-type-buttons .type-btn {
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-type-buttons .type-btn:hover {
  background: #e5e7eb;
}

.yakchim-type-buttons .type-btn.active {
  background: #f59e0b;
  color: white;
  border-color: #f59e0b;
}

.yakchim-type-buttons .type-btn .deduct-badge {
  display: inline-block;
  margin-left: 4px;
  padding: 1px 4px;
  font-size: 10px;
  font-weight: 600;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 3px;
}

.yakchim-type-buttons .type-btn.active .deduct-badge {
  background: rgba(255, 255, 255, 0.4);
}

.deduction-info {
  margin-bottom: 12px;
  padding: 8px 12px;
  background: #fef3c7;
  border: 1px solid #fcd34d;
  border-radius: 6px;
  font-size: 12px;
  color: #92400e;
}

.deduction-info i {
  margin-right: 6px;
  color: #f59e0b;
}

.deduction-info strong {
  font-weight: 600;
}

/* 다중 선택된 약침 목록 */
.selected-yakchims {
  margin-bottom: 16px;
  padding: 12px;
  background: #f9fafb;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.selected-yakchims > label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
  margin-bottom: 8px;
}

.selected-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.selected-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
}

.selected-item .item-name {
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  min-width: 60px;
}

.selected-item .item-point {
  font-size: 11px;
  color: #6b7280;
  background: #f3f4f6;
  padding: 2px 6px;
  border-radius: 4px;
}

.selected-item .item-qty-wrap {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-left: auto;
}

.selected-item .item-qty-wrap .qty-btn {
  width: 24px;
  height: 24px;
  font-size: 12px;
}

.selected-item .item-qty-wrap .qty-input {
  width: 40px;
  height: 24px;
  font-size: 12px;
  text-align: center;
}

.selected-item .item-qty-wrap .qty-unit {
  font-size: 11px;
  color: #6b7280;
}

.selected-item .item-subtotal {
  font-size: 12px;
  font-weight: 600;
  color: #f59e0b;
  min-width: 40px;
  text-align: right;
}

.selected-item .btn-remove {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #fee2e2;
  color: #dc2626;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 10px;
}

.selected-item .btn-remove:hover {
  background: #fecaca;
}

.selected-total {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: 8px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #e5e7eb;
}

.selected-total .total-label {
  font-size: 12px;
  color: #6b7280;
}

.selected-total .total-value {
  font-size: 16px;
  font-weight: 700;
  color: #f59e0b;
}

.yakchim-qty-selector {
  margin-bottom: 12px;
}

.qty-input-wrap {
  display: flex;
  align-items: center;
  gap: 6px;
}

.qty-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  cursor: pointer;
}

.qty-btn:hover {
  background: #e5e7eb;
}

.qty-input {
  width: 50px;
  height: 28px;
  text-align: center;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 13px;
}

.qty-input:focus {
  outline: none;
  border-color: #f59e0b;
}

.qty-unit {
  font-size: 13px;
  color: #6b7280;
}

.onetime-summary {
  margin-bottom: 12px;
  text-align: center;
}

.onetime-summary .summary-text {
  font-size: 13px;
  color: #374151;
  margin: 0;
  padding: 8px 12px;
  background: #fffbeb;
  border-radius: 6px;
}

.onetime-summary .summary-text strong {
  color: #f59e0b;
}

.onetime-section .btn-save {
  width: 100%;
}

/* 상비약 검색 */
.medicine-search {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  margin-bottom: 10px;
}

.medicine-search i {
  color: #9ca3af;
  font-size: 14px;
}

.medicine-search .search-input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 13px;
  outline: none;
}

.medicine-search .search-input::placeholder {
  color: #9ca3af;
}

.medicine-search .search-clear {
  border: none;
  background: none;
  color: #9ca3af;
  cursor: pointer;
  padding: 2px 4px;
  font-size: 12px;
}

.medicine-search .search-clear:hover {
  color: #6b7280;
}

/* 패키지/멤버십 리스트 */
.package-list,
.membership-list,
.medicine-list,
.herbal-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 150px;
  overflow-y: auto;
}

.package-item,
.membership-item,
.medicine-item,
.herbal-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 4px;
  font-size: 13px;
}

.medicine-item,
.herbal-item {
  cursor: pointer;
  transition: all 0.15s;
}

.medicine-item:hover,
.herbal-item:hover {
  border-color: #f59e0b;
}

.medicine-item.selected,
.herbal-item.selected {
  background: #fef3c7;
  border-color: #f59e0b;
}

.pkg-name,
.mem-type,
.med-name,
.herbal-name {
  flex: 1;
  font-weight: 500;
  color: #374151;
}

.pkg-count,
.mem-expire,
.med-stock,
.herbal-count {
  color: #6b7280;
  font-size: 11px;
}

/* 액션 버튼 */
.btn-deduct,
.btn-use,
.btn-save,
.btn-process {
  padding: 6px 12px;
  font-size: 13px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-deduct {
  background: #ef4444;
  color: #fff;
}

.btn-deduct:hover:not(:disabled) {
  background: #dc2626;
}

.btn-use {
  background: #3b82f6;
  color: #fff;
}

.btn-use:hover:not(:disabled) {
  background: #2563eb;
}

.btn-save,
.btn-process {
  background: #10b981;
  color: #fff;
  width: 100%;
  padding: 8px;
  margin-top: 8px;
}

.btn-save:hover:not(:disabled),
.btn-process:hover:not(:disabled) {
  background: #059669;
}

.btn-save:disabled,
.btn-process:disabled,
.btn-deduct:disabled,
.btn-use:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 상비약/한약 액션 영역 */
.medicine-action,
.herbal-action {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #e5e7eb;
}

.medicine-action .input-qty,
.herbal-action .input-qty {
  width: 60px;
  padding: 6px 8px;
  font-size: 12px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  text-align: center;
}

.qty-unit {
  font-size: 12px;
  color: #6b7280;
}

.medicine-action .btn-deduct,
.herbal-action .btn-process {
  width: auto;
  margin-top: 0;
  padding: 6px 12px;
}

/* 상비약 수정 모드 */
.edit-current-info {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: #fef3c7;
  border: 1px solid #fcd34d;
  border-radius: 6px;
  margin-bottom: 10px;
  font-size: 13px;
}

.edit-current-info .current-label {
  color: #92400e;
  font-weight: 500;
}

.edit-current-info .current-value {
  color: #78350f;
  font-weight: 600;
}

.medicine-action.edit-mode {
  flex-wrap: wrap;
  gap: 6px;
}

.medicine-action .btn-update {
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.medicine-action .btn-update:hover {
  background: #2563eb;
}

.medicine-action .btn-update:disabled {
  background: #93c5fd;
  cursor: not-allowed;
}

.medicine-action .btn-delete {
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  background: #fee2e2;
  color: #dc2626;
  border: 1px solid #fecaca;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.medicine-action .btn-delete:hover {
  background: #dc2626;
  color: white;
  border-color: #dc2626;
}

.medicine-action .btn-delete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 패키지(통증마일리지) 등록 */
.package-register-section {
  padding: 8px 0;
}

.package-register-section .register-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: #eff6ff;
  border: 1px solid #bfdbfe;
  border-radius: 6px;
  margin-bottom: 12px;
}

.package-register-section .info-label {
  font-size: 13px;
  color: #1e40af;
  font-weight: 500;
}

.package-register-section .info-value {
  font-size: 15px;
  color: #1e3a8a;
  font-weight: 700;
}

.package-register-section .register-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.package-register-section .form-row {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.package-register-section .form-row label {
  font-size: 12px;
  color: #6b7280;
  font-weight: 500;
}

.package-register-section .count-input-wrap {
  display: flex;
  align-items: center;
  gap: 6px;
}

.package-register-section .count-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  font-weight: 500;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.package-register-section .count-btn:hover {
  background: #e5e7eb;
}

.package-register-section .count-input {
  width: 70px;
  height: 32px;
  padding: 0 8px;
  font-size: 14px;
  font-weight: 600;
  text-align: center;
  border: 1px solid #d1d5db;
  border-radius: 6px;
}

.package-register-section .count-unit {
  font-size: 13px;
  color: #6b7280;
  margin-left: 2px;
}

.package-register-section .memo-input {
  width: 100%;
  padding: 8px 10px;
  font-size: 13px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
}

.package-register-section .memo-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.15);
}

.package-register-section .register-action {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #e5e7eb;
}

.package-register-section .btn-register {
  width: 100%;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  color: white;
  background: #3b82f6;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.package-register-section .btn-register:hover {
  background: #2563eb;
}

.package-register-section .btn-register:disabled {
  background: #93c5fd;
  cursor: not-allowed;
}

/* 멤버십 수정 모드 */
.membership-edit-section {
  padding: 8px 0;
}

.membership-edit-info {
  background: #f0fdf4;
  border: 1px solid #86efac;
  border-radius: 6px;
  padding: 10px 12px;
  margin-bottom: 10px;
}

.membership-edit-info .info-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0;
  font-size: 13px;
}

.membership-edit-info .info-row .label {
  color: #166534;
  font-weight: 500;
  min-width: 60px;
}

.membership-edit-info .info-row .value {
  color: #15803d;
  font-weight: 600;
}

.membership-edit-info .info-row .value.expire {
  color: #ea580c;
}

.membership-edit-info .info-row .value.status-active {
  color: #059669;
}

.membership-edit-info .info-row .value.status-expired {
  color: #dc2626;
}

.membership-edit-form {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  padding: 12px;
  margin-bottom: 12px;
}

.membership-edit-form .form-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.membership-edit-form .form-row label {
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  min-width: 50px;
}

.membership-edit-form .form-row input[type="text"] {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
}

.membership-edit-form .form-row input[type="text"]:focus {
  outline: none;
  border-color: #3b82f6;
}

.membership-edit-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.membership-edit-actions .btn-update {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  background: #3b82f6;
  color: white;
  border: 1px solid #3b82f6;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.membership-edit-actions .btn-update:hover {
  background: #2563eb;
  border-color: #2563eb;
}

.membership-edit-actions .btn-update:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.membership-edit-actions .btn-delete {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  background: #fee2e2;
  color: #dc2626;
  border: 1px solid #fecaca;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.membership-edit-actions .btn-delete:hover {
  background: #dc2626;
  color: white;
  border-color: #dc2626;
}

.membership-edit-actions .btn-delete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 패키지 수정 모드 */
.package-edit-section {
  padding: 8px 0;
}

.package-edit-info {
  background: #eff6ff;
  border: 1px solid #bfdbfe;
  border-radius: 6px;
  padding: 10px 12px;
  margin-bottom: 10px;
}

.package-edit-info .info-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0;
  font-size: 13px;
}

.package-edit-info .info-row .label {
  color: #1e40af;
  font-weight: 500;
  min-width: 60px;
}

.package-edit-info .info-row .value {
  color: #1e3a8a;
  font-weight: 600;
}

.package-edit-info .info-row .value.highlight {
  color: #059669;
  font-size: 14px;
}

.package-edit-info .info-row .value.status-active {
  color: #059669;
}

.package-edit-info .info-row .value.status-completed {
  color: #6b7280;
}

.package-edit-info .info-row .value.status-expired {
  color: #dc2626;
}

.package-edit-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.package-edit-actions .btn-delete {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  background: #fee2e2;
  color: #dc2626;
  border: 1px solid #fecaca;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.package-edit-actions .btn-delete:hover {
  background: #dc2626;
  color: white;
  border-color: #dc2626;
}

.package-edit-actions .btn-delete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 패키지 수정 버튼 */
.package-edit-actions .btn-update {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  background: #dbeafe;
  color: #2563eb;
  border: 1px solid #93c5fd;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.package-edit-actions .btn-update:hover {
  background: #2563eb;
  color: white;
  border-color: #2563eb;
}

.package-edit-actions .btn-update:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 패키지 횟수 수정 */
.package-edit-info .info-row.editable {
  background: #fefce8;
  margin: 4px -8px;
  padding: 8px;
  border-radius: 6px;
}

.count-edit-wrap {
  display: flex;
  align-items: center;
  gap: 4px;
}

.count-edit-wrap .count-btn {
  width: 28px;
  height: 28px;
  padding: 0;
  font-size: 16px;
  font-weight: 600;
  background: white;
  color: #1e40af;
  border: 1px solid #bfdbfe;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
}

.count-edit-wrap .count-btn:hover:not(:disabled) {
  background: #dbeafe;
  border-color: #60a5fa;
}

.count-edit-wrap .count-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.count-edit-wrap .count-input {
  width: 50px;
  padding: 4px 6px;
  font-size: 14px;
  font-weight: 600;
  text-align: center;
  border: 1px solid #bfdbfe;
  border-radius: 4px;
  background: white;
  color: #1e40af;
}

.count-edit-wrap .count-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.count-edit-wrap .count-unit {
  font-size: 13px;
  color: #1e40af;
  font-weight: 500;
  margin-left: 2px;
}

/* 횟수 변경 표시 */
.change-indicator {
  font-size: 11px;
  font-weight: 400;
  color: #ea580c;
  margin-left: 6px;
}

/* 사용목적 선택 */
.purpose-selector {
  margin-top: 10px;
  padding: 8px 0;
  border-top: 1px solid #e5e7eb;
}

.purpose-selector label {
  display: block;
  font-size: 11px;
  color: #6b7280;
  margin-bottom: 6px;
}

.purpose-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.purpose-btn {
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 500;
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.purpose-btn:hover {
  background: #e5e7eb;
}

.purpose-btn.active {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
}

/* 멤버십 등록 섹션 */
.membership-register-section {
  padding: 8px 0;
}

.membership-register-section .register-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: #dbeafe;
  border: 1px solid #93c5fd;
  border-radius: 6px;
  margin-bottom: 12px;
}

.membership-register-section .info-label {
  font-size: 13px;
  color: #1e40af;
  font-weight: 500;
}

.membership-register-section .info-value {
  font-size: 15px;
  color: #1e3a8a;
  font-weight: 700;
}

.membership-register-section .register-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.membership-register-section .form-row {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.membership-register-section .form-row label {
  font-size: 12px;
  color: #6b7280;
  font-weight: 500;
}

.membership-type-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.membership-type-buttons .type-btn {
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 500;
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.membership-type-buttons .type-btn:hover {
  background: #e5e7eb;
}

.membership-type-buttons .type-btn.active {
  background: #2563eb;
  color: white;
  border-color: #2563eb;
}

.package-type-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.package-type-buttons .type-btn {
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 500;
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.package-type-buttons .type-btn:hover {
  background: #e5e7eb;
}

.package-type-buttons .type-btn.active {
  background: #059669;
  color: white;
  border-color: #059669;
}

.period-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.period-buttons .period-btn {
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  background: #f3f4f6;
  color: #374151;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.period-buttons .period-btn:hover {
  background: #e5e7eb;
}

.period-buttons .period-btn.active {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
}

.date-display {
  font-size: 13px;
  color: #374151;
  padding: 6px 10px;
  background: #f9fafb;
  border-radius: 4px;
}

.date-display.expire {
  color: #1e40af;
  font-weight: 600;
  background: #eff6ff;
}

.membership-register-section .memo-input {
  width: 100%;
  padding: 8px 10px;
  font-size: 13px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
}

.membership-register-section .memo-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.15);
}

.membership-register-section .register-action {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #e5e7eb;
}

.membership-register-section .btn-register {
  width: 100%;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  color: white;
  background: #2563eb;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.membership-register-section .btn-register:hover {
  background: #1d4ed8;
}

.membership-register-section .btn-register:disabled {
  background: #93c5fd;
  cursor: not-allowed;
}

/* CS 설정 모달 */
.cs-settings-modal {
  width: 480px;
  max-width: 90vw;
}

.cs-settings-modal .settings-section {
  margin-bottom: 20px;
}

.cs-settings-modal .settings-section h3 {
  font-size: 14px;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 4px;
}

.cs-settings-modal .section-desc {
  font-size: 12px;
  color: #6b7280;
  margin-bottom: 12px;
}

.cs-settings-modal .purpose-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 12px;
}

.cs-settings-modal .purpose-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
}

.cs-settings-modal .purpose-name {
  font-size: 13px;
  color: #374151;
}

.cs-settings-modal .purpose-actions {
  display: flex;
  gap: 4px;
}

.cs-settings-modal .purpose-actions .action-btn {
  padding: 4px 8px;
  font-size: 11px;
  background: #ffffff;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  cursor: pointer;
  color: #6b7280;
  transition: all 0.15s;
}

.cs-settings-modal .purpose-actions .action-btn:hover:not(:disabled) {
  background: #f3f4f6;
  color: #374151;
}

.cs-settings-modal .purpose-actions .action-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.cs-settings-modal .purpose-actions .action-btn.delete:hover:not(:disabled) {
  background: #fee2e2;
  border-color: #fecaca;
  color: #dc2626;
}

.cs-settings-modal .add-purpose {
  display: flex;
  gap: 8px;
}

.cs-settings-modal .input-new-purpose {
  flex: 1;
  padding: 8px 12px;
  font-size: 13px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
}

.cs-settings-modal .input-new-purpose:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.cs-settings-modal .btn-add {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.cs-settings-modal .btn-add:hover:not(:disabled) {
  background: #2563eb;
}

.cs-settings-modal .btn-add:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.cs-settings-modal .loading-state {
  text-align: center;
  padding: 40px;
  color: #6b7280;
}

.cs-settings-modal .error-message {
  padding: 10px 12px;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 6px;
  font-size: 13px;
  margin-bottom: 16px;
}

/* 메모 종류 아이템 */
.cs-settings-modal .memo-type-item {
  gap: 10px;
}

.cs-settings-modal .memo-type-color {
  width: 28px;
  height: 28px;
  padding: 0;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  cursor: pointer;
  flex-shrink: 0;
}

.cs-settings-modal .memo-type-color::-webkit-color-swatch-wrapper {
  padding: 2px;
}

.cs-settings-modal .memo-type-color::-webkit-color-swatch {
  border: none;
  border-radius: 2px;
}

.cs-settings-modal .memo-type-add {
  align-items: center;
}

.cs-settings-modal .memo-type-item .purpose-name {
  flex: 1;
  font-weight: 500;
}

/* 설정 버튼 (헤더용) */
.settings-btn {
  padding: 6px 12px;
  font-size: 12px;
  background: #f3f4f6;
  color: #6b7280;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  gap: 4px;
}

.settings-btn:hover {
  background: #e5e7eb;
  color: #374151;
}

/* 한약 액션 버튼 */
.herbal-actions {
  display: flex;
  gap: 4px;
  margin-bottom: 10px;
}

.herbal-actions .action-btn {
  flex: 1;
  padding: 6px 8px;
  font-size: 12px;
  border: 1px solid #d1d5db;
  background: #fff;
  color: #374151;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.herbal-actions .action-btn:hover {
  background: #f3f4f6;
}

.herbal-actions .action-btn.active {
  background: #10b981;
  border-color: #10b981;
  color: #fff;
}

/* 일반 메모 입력 */
.general-section .memo-textarea {
  width: 100%;
  padding: 10px;
  font-size: 13px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  resize: vertical;
  min-height: 60px;
}

.general-section .memo-textarea:focus {
  outline: none;
  border-color: #f59e0b;
}

/* 빈 상태 메시지 */
.memo-input-panel .empty-msg {
  text-align: center;
  color: #9ca3af;
  font-size: 12px;
  padding: 16px 0;
}

.side-panel-two-column .receipt-detail-grand-total {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 12px;
  background: #e5e7eb;
  color: #1f2937;
  border-radius: 6px;
  margin-top: 10px;
}

.side-panel-two-column .receipt-detail-grand-total .label {
  font-size: 14px;
  font-weight: 500;
}

.side-panel-two-column .receipt-detail-grand-total .amount {
  font-size: 17px;
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}

/* 오른쪽 단: 수납정보 + 메모 */
.side-panel-two-column .info-column {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
  overflow-y: auto;
}

/* 수납 금액 요약 */
.side-panel-two-column .amount-summary {
  background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
  border-radius: 8px;
  padding: 10px;
  color: white;
}

.side-panel-two-column .amount-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 0;
  font-size: 13px;
}

.side-panel-two-column .amount-row.total {
  font-size: 15px;
  font-weight: 700;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.side-panel-two-column .amount-row .label {
  opacity: 0.9;
}

.side-panel-two-column .amount-row .value {
  font-weight: 600;
}

/* 메모 섹션 */
.side-panel-two-column .memo-section {
  background: #f8fafc;
  border-radius: 8px;
  padding: 10px;
}

.side-panel-two-column .memo-section .memo-tags-wrapper {
  margin-top: 6px;
}

.side-panel-two-column .memo-section .no-memo {
  color: #9ca3af;
  font-size: 12px;
}

.side-panel-two-column .memo-section .custom-memo {
  margin-top: 8px;
  padding: 10px 12px;
  background: white;
  border-radius: 6px;
  font-size: 14px;
  color: #374151;
  display: flex;
  align-items: flex-start;
  gap: 8px;
  cursor: pointer;
  transition: all 0.15s;
  border: 1px solid transparent;
}

.side-panel-two-column .memo-section .custom-memo:hover {
  background: #f8fafc;
  border-color: #e5e7eb;
}

.side-panel-two-column .memo-section .custom-memo .memo-emoji {
  font-size: 16px;
}

.side-panel-two-column .memo-section .custom-memo .memo-text {
  flex: 1;
  line-height: 1.4;
}

.side-panel-two-column .memo-section .custom-memo i {
  color: #3b82f6;
  margin-top: 2px;
}

/* ============================================ */
/* 메모 3단 구성: 오늘메모 / 메모입력 / 이전메모    */
/* ============================================ */

/* 공통 섹션 타이틀 */
.side-panel-two-column .info-column .section-title {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 0 0 8px 0;
  font-size: 15px;
  font-weight: 600;
  color: #374151;
}

.side-panel-two-column .info-column .section-title i {
  font-size: 14px;
  color: #6b7280;
}

/* ─── 인라인 수납이력 (오른쪽 단) ─── */
.inline-receipt-history {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

.irh-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 8px;
  background: #f8fafc;
  border-bottom: 1px solid #e5e7eb;
  flex-shrink: 0;
}

.irh-period-filters {
  display: flex;
  gap: 2px;
}

.irh-period-btn {
  padding: 3px 8px;
  font-size: 13px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: white;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.15s;
}

.irh-period-btn:hover {
  background: #f3f4f6;
}

.irh-period-btn.active {
  background: #2563eb;
  color: white;
  border-color: #2563eb;
}

.irh-summary {
  font-size: 13px;
  color: #6b7280;
  white-space: nowrap;
}

.irh-summary strong {
  color: #1e40af;
}

.irh-body {
  flex: 1;
  overflow-y: auto;
  padding: 4px 0;
}

.irh-loading,
.irh-error,
.irh-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 24px;
  color: #9ca3af;
  font-size: 14px;
}

.irh-error {
  color: #ef4444;
}

.irh-list {
  display: flex;
  flex-direction: column;
}

.irh-item {
  padding: 6px 10px;
  border-bottom: 1px solid #f3f4f6;
  transition: background 0.15s;
}

.irh-item.clickable {
  cursor: pointer;
}

.irh-item.clickable:hover {
  background: #f0f7ff;
}

.irh-item.current {
  background: #eff6ff;
  border-left: 3px solid #2563eb;
}

.irh-item-main {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
}

.irh-date {
  font-weight: 600;
  color: #374151;
  min-width: 42px;
}

.irh-doctor {
  font-size: 11px;
  font-weight: 600;
  color: #6b7280;
}

.irh-amount {
  font-weight: 600;
  color: #1e40af;
  min-width: 60px;
  text-align: right;
}

.irh-methods {
  display: flex;
  gap: 3px;
  color: #9ca3af;
  font-size: 12px;
}

.irh-self {
  font-size: 12px;
  color: #6b7280;
}

.irh-general {
  font-size: 12px;
  color: #ea580c;
}

.irh-item-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 3px;
  margin-top: 3px;
}

.irh-badge {
  display: inline-block;
  padding: 1px 5px;
  border-radius: 3px;
  font-size: 12px;
  line-height: 1.4;
}

.irh-badge.consult-first {
  background: #fce7f3;
  color: #be185d;
}

.irh-badge.consult-return {
  background: #e0e7ff;
  color: #4338ca;
}

.irh-badge.buhang {
  background: #f3f4f6;
  color: #4b5563;
}

.irh-badge.chuna {
  background: #d1fae5;
  color: #065f46;
}

.irh-badge.covered {
  background: #dbeafe;
  color: #1e40af;
}

.irh-badge.uncovered {
  background: #fef3c7;
  color: #92400e;
}

.irh-badge.empty {
  color: #d1d5db;
}

.irh-item-memo {
  margin-top: 3px;
  font-size: 12px;
  color: #6b7280;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  gap: 4px;
}

.irh-item-memo i {
  font-size: 10px;
  color: #9ca3af;
  flex-shrink: 0;
}

.irh-footer {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 6px;
  border-top: 1px solid #e5e7eb;
  flex-shrink: 0;
}

.irh-page-btn {
  padding: 3px 8px;
  font-size: 13px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: white;
  cursor: pointer;
}

.irh-page-btn:disabled {
  opacity: 0.4;
  cursor: default;
}

.irh-page-info {
  font-size: 13px;
  color: #6b7280;
}

/* 상세수납 모달 내부 - 당일진료상세 스타일 적용 */
.receipt-detail-modal .detail-modal-body .treatment-items {
  padding: 12px 16px;
  border-bottom: 1px solid #e5e7eb;
}

.receipt-detail-modal .detail-modal-body .receipt-amount-section {
  padding: 12px 16px;
  border-bottom: 1px solid #e5e7eb;
}

.treatment-extra.uncovered-item {
  color: #b45309;
  font-size: 13px;
}

.irh-modal-memo {
  padding: 10px 16px;
  font-size: 15px;
  color: #374151;
  background: #fffbeb;
  border-bottom: 1px solid #e5e7eb;
  white-space: pre-wrap;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.irh-modal-memo i {
  color: #d97706;
  margin-top: 2px;
  flex-shrink: 0;
}

.irh-modal-nav {
  padding: 12px 16px;
  text-align: center;
}

.irh-modal-nav-btn {
  background: #3B82F6;
  color: white;
  border: none;
  border-radius: 6px;
  padding: 8px 20px;
  font-size: 13px;
  cursor: pointer;
  font-weight: 500;
}

.irh-modal-nav-btn:hover {
  background: #2563eb;
}

/* 패키지 관리 모달 */
.pkg-manage-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}
.pkg-manage-modal {
  background: white;
  border-radius: 12px;
  width: 420px;
  max-width: 95vw;
  max-height: 85vh;
  min-height: 500px;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}
.pkg-manage-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 18px;
  border-bottom: 1px solid #e5e7eb;
  border-radius: 12px 12px 0 0;
}
.pkg-manage-header h4 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
}
.pkg-manage-header .btn-close {
  background: transparent;
  border: none;
  padding: 6px;
  cursor: pointer;
  color: #6b7280;
  font-size: 16px;
  border-radius: 6px;
}
.pkg-manage-header .btn-close:hover {
  background: #fee2e2;
  color: #dc2626;
}
/* 타입별 헤더 색상 */
.pkg-manage-header.herbal {
  background: #f0fdf4;
  border-bottom-color: #bbf7d0;
}
.pkg-manage-header.herbal h4 {
  color: #166534;
}
.pkg-manage-header.nokryong {
  background: #fffbeb;
  border-bottom-color: #fde68a;
}
.pkg-manage-header.nokryong h4 {
  color: #92400e;
}
.pkg-manage-header.treatment {
  background: #eef2ff;
  border-bottom-color: #c7d2fe;
}
.pkg-manage-header.treatment h4 {
  color: #3730a3;
}
.pkg-manage-header.membership {
  background: #fef2f2;
  border-bottom-color: #fecaca;
}
.pkg-manage-header.membership h4 {
  color: #991b1b;
}
.pkg-manage-body {
  padding: 12px;
  overflow-y: auto;
  flex: 1;
}
.pkg-manage-empty {
  padding: 24px;
  text-align: center;
  color: #9ca3af;
  font-size: 14px;
}
.pkg-manage-item {
  padding: 12px;
  background: #f9fafb;
  border-radius: 8px;
  margin-bottom: 8px;
  transition: opacity 0.2s, background 0.2s;
}
.pkg-manage-item:last-child {
  margin-bottom: 0;
}
.pkg-manage-item.deleted {
  opacity: 0.5;
  background: #fef2f2;
}
.pkg-manage-item.completed {
  opacity: 0.6;
  background: #f9fafb;
}
.pkg-manage-item .pkg-hover-delete {
  opacity: 0;
  transition: opacity 0.15s;
}
.pkg-manage-item:hover .pkg-hover-delete {
  opacity: 1;
}
.pkg-manage-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}
.pkg-manage-item.deleted .pkg-manage-item-header {
  margin-bottom: 0;
}
.pkg-manage-item-info {
  display: flex;
  align-items: center;
  gap: 8px;
}
.pkg-manage-item.deleted .pkg-manage-item-name {
  text-decoration: line-through;
  color: #9ca3af;
}
.btn-delete {
  width: 28px;
  height: 28px;
  background: transparent;
  border: 1px solid #fca5a5;
  border-radius: 6px;
  color: #ef4444;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  justify-content: center;
}
.btn-delete:hover {
  background: #fee2e2;
  border-color: #ef4444;
}
.btn-delete.restore {
  border-color: #86efac;
  color: #22c55e;
}
.btn-delete.restore:hover {
  background: #dcfce7;
  border-color: #22c55e;
}
.pkg-manage-item-deleted-msg {
  margin-top: 8px;
  padding: 6px 10px;
  background: #fecaca;
  border-radius: 6px;
  font-size: 12px;
  color: #991b1b;
  text-align: center;
}
.pkg-manage-item-name {
  font-weight: 600;
  color: #1f2937;
  font-size: 14px;
}
.pkg-manage-item-total {
  font-size: 12px;
  color: #6b7280;
}
/* 멤버십 날짜 입력 */
.pkg-manage-date-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}
.pkg-manage-date-row label {
  font-size: 13px;
  color: #6b7280;
  min-width: 45px;
}
.pkg-manage-date-row input[type="date"] {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
  color: #1f2937;
}
.pkg-manage-date-row input[type="date"]:focus {
  outline: none;
  border-color: #ef4444;
  box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.1);
}
.pkg-manage-item-controls {
  display: flex;
  align-items: center;
  gap: 6px;
}
.pkg-manage-item-label {
  font-size: 13px;
  color: #6b7280;
  margin-right: 4px;
}
.pkg-manage-item-controls .btn-adjust {
  width: 32px;
  height: 32px;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 500;
  color: #374151;
  cursor: pointer;
  transition: all 0.15s;
}
.pkg-manage-item-controls .btn-adjust:hover {
  background: #f3f4f6;
  border-color: #9ca3af;
}
.pkg-manage-item-controls input {
  width: 50px;
  height: 32px;
  padding: 0 8px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 15px;
  font-weight: 600;
  text-align: center;
  color: #1f2937;
  -moz-appearance: textfield;
}
.pkg-manage-item-controls input::-webkit-outer-spin-button,
.pkg-manage-item-controls input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.pkg-manage-item-controls input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}
.pkg-manage-item-unit {
  font-size: 13px;
  color: #6b7280;
}
.pkg-manage-item-change {
  margin-top: 8px;
  padding: 6px 10px;
  background: #fef3c7;
  border-radius: 6px;
  font-size: 13px;
  color: #92400e;
  text-align: center;
}
.pkg-manage-item-change .increase {
  color: #059669;
  font-weight: 600;
  margin-left: 6px;
}
.pkg-manage-item-change .decrease {
  color: #dc2626;
  font-weight: 600;
  margin-left: 6px;
}

/* 패키지 히스토리 섹션 (모달 하단) */
.pkg-manage-history-section {
  padding: 12px 18px;
  border-top: 1px solid #e5e7eb;
  background: #f9fafb;
  flex: 1;
  min-height: 150px;
  max-height: 250px;
  overflow-y: auto;
}
.pkg-history-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  font-size: 14px;
  font-weight: 600;
  color: #374151;
}
.pkg-history-section-header i {
  color: #6b7280;
}
.pkg-history-loading,
.pkg-history-empty {
  padding: 24px 16px;
  text-align: center;
  color: #9ca3af;
  font-size: 13px;
}
.pkg-history-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.pkg-history-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: white;
  border-radius: 6px;
  font-size: 12px;
  flex-wrap: wrap;
}
.pkg-history-item.add {
  background: #f0fdf4;
  border: 1px solid #bbf7d0;
}
.pkg-history-item.usage {
  background: #fefce8;
  border: 1px solid #fde68a;
}
.pkg-history-date {
  color: #6b7280;
  min-width: 80px;
}
.pkg-history-badge {
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
}
.pkg-history-badge.add {
  background: #22c55e;
  color: white;
}
.pkg-history-badge.usage {
  background: #f59e0b;
  color: white;
}
.pkg-history-badge.edit {
  background: #3b82f6;
  color: white;
}
.pkg-history-label {
  font-weight: 500;
  color: #1f2937;
  flex: 1;
}
.pkg-history-deduction {
  color: #dc2626;
  font-weight: 600;
}
.pkg-history-remaining {
  color: #6b7280;
  font-size: 11px;
}

.pkg-manage-footer {
  display: flex;
  gap: 8px;
  padding: 12px 18px;
  border-top: 1px solid #e5e7eb;
}
.pkg-manage-footer .btn-cancel {
  flex: 1;
  padding: 10px;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: #6b7280;
  cursor: pointer;
}
.pkg-manage-footer .btn-cancel:hover {
  background: #f3f4f6;
}
.pkg-manage-footer .btn-save {
  flex: 1;
  padding: 10px;
  background: #3b82f6;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  color: white;
  cursor: pointer;
}
.pkg-manage-footer .btn-save:hover {
  background: #2563eb;
}
.pkg-manage-footer .btn-save:disabled {
  background: #9ca3af;
  cursor: not-allowed;
}

/* 1. 오늘메모 섹션 */
.side-panel-two-column .today-memo-section {
  background: #f0fdf4;
  border-radius: 8px;
  padding: 10px;
  border: 1px solid #bbf7d0;
}

.side-panel-two-column .today-memo-section .section-title {
  color: #166534;
}

.side-panel-two-column .today-memo-section .section-title i {
  color: #22c55e;
}

.side-panel-two-column .today-memo-section .memo-tags-wrapper {
  margin-bottom: 6px;
}

.side-panel-two-column .today-memo-section .memo-tag-list {
  flex-wrap: wrap;
  overflow: visible;
  height: auto;
}

.side-panel-two-column .today-memo-section .section-title-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.side-panel-two-column .today-memo-section .section-title-row .section-title {
  margin-bottom: 0;
}

.side-panel-two-column .today-memo-section .add-memo-btn {
  width: 18px;
  height: 18px;
  border: none;
  background: #22c55e;
  color: white;
  border-radius: 3px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  transition: all 0.15s;
}

.side-panel-two-column .today-memo-section .add-memo-btn:hover {
  background: #16a34a;
}

.side-panel-two-column .today-memo-section .custom-memo {
  padding: 10px 12px;
  background: white;
  border-radius: 6px;
  font-size: 14px;
  color: #374151;
  display: flex;
  align-items: flex-start;
  gap: 8px;
  cursor: pointer;
  transition: all 0.15s;
  border: 1px solid transparent;
}

.side-panel-two-column .today-memo-section .custom-memo:hover {
  background: #f8fafc;
  border-color: #22c55e;
}

.side-panel-two-column .today-memo-section .custom-memo .memo-emoji {
  font-size: 16px;
}

.side-panel-two-column .today-memo-section .custom-memo .memo-text {
  flex: 1;
  line-height: 1.4;
}

.side-panel-two-column .today-memo-section .custom-memo.editing {
  padding: 6px 8px;
}

.side-panel-two-column .today-memo-section .custom-memo .memo-edit-input {
  flex: 1;
  padding: 6px 10px;
  font-size: 14px;
  border: 1px solid #22c55e;
  border-radius: 4px;
  outline: none;
  background: white;
}

.side-panel-two-column .today-memo-section .custom-memo .memo-edit-input:focus {
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
}

.side-panel-two-column .today-memo-section .custom-memo .memo-delete-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: #fee2e2;
  color: #dc2626;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  transition: all 0.15s;
  flex-shrink: 0;
}

.side-panel-two-column .today-memo-section .custom-memo .memo-delete-btn:hover {
  background: #dc2626;
  color: white;
}

.side-panel-two-column .today-memo-section .no-memo {
  color: #9ca3af;
  font-size: 12px;
}

.side-panel-two-column .today-memo-section .today-memo-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* 2. 메모입력 섹션 */
.side-panel-two-column .memo-input-section {
  background: #fffbeb;
  border-radius: 8px;
  padding: 8px;
  border: 1px solid #fcd34d;
}

/* 3. 이전메모 섹션 */
.side-panel-two-column .history-memo-section {
  background: #f8fafc;
  border-radius: 8px;
  padding: 10px;
  border: 1px solid #e5e7eb;
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.side-panel-two-column .history-memo-section .section-title {
  color: #6b7280;
}

.side-panel-two-column .history-memo-section .section-title i {
  color: #9ca3af;
}

.side-panel-two-column .history-memo-list {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.side-panel-two-column .history-memo-item {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px;
  background: white;
  border-radius: 6px;
  font-size: 13px;
}

.side-panel-two-column .history-memo-item .history-date {
  color: #6b7280;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  min-width: 75px;
}

.side-panel-two-column .history-memo-item .history-memo-text {
  flex: 1;
  color: #374151;
  display: flex;
  align-items: flex-start;
  gap: 4px;
}

.side-panel-two-column .history-memo-item .memo-emoji {
  font-size: 14px;
}

.side-panel-two-column .history-memo-section .no-memo {
  color: #9ca3af;
  font-size: 12px;
  text-align: center;
  padding: 16px;
}

/* 상태 섹션 */
.side-panel-two-column .status-section {
  background: #f8fafc;
  border-radius: 8px;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.side-panel-two-column .status-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.side-panel-two-column .status-row .section-label {
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
  width: 32px;
}

/* 액션 버튼 */
.side-panel-two-column .action-buttons {
  display: flex;
  gap: 6px;
  margin-top: auto;
  padding-top: 8px;
}

.side-panel-two-column .action-buttons .action-btn {
  flex: 1;
  padding: 8px 6px;
  border: none;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  transition: all 0.15s;
}

.side-panel-two-column .action-buttons .action-btn.memo {
  background: #dbeafe;
  color: #1e40af;
}

.side-panel-two-column .action-buttons .action-btn.memo:hover {
  background: #bfdbfe;
}

.side-panel-two-column .action-buttons .action-btn.reservation {
  background: #dcfce7;
  color: #166534;
}

.side-panel-two-column .action-buttons .action-btn.reservation:hover {
  background: #bbf7d0;
}

.side-panel-two-column .action-buttons .action-btn.history {
  background: #e5e7eb;
  color: #374151;
}

.side-panel-two-column .action-buttons .action-btn.history:hover {
  background: #d1d5db;
}

/* 상세 패널 헤더 (한 줄) */
.side-panel-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #e5e7eb;
  color: #1f2937;
}

.side-panel-header .patient-info {
  display: flex;
  align-items: center;
  gap: 6px;
}

/* 전체이력 버튼 */
.side-panel-header .patient-info .timeline-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  margin-left: 6px;
  background: #e0e7ff;
  border: none;
  border-radius: 6px;
  color: #4f46e5;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.15s;
}

.side-panel-header .patient-info .timeline-btn:hover {
  background: #c7d2fe;
  color: #4338ca;
}

.side-panel-header .header-status {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* 헤더 패키지 배지 */
.side-panel-header .header-packages {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-left: auto;
}

.side-panel-header .header-pkg-badge {
  padding: 5px 10px;
  border-radius: 4px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}

.side-panel-header .header-pkg-badge.herbal {
  background: #dcfce7;
  color: #16a34a;
}
.side-panel-header .header-pkg-badge.herbal:hover {
  background: #bbf7d0;
}

.side-panel-header .header-pkg-badge.nokryong {
  background: #fef3c7;
  color: #d97706;
}
.side-panel-header .header-pkg-badge.nokryong:hover {
  background: #fde68a;
}

.side-panel-header .header-pkg-badge.treatment {
  background: #cffafe;
  color: #0891b2;
}
.side-panel-header .header-pkg-badge.treatment:hover {
  background: #a5f3fc;
}

.side-panel-header .header-pkg-badge.membership {
  background: #fee2e2;
  color: #dc2626;
}
.side-panel-header .header-pkg-badge.membership:hover {
  background: #fecaca;
}

/* 패키지 추가 버튼 */
.side-panel-header .header-pkg-add-btns {
  display: flex;
  gap: 2px;
}

.side-panel-header .pkg-add-btn {
  padding: 3px 10px;
  height: 28px;
  border: 1px solid;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}

.side-panel-header .pkg-add-btn.herbal {
  background: #f0fdf4;
  border-color: #86efac;
  color: #22c55e;
}
.side-panel-header .pkg-add-btn.herbal:hover {
  background: #22c55e;
  color: white;
}

.side-panel-header .pkg-add-btn.nokryong {
  background: #fffbeb;
  border-color: #fcd34d;
  color: #f59e0b;
}
.side-panel-header .pkg-add-btn.nokryong:hover {
  background: #f59e0b;
  color: white;
}

.side-panel-header .pkg-add-btn.treatment {
  background: #ecfeff;
  border-color: #67e8f9;
  color: #0891b2;
}
.side-panel-header .pkg-add-btn.treatment:hover {
  background: #0891b2;
  color: white;
}

.side-panel-header .pkg-add-btn.membership {
  background: #fef2f2;
  border-color: #fca5a5;
  color: #ef4444;
}
.side-panel-header .pkg-add-btn.membership:hover {
  background: #ef4444;
  color: white;
}

.side-panel-header .status-badge {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 4px;
  font-size: 12px;
  background: #f3f4f6;
  color: #4b5563;
  border: none;
}

/* 예약 상태 배지 */
.side-panel-header .status-badge.reservation {
  padding: 0;
  background: transparent;
}

.side-panel-header .status-badge.reservation .reservation-status.confirmed {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  background: #dbeafe;
  color: #1e40af;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
}

.side-panel-header .status-badge.reservation .reservation-status.confirmed::before {
  content: '\f073';
  font-family: 'Font Awesome 6 Free';
  font-weight: 900;
  font-size: 14px;
}

.side-panel-header .status-badge.reservation .reservation-btn.empty {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  background: #f3f4f6;
  color: #6b7280;
  border: 1px dashed #d1d5db;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.side-panel-header .status-badge.reservation .reservation-btn.empty:hover {
  background: #e5e7eb;
  border-color: #9ca3af;
}

/* 완료 상태 배지 */
.side-panel-header .side-panel-total {
  font-size: 15px;
  font-weight: 800;
  color: #1e293b;
  margin-left: 8px;
}

.side-panel-header .side-panel-receipt-btn {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  margin-left: 8px;
  padding: 6px 14px;
  background: #f3f4f6;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
  color: #4b5563;
}
.side-panel-header .side-panel-receipt-btn i {
  font-size: 11px;
  color: #9ca3af;
}
.side-panel-header .side-panel-doctor {
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
  padding: 1px 6px;
  background: #f3f4f6;
  border-radius: 4px;
  margin-left: 6px;
}

.insurance-self-inline,
.general-total-inline {
  margin-left: auto;
  font-size: 14px;
  font-weight: 700;
}
.insurance-self-inline { color: #1e40af; }
.general-total-inline { color: #f59e0b; }

.side-panel-etc-memo {
  padding: 8px 12px;
  margin-bottom: 6px;
  background: #fffbeb;
}
.side-panel-etc-memo .etc-memo-label {
  font-size: 11px;
  font-weight: 700;
  color: #92400e;
  margin-bottom: 4px;
  display: flex;
  align-items: center;
  gap: 4px;
}
.side-panel-etc-memo .etc-memo-content {
  font-size: 14px;
  color: #78350f;
  margin: 0;
  white-space: pre-wrap;
  word-break: break-word;
  font-family: inherit;
  overflow-y: auto;
  line-height: 1.4;
}

.side-panel-header .status-badge.insurance-btn {
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 700;
  border-radius: 6px;
  cursor: pointer;
  border: 1px solid #bfdbfe;
  background: #eff6ff;
  color: #2563eb;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  gap: 4px;
}
.side-panel-header .status-badge.insurance-btn:hover {
  background: #dbeafe;
  border-color: #93c5fd;
}

.side-panel-header .status-badge.complete {
  padding: 6px 14px;
  font-size: 14px;
  font-weight: 600;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.side-panel-header .status-badge.complete:hover {
  background: #d1d5db;
}

.side-panel-header .status-badge.complete.completed {
  background: #dcfce7;
  color: #166534;
}

.side-panel-header .header-actions {
  display: flex;
  gap: 4px;
  margin-left: auto;
}

.side-panel-header .header-btn {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #e5e7eb;
  border: none;
  border-radius: 6px;
  color: #4b5563;
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: 18px;
}

.side-panel-header .header-btn:hover {
  background: #d1d5db;
  color: #1f2937;
}

.side-panel-header .header-btn.herbal-btn {
  background: #dcfce7;
  color: #16a34a;
}

.side-panel-header .header-btn.herbal-btn:hover {
  background: #bbf7d0;
  color: #15803d;
}

.side-panel-header .header-btn.package-manage-btn {
  background: #dbeafe;
  color: #2563eb;
}

.side-panel-header .header-btn.package-manage-btn:hover {
  background: #bfdbfe;
  color: #1d4ed8;
}

.side-panel-header .patient-name {
  font-size: 18px;
  font-weight: 700;
}

.side-panel-header .chart-no {
  font-size: 14px;
  opacity: 0.9;
}

.side-panel-header .patient-age {
  font-size: 13px;
  opacity: 0.8;
  margin-left: 4px;
}

.side-panel-close {
  background: transparent;
  border: none;
  color: #6b7280;
  width: 36px;
  height: 36px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  transition: background 0.2s;
}

.side-panel-close:hover {
  background: #e5e7eb;
  color: #1f2937;
}

/* 섹션 공통 스타일 */
.side-panel-section {
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
}

.side-panel-section h4 {
  font-size: 13px;
  font-weight: 600;
  color: #6b7280;
  margin: 0 0 12px 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* 오늘 메모 섹션 */
.side-panel-section.today-memo .memo-tags-wrapper {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.side-panel-section.today-memo .no-memo {
  color: #9ca3af;
  font-size: 13px;
  font-style: italic;
}

.side-panel-section.today-memo .custom-memo {
  margin-top: 10px;
  padding: 10px 12px;
  background: #f9fafb;
  border-radius: 8px;
  font-size: 13px;
  color: #374151;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.side-panel-section.today-memo .custom-memo i {
  color: #9ca3af;
  margin-top: 2px;
}

/* 예약/완료 섹션 */
.side-panel-section.reservation-complete-section {
  display: flex;
  gap: 20px;
  padding: 12px 20px;
}

.reservation-status-row,
.complete-status-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.reservation-status-row .section-label,
.complete-status-row .section-label {
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
  min-width: 32px;
}

.reservation-display {
  display: flex;
  align-items: center;
}

.complete-toggle-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: #f9fafb;
  font-size: 13px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.2s;
}

.complete-toggle-btn:hover {
  background: #f3f4f6;
  border-color: #9ca3af;
}

.complete-toggle-btn.completed {
  background: #dcfce7;
  border-color: #10b981;
  color: #059669;
}

.complete-toggle-btn.completed:hover {
  background: #bbf7d0;
}

/* 수납 이력 섹션 */
.side-panel-section.history-section {
  flex: 1;
  overflow: auto;
  border-bottom: none;
}

.history-loading,
.history-empty {
  text-align: center;
  padding: 20px;
  color: #9ca3af;
  font-size: 13px;
}

.history-loading i {
  margin-right: 6px;
}

.history-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.history-item {
  display: flex;
  align-items: center;
  padding: 10px 12px;
  background: #f9fafb;
  border-radius: 8px;
  font-size: 13px;
  transition: background 0.15s;
}

.history-item:hover {
  background: #f3f4f6;
}

.history-item.current {
  background: #dbeafe;
  border-left: 3px solid #3b82f6;
}

.history-item .history-date {
  flex: 0 0 80px;
  font-weight: 500;
  color: #374151;
}

.history-item .history-treatments {
  flex: 1;
  color: #6b7280;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.history-item .history-amount {
  flex: 0 0 70px;
  text-align: right;
  font-weight: 600;
  color: #1f2937;
}

/* 빠른 액션 버튼 */
.side-panel-actions {
  padding: 16px 20px;
  display: flex;
  gap: 8px;
  background: #f9fafb;
  border-top: 1px solid #e5e7eb;
}

.side-panel-actions .action-btn {
  flex: 1;
  padding: 10px 12px;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: all 0.2s;
}

.side-panel-actions .action-btn.memo {
  background: #fef3c7;
  color: #92400e;
}

.side-panel-actions .action-btn.memo:hover {
  background: #fde68a;
}

.side-panel-actions .action-btn.reservation {
  background: #dbeafe;
  color: #1e40af;
}

.side-panel-actions .action-btn.reservation:hover {
  background: #bfdbfe;
}

.side-panel-actions .action-btn.history {
  background: #e5e7eb;
  color: #374151;
}

.side-panel-actions .action-btn.history:hover {
  background: #d1d5db;
}

/* 반응형: 작은 화면 */
@media (max-width: 1400px) {
  .receipt-list-panel {
    flex: 0 0 45%;
    max-width: 45%;
  }

  .receipt-detail-side-panel {
    flex: 1;
  }
}

@media (max-width: 1100px) {
  .receipt-two-column-layout {
    flex-direction: column;
    overflow: auto;
  }

  .receipt-list-panel {
    flex: 0 0 auto;
    max-width: 100%;
    min-height: 300px;
    max-height: 50%;
  }

  .receipt-detail-side-panel {
    flex: 1;
    min-height: 300px;
  }
}

/* ============================================ */
/* 환자 수납이력 모달 V2 (2줄 레이아웃) */
/* ============================================ */

.patient-history-modal-v2 {
  width: 900px;
  max-width: 95vw;
}

/* 테이블 V2 */
.history-table-v2 {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* 헤더 행 V2 */
.history-header-row-v2 {
  display: grid;
  grid-template-columns: 75px 50px 70px 30px 80px 60px 80px 1fr;
  gap: 8px;
  padding: 10px 16px;
  background: #f3f4f6;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
}

.history-header-row-v2 .col-method {
  text-align: right;
}

.history-header-row-v2 .col-general {
  text-align: right;
}

.history-header-row-v2 .col-memo {
  text-align: center;
}

/* 아이템 컨테이너 V2 */
.history-item-v2 {
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  overflow: hidden;
  transition: all 0.15s;
}

.history-item-v2:hover {
  border-color: #3b82f6;
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
}

/* 메인 행 (첫째줄) */
.history-row-main {
  display: grid;
  grid-template-columns: 75px 50px 70px 30px 80px 60px 80px 1fr;
  gap: 8px;
  padding: 10px 16px;
  align-items: center;
  font-size: 13px;
}

.history-row-main .col-time {
  color: #6b7280;
  font-size: 12px;
}

.history-row-main .col-insu {
  color: #6b7280;
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.history-row-main .col-date {
  font-weight: 600;
  color: #1f2937;
}

.history-row-main .col-method i {
  font-size: 12px;
}

.history-row-main .col-method i.fa-credit-card {
  color: #7c3aed;
}

.history-row-main .col-method i.fa-money-bill {
  color: #ea580c;
}

.history-row-main .col-method i.fa-building-columns {
  color: #0d9488;
}

.history-row-main .col-method {
  display: flex;
  justify-content: flex-end;
  gap: 4px;
}

.history-row-main .col-total {
  font-weight: 600;
  color: #1f2937;
}

.history-row-main .col-self {
  color: #2563eb;
}

.history-row-main .col-general {
  color: #dc2626;
  text-align: right;
}

.history-row-main .col-memo {
  color: #6b7280;
  font-size: 12px;
  overflow: hidden;
}

.history-row-main .col-memo .memo-text {
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.history-row-main.clickable {
  cursor: pointer;
  transition: background-color 0.15s;
}

.history-row-main.clickable:hover {
  background-color: #f0f7ff;
}

.history-row-main.clickable .col-date {
  color: #2563eb;
  text-decoration: underline;
}

/* 상세 행 (둘째줄) */
.history-row-detail {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 16px 12px;
  background: #f9fafb;
  border-top: 1px solid #f3f4f6;
}

.history-row-detail.clickable {
  cursor: pointer;
  transition: background 0.15s;
}

.history-row-detail.clickable:hover {
  background: #f3f4f6;
}

/* 진료 배지들 */
.history-row-detail .treatment-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

/* 비급여 배지들 */
.history-row-detail .uncovered-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.history-row-detail .badge {
  display: inline-block;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
}

.history-row-detail .badge.consult-first {
  background: #dbeafe;
  color: #1d4ed8;
}

.history-row-detail .badge.consult-return {
  background: #fef9c3;
  color: #a16207;
}

.history-row-detail .badge.covered {
  background: #e5e7eb;
  color: #374151;
}

.history-row-detail .badge.uncovered {
  background: #ffedd5;
  color: #c2410c;
}

.history-row-detail .badge.chuna {
  background: #dcfce7;
  color: #166534;
}

.history-row-detail .badge.empty {
  background: #f3f4f6;
  color: #9ca3af;
}

/* ============================================ */
/* 세부내역 모달 */
/* ============================================ */

.receipt-detail-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1100;
}

.receipt-detail-modal {
  background: white;
  border-radius: 12px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
  width: 500px;
  max-width: 90vw;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.detail-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 20px;
  background: #f8fafc;
  border-bottom: 1px solid #e5e7eb;
  cursor: grab;
  user-select: none;
}

.detail-modal-header:active {
  cursor: grabbing;
}

.detail-modal-header h4 {
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  color: #1f2937;
  display: flex;
  align-items: center;
  gap: 8px;
}

.detail-modal-header h4 i {
  color: #3b82f6;
}

.detail-modal-header .close-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: #6b7280;
  cursor: pointer;
  transition: all 0.15s;
}

.detail-modal-header .close-btn:hover {
  background: #e5e7eb;
  color: #1f2937;
}

.detail-modal-body {
  padding: 16px 20px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* 섹션 */
.detail-section {
  background: #f9fafb;
  border-radius: 8px;
  padding: 12px;
}

.detail-section .section-title {
  margin: 0 0 10px 0;
  font-size: 13px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 6px;
}

.detail-section .section-title.insurance {
  background: #e3f2fd;
  color: #1565c0;
  padding: 6px 10px;
  border-radius: 4px;
}

.detail-section .section-title.insurance i {
  color: #1976d2;
}

.detail-section .section-title.general {
  background: #fff3e0;
  color: #e65100;
  padding: 6px 10px;
  border-radius: 4px;
}

.detail-section .section-title.general i {
  color: #f57c00;
}

/* 급여 항목 그리드 */
.detail-items-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 6px;
  margin-bottom: 10px;
}

.detail-items-grid .detail-item {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
  padding: 4px 10px;
  background: white;
  border-radius: 4px;
  font-size: 12px;
  gap: 8px;
}

.detail-items-grid .item-name {
  color: #374151;
  white-space: nowrap;
}

.detail-items-grid .item-amount {
  color: #1565c0;
  font-weight: 500;
  white-space: nowrap;
  flex-shrink: 0;
}

/* 비급여 항목 리스트 */
.detail-items-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-bottom: 10px;
}

.detail-items-list .detail-item-row {
  display: flex;
  justify-content: space-between;
  padding: 8px 12px;
  background: white;
  border-radius: 4px;
  font-size: 13px;
}

.detail-items-list .item-name {
  color: #374151;
}

.detail-items-list .item-amount {
  font-weight: 500;
  color: #374151;
}

.detail-items-list .item-name .no-input-tag {
  display: inline-block;
  margin-left: 8px;
  padding: 1px 6px;
  font-size: 11px;
  font-weight: 500;
  background: #fff3e0;
  color: #e65100;
  border-radius: 3px;
}

/* 소계 */
.detail-subtotal {
  display: flex;
  justify-content: space-between;
  padding: 8px 12px;
  background: white;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 600;
}

.detail-subtotal.insurance {
  color: #1565c0;
}

.detail-subtotal.general {
  color: #e65100;
}

.detail-subtotal .amount {
  font-weight: 700;
}

/* 총합계 */
.detail-grand-total {
  display: flex;
  justify-content: space-between;
  padding: 12px 16px;
  background: #f3f4f6;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  color: #1f2937;
  border-top: 1px solid #e5e7eb;
}

.detail-grand-total .amount {
  font-size: 16px;
  font-weight: 700;
  color: #111827;
}

/* 결제 방식 */
.detail-payment-method {
  display: flex;
  justify-content: center;
  gap: 16px;
  padding: 8px 0;
}

.detail-payment-method .method {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  padding: 6px 12px;
  border-radius: 20px;
}

.detail-payment-method .method.card {
  background: #f3e8ff;
  color: #7c3aed;
}

.detail-payment-method .method.cash {
  background: #fef3c7;
  color: #d97706;
}

.detail-payment-method .method.transfer {
  background: #ccfbf1;
  color: #0d9488;
}

.detail-empty {
  text-align: center;
  padding: 12px;
  color: #9ca3af;
  font-size: 13px;
}

/* ============================================ */
/* 한약 통합 UI 스타일                           */
/* ============================================ */

.herbal-unified-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* 현황 박스 */
.herbal-status-box {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 10px;
}

.herbal-status-box .status-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.herbal-status-box .status-title {
  font-size: 12px;
  font-weight: 600;
  color: #374151;
}

.herbal-status-box .btn-add-small {
  font-size: 11px;
  padding: 3px 8px;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s;
}

.herbal-status-box .btn-add-small:hover {
  background: #059669;
}

.herbal-status-box .empty-msg-small {
  font-size: 11px;
  color: #9ca3af;
  text-align: center;
  padding: 8px 0;
  margin: 0;
}

/* 선결제 패키지 리스트 */
.herbal-package-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.herbal-package-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.herbal-package-item:hover {
  border-color: #10b981;
}

.herbal-package-item.selected {
  border-color: #10b981;
  background: #ecfdf5;
}

.herbal-package-item .pkg-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: #1f2937;
}

.herbal-package-item .pkg-type {
  font-size: 11px;
  color: #6b7280;
  padding: 2px 6px;
  background: #f3f4f6;
  border-radius: 4px;
}

.herbal-package-item .pkg-count {
  font-size: 12px;
  font-weight: 600;
  color: #059669;
}

.herbal-package-item .pkg-count.low {
  color: #dc2626;
}

.herbal-package-item .btn-deduct-small {
  font-size: 11px;
  padding: 4px 8px;
  background: #3b82f6;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.herbal-package-item .btn-deduct-small:hover {
  background: #2563eb;
}

/* 녹용 패키지 리스트 */
.nokryong-package-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.nokryong-package-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 10px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.nokryong-package-item:hover {
  border-color: #f59e0b;
}

.nokryong-package-item.selected {
  border-color: #f59e0b;
  background: #fffbeb;
}

.nokryong-package-item .nok-name {
  font-size: 13px;
  font-weight: 500;
  color: #1f2937;
}

.nokryong-package-item .nok-count {
  font-size: 12px;
  font-weight: 600;
  color: #d97706;
}

.nokryong-package-item .nok-count.low {
  color: #dc2626;
}

/* 액션 패널 - 아코디언 */
.herbal-action-panels {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.action-panel {
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  background: white;
  overflow: hidden;
}

.action-panel .panel-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: #f9fafb;
  cursor: pointer;
  user-select: none;
}

.action-panel .panel-header:hover {
  background: #f3f4f6;
}

.action-panel .panel-icon {
  font-size: 10px;
  color: #6b7280;
}

.action-panel .panel-title {
  font-size: 13px;
  font-weight: 500;
  color: #374151;
}

.action-panel.expanded .panel-header {
  border-bottom: 1px solid #e5e7eb;
}

.action-panel .panel-content {
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* 폼 행 */
.herbal-unified-section .form-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.herbal-unified-section .form-row > label {
  min-width: 50px;
  font-size: 12px;
  font-weight: 500;
  color: #6b7280;
}

.herbal-unified-section .form-row select {
  flex: 1;
  padding: 6px 10px;
  font-size: 12px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
}

.herbal-unified-section .form-row select:focus {
  outline: none;
  border-color: #10b981;
}

.herbal-unified-section .round-info,
.herbal-unified-section .count-info {
  font-size: 13px;
  font-weight: 600;
  color: #059669;
}

/* 배송 버튼 */
.delivery-buttons,
.period-buttons {
  display: flex;
  gap: 6px;
}

.delivery-btn,
.period-btn {
  padding: 6px 12px;
  font-size: 12px;
  border: 1px solid #d1d5db;
  background: white;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
}

.delivery-btn:hover,
.period-btn:hover {
  background: #f3f4f6;
}

.delivery-btn.active {
  background: #3b82f6;
  border-color: #3b82f6;
  color: white;
}

.period-btn.active {
  background: #10b981;
  border-color: #10b981;
  color: white;
}

/* 녹용 종류 버튼 */
.nokryong-type-buttons {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.nokryong-type-btn {
  padding: 6px 12px;
  font-size: 12px;
  border: 1px solid #fcd34d;
  background: #fffbeb;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s;
  color: #92400e;
}

.nokryong-type-btn:hover {
  background: #fef3c7;
  border-color: #f59e0b;
}

.nokryong-type-btn.active {
  background: #f59e0b;
  border-color: #f59e0b;
  color: white;
  font-weight: 500;
}

/* 녹용 회분 입력 (MemoInputPanel) */
.doses-row {
  display: flex;
  align-items: center;
  gap: 4px;
}

.dose-quick-btn {
  width: 40px;
  height: 28px;
  padding: 0;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: white;
  cursor: pointer;
  font-size: 13px;
  color: #374151;
}

.dose-quick-btn:hover {
  border-color: #f59e0b;
  background: #fffbeb;
}

.dose-quick-btn.active {
  border-color: #f59e0b;
  background: #f59e0b;
  color: white;
  font-weight: 500;
}

/* 기간 빠른 설정 버튼 */
.period-quick-buttons {
  display: flex;
  gap: 6px;
}

.period-quick-btn {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  background: white;
  cursor: pointer;
  font-size: 13px;
  color: #374151;
  transition: all 0.15s;
}

.period-quick-btn:hover {
  border-color: #3b82f6;
  background: #eff6ff;
  color: #3b82f6;
}

.doses-input {
  width: 60px !important;
  height: 28px;
  padding: 0 2px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 12px;
  text-align: center;
}

.doses-input:focus {
  outline: none;
  border-color: #f59e0b;
}

.doses-unit {
  font-size: 12px;
  color: #6b7280;
}

/* 체크박스 행 */
.checkbox-row label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #374151;
  cursor: pointer;
}

.checkbox-row input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.checkbox-row .nok-remaining {
  font-size: 11px;
  color: #d97706;
  margin-left: 4px;
}

/* 텍스트 입력 */
.herbal-unified-section .input-text {
  flex: 1;
  padding: 6px 10px;
  font-size: 12px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
}

.herbal-unified-section .input-text:focus {
  outline: none;
  border-color: #10b981;
}

/* 질환명 태그 입력 */
.disease-tag-input {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.disease-tag-input .selected-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.disease-tag-input .tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  background: #d1fae5;
  color: #065f46;
  font-size: 11px;
  font-weight: 500;
  border-radius: 12px;
}

.disease-tag-input .tag-remove {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  padding: 0;
  background: #065f46;
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 10px;
  line-height: 1;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.15s;
}

.disease-tag-input .tag-remove:hover {
  opacity: 1;
}

.disease-tag-input .tag-input-wrapper {
  position: relative;
}

.disease-tag-input .tag-suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  z-index: 100;
  max-height: 180px;
  overflow-y: auto;
}

.disease-tag-input .suggestion-item {
  padding: 8px 12px;
  font-size: 12px;
  color: #374151;
  cursor: pointer;
  transition: background 0.1s;
}

.disease-tag-input .suggestion-item:hover {
  background: #f3f4f6;
}

.disease-tag-input .suggestion-item.new-tag {
  color: #10b981;
  font-weight: 500;
  border-top: 1px solid #e5e7eb;
  display: flex;
  align-items: center;
  gap: 6px;
}

.disease-tag-input .suggestion-item.new-tag i {
  font-size: 10px;
}

/* 메인 액션 버튼 */
.btn-action-main {
  width: 100%;
  padding: 10px 16px;
  font-size: 13px;
  font-weight: 600;
  background: #10b981;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s;
}

.btn-action-main:hover:not(:disabled) {
  background: #059669;
}

.btn-action-main:disabled {
  background: #9ca3af;
  cursor: not-allowed;
}

/* 최근 수령 이력 */
.herbal-history {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 10px;
}

.herbal-history .history-title {
  font-size: 12px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 8px;
}

.herbal-history .history-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.herbal-history .history-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: white;
  border-radius: 4px;
  font-size: 11px;
}

.herbal-history .h-date {
  color: #6b7280;
  min-width: 45px;
}

.herbal-history .h-name {
  flex: 1;
  font-weight: 500;
  color: #1f2937;
}

.herbal-history .h-round {
  color: #059669;
}

.herbal-history .h-delivery {
  color: #6b7280;
  padding: 2px 6px;
  background: #f3f4f6;
  border-radius: 4px;
}

.herbal-history .h-nokryong {
  color: #d97706;
  font-weight: 500;
}


/* ========================================
   등록 모달 (RegisterModal)
   ======================================== */
.register-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.register-modal {
  background: white;
  border-radius: 12px;
  width: 420px;
  max-width: 90vw;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

.register-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
}

.register-modal-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: #1f2937;
}

.register-modal-header .btn-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: #f3f4f6;
  border-radius: 6px;
  cursor: pointer;
  color: #6b7280;
  font-size: 14px;
}

.register-modal-header .btn-close:hover {
  background: #e5e7eb;
  color: #374151;
}

.register-modal-body {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.register-modal-body .form-group {
  margin-bottom: 16px;
}

.register-modal-body .form-group:last-child {
  margin-bottom: 0;
}

.register-modal-body .form-group label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  margin-bottom: 6px;
}

.register-modal-body .form-group label .optional {
  font-weight: 400;
  color: #9ca3af;
  font-size: 11px;
}

.register-modal-body .form-group select,
.register-modal-body .form-group input[type="text"],
.register-modal-body .form-group input[type="number"] {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  color: #1f2937;
}

.register-modal-body .form-group select:focus,
.register-modal-body .form-group input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.register-modal-body .form-divider {
  height: 1px;
  background: #e5e7eb;
  margin: 16px 0;
}

/* 기간 버튼 그룹 */
.register-modal-body .period-buttons {
  display: flex;
  gap: 8px;
}

.register-modal-body .period-btn {
  flex: 1;
  padding: 10px 8px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  font-size: 13px;
  color: #6b7280;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.register-modal-body .period-btn:hover {
  border-color: #9ca3af;
  background: #f9fafb;
}

.register-modal-body .period-btn.active {
  border-color: #3b82f6;
  background: #eff6ff;
  color: #1d4ed8;
}

.register-modal-body .period-btn .period-count {
  font-size: 10px;
  opacity: 0.7;
}

/* 녹용 종류 버튼 */
.register-modal-body .nokryong-type-buttons {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.register-modal-body .nokryong-type-btn {
  flex: 1;
  min-width: 60px;
  padding: 10px 12px;
  border: 1px solid #fcd34d;
  border-radius: 6px;
  background: #fffbeb;
  cursor: pointer;
  font-size: 13px;
  color: #92400e;
  text-align: center;
}

.register-modal-body .nokryong-type-btn:hover {
  border-color: #f59e0b;
  background: #fef3c7;
}

/* 녹용 회분 입력 */
.register-modal-body .doses-row {
  display: flex;
  align-items: center;
  gap: 4px;
}

.register-modal-body .dose-quick-btn {
  width: 40px;
  height: 32px;
  padding: 0;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: white;
  cursor: pointer;
  font-size: 14px;
  color: #374151;
}

.register-modal-body .dose-quick-btn:hover {
  border-color: #f59e0b;
  background: #fffbeb;
}

.register-modal-body .dose-quick-btn.active {
  border-color: #f59e0b;
  background: #f59e0b;
  color: white;
  font-weight: 500;
}

.register-modal-body .form-group .doses-input,
.register-modal-body .doses-input {
  width: 60px !important;
  height: 32px;
  padding: 0 2px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 13px;
  text-align: center;
}

.register-modal-body .doses-input:focus {
  outline: none;
  border-color: #f59e0b;
}

.register-modal-body .doses-unit {
  font-size: 13px;
  color: #6b7280;
}

.register-modal-body .nokryong-type-btn.active {
  border-color: #f59e0b;
  background: #f59e0b;
  color: white;
  font-weight: 500;
}

/* 한약 탭 */
/* 패키지 현황 섹션 */
.register-modal-body .package-status-section {
  margin-bottom: 16px;
  padding: 12px;
  background: #f8fafc;
  border-radius: 8px;
  border: 1px solid #e2e8f0;
}

.register-modal-body .package-status-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  font-size: 13px;
}

.register-modal-body .package-status-item:not(:last-child) {
  border-bottom: 1px solid #e2e8f0;
}

.register-modal-body .package-status-type {
  font-weight: 600;
  color: #64748b;
  flex-shrink: 0;
}

.register-modal-body .package-status-item--herbal .package-status-type {
  color: #16a34a;
}

.register-modal-body .package-status-item--nokryong .package-status-type {
  color: #b45309;
}

.register-modal-body .package-status-name {
  color: #1e293b;
  flex: 1;
}

.register-modal-body .package-status-remaining {
  font-weight: 600;
  color: #3b82f6;
  flex-shrink: 0;
}

.register-modal-body .herbal-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}

.register-modal-body .herbal-tab {
  flex: 1;
  padding: 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  font-size: 13px;
  color: #6b7280;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.register-modal-body .herbal-tab:hover {
  background: #f9fafb;
}

.register-modal-body .herbal-tab.active {
  border-color: #22c55e;
  background: #f0fdf4;
  color: #16a34a;
}

.register-modal-body .herbal-tab i {
  font-size: 12px;
}

/* 질환명 태그 */
.register-modal-body .disease-tags-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.register-modal-body .selected-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.register-modal-body .disease-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: #dbeafe;
  color: #1e40af;
  border-radius: 4px;
  font-size: 12px;
}

.register-modal-body .disease-tag button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  border: none;
  background: transparent;
  cursor: pointer;
  color: #3b82f6;
  font-size: 10px;
}

.register-modal-body .disease-tag button:hover {
  color: #1d4ed8;
}

.register-modal-body .disease-input-wrapper {
  position: relative;
}

.register-modal-body .disease-input-wrapper input {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
}

.register-modal-body .disease-suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  margin-top: 4px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  z-index: 10;
}

.register-modal-body .suggestion-item {
  padding: 8px 12px;
  cursor: pointer;
  font-size: 13px;
  color: #374151;
}

.register-modal-body .suggestion-item:hover {
  background: #f3f4f6;
}

.register-modal-body .suggestion-item:first-child {
  border-radius: 6px 6px 0 0;
}

.register-modal-body .suggestion-item:last-child {
  border-radius: 0 0 6px 6px;
}

/* 탕전일 선택 */
.register-modal-body .decoction-date-select {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  font-size: 13px;
  color: #374151;
  background: white;
  cursor: pointer;
}

.register-modal-body .decoction-date-select:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}

/* 수령 방식 버튼 */
.register-modal-body .delivery-method-buttons {
  display: flex;
  gap: 8px;
}

.register-modal-body .delivery-method-btn {
  flex: 1;
  padding: 10px 16px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  background: white;
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  cursor: pointer;
  transition: all 0.15s;
}

.register-modal-body .delivery-method-btn:hover {
  background: #f9fafb;
  border-color: #9ca3af;
}

.register-modal-body .delivery-method-btn.active {
  background: #dbeafe;
  border-color: #3b82f6;
  color: #1d4ed8;
}

/* 모달 푸터 */
.register-modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 16px 20px;
  border-top: 1px solid #e5e7eb;
}

.register-modal-footer .btn-cancel {
  padding: 10px 20px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  font-size: 13px;
  color: #6b7280;
}

.register-modal-footer .btn-cancel:hover {
  background: #f3f4f6;
}

.register-modal-footer .btn-register {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  background: #3b82f6;
  cursor: pointer;
  font-size: 13px;
  color: white;
  font-weight: 500;
}

.register-modal-footer .btn-register:hover {
  background: #2563eb;
}

.register-modal-footer .btn-register:disabled {
  background: #9ca3af;
  cursor: not-allowed;
}

/* ============================================
   CS 타임라인 스타일
   ============================================ */

.package-timeline {
  background: #f8fafc;
  border-radius: 8px;
  padding: 12px;
  border: 1px solid #e2e8f0;
}

.package-timeline .timeline-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.package-timeline .timeline-title {
  font-size: 17px;
  font-weight: 600;
  color: #334155;
  margin: 0;
}

.package-timeline .timeline-count {
  font-size: 15px;
  color: #475569;
  background: #e2e8f0;
  padding: 2px 8px;
  border-radius: 10px;
}

.package-timeline .timeline-refresh-btn {
  margin-left: auto;
  width: 22px;
  height: 22px;
  border: none;
  background: #e2e8f0;
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  color: #64748b;
  display: flex;
  align-items: center;
  justify-content: center;
}

.package-timeline .timeline-refresh-btn:hover {
  background: #cbd5e1;
}

.package-timeline .timeline-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.package-timeline .timeline-loading,
.package-timeline .timeline-empty {
  text-align: center;
  padding: 20px;
  color: #64748b;
  font-size: 16px;
}

/* 날짜 그룹 */
.package-timeline .timeline-date-group {
  background: white;
  border-radius: 6px;
  padding: 8px;
  border: 1px solid #e5e7eb;
}

.package-timeline .timeline-date-group--today {
  border-color: #fbbf24;
  background: #fffbeb;
}

.package-timeline .timeline-date-header {
  margin-bottom: 6px;
  padding-bottom: 4px;
  border-bottom: 1px dashed #e5e7eb;
}

.package-timeline .timeline-date {
  font-size: 15px;
  font-weight: 600;
  color: #6b7280;
}

.package-timeline .timeline-date-group--today .timeline-date {
  color: #d97706;
}

/* 날짜별 메모 추가 버튼 */
.timeline-add-memo-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border: none;
  border-radius: 4px;
  background: #e0f2fe;
  color: #0369a1;
  font-size: 10px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.15s ease;
  margin-left: 6px;
}

.timeline-date-header:hover .timeline-add-memo-btn {
  opacity: 1;
}

.timeline-add-memo-btn:hover {
  background: #0ea5e9;
  color: white;
}

/* 커스텀 메모 추가 패널 */
.custom-memo-add-panel {
  background: #f0f9ff;
  border: 1px solid #bae6fd;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 8px;
}

.custom-memo-add-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.custom-memo-add-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  font-weight: 600;
  color: #0369a1;
}

.custom-memo-add-title i {
  font-size: 14px;
}

.custom-memo-close-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: #64748b;
  cursor: pointer;
  transition: all 0.15s ease;
}

.custom-memo-close-btn:hover {
  background: #e2e8f0;
  color: #334155;
}

.custom-memo-add-body {
  display: flex;
  gap: 8px;
  align-items: center;
}

.custom-memo-type-select {
  padding: 8px 10px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  font-size: 13px;
  background: white;
  cursor: pointer;
  min-width: 90px;
  outline: none;
}

.custom-memo-type-select:focus {
  border-color: #0ea5e9;
}

.custom-memo-input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  font-size: 14px;
  outline: none;
  transition: border-color 0.15s ease;
}

.custom-memo-input:focus {
  border-color: #0ea5e9;
}

.custom-memo-input::placeholder {
  color: #94a3b8;
}

.custom-memo-submit-btn {
  padding: 8px 16px;
  border: none;
  border-radius: 6px;
  background: #0ea5e9;
  color: white;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.custom-memo-submit-btn:hover:not(:disabled) {
  background: #0284c7;
}

.custom-memo-submit-btn:disabled {
  background: #cbd5e1;
  cursor: not-allowed;
}

/* 이벤트 목록 */
.package-timeline .timeline-events {
  display: flex;
  flex-direction: column;
  gap: 4px;
  border-left: none;
  padding-left: 0;
  margin-left: 0;
}

/* 이벤트 아이템 */
.package-timeline .timeline-event {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 4px;
  font-size: 16px;
  background: #f1f5f9;
  cursor: default;
  transition: background 0.15s;
  border-left: none;
  margin-left: 0;
  box-shadow: none;
}

.package-timeline .timeline-event::before {
  content: '';
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--event-dot-color, #9ca3af);
  flex-shrink: 0;
}

.package-timeline .timeline-event--editable {
  cursor: pointer;
}

.package-timeline .timeline-event--editable:hover {
  background: #f3f4f6;
}

.package-timeline .timeline-event--completed {
  opacity: 0.7;
}

.package-timeline .timeline-event-icon {
  font-size: 18px;
  flex-shrink: 0;
}

.package-timeline .timeline-event-content {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.package-timeline .timeline-event-label {
  color: #374151;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.package-timeline .timeline-event-sublabel {
  font-size: 14px;
  color: #9ca3af;
}

/* 이벤트 타입별 동그라미 색상 */
.package-timeline .timeline-event--herbal {
  --event-dot-color: #22c55e;
}

.package-timeline .timeline-event--nokryong {
  --event-dot-color: #f59e0b;
}

.package-timeline .timeline-event--treatment {
  --event-dot-color: #8b5cf6;
}

.package-timeline .timeline-event--membership {
  --event-dot-color: #ec4899;
}

.package-timeline .timeline-event--memo {
  --event-dot-color: #0ea5e9;
}

/* 수정/이력 버튼 */
.package-timeline .timeline-event-edit-btn,
.package-timeline .timeline-event-history-btn {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  border-radius: 4px;
  cursor: pointer;
  font-size: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.5;
  transition: opacity 0.15s, background 0.15s;
}

.package-timeline .timeline-event-edit-btn:hover,
.package-timeline .timeline-event-history-btn:hover {
  opacity: 1;
  background: rgba(0, 0, 0, 0.05);
}

/* 더보기 버튼 */
.package-timeline .timeline-load-more {
  text-align: center;
  margin-top: 8px;
}

.package-timeline .timeline-load-more-btn {
  padding: 8px 14px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: white;
  cursor: pointer;
  font-size: 15px;
  color: #6b7280;
}

.package-timeline .timeline-load-more-btn:hover:not(:disabled) {
  background: #f3f4f6;
}

.package-timeline .timeline-load-more-btn:disabled {
  cursor: not-allowed;
  opacity: 0.6;
}

/* 모달 스타일 */
.timeline-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.timeline-modal {
  background: white;
  border-radius: 12px;
  width: 400px;
  max-width: 90vw;
  max-height: 80vh;
  overflow: hidden;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
              0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

.timeline-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
}

.timeline-modal-header h5 {
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  color: #111827;
}

.timeline-modal-close {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;
  font-size: 20px;
  color: #6b7280;
  display: flex;
  align-items: center;
  justify-content: center;
}

.timeline-modal-close:hover {
  background: #f3f4f6;
}

.timeline-modal-body {
  padding: 16px 20px;
  overflow-y: auto;
  max-height: 400px;
}

.timeline-modal-info {
  margin: 0 0 12px 0;
  font-size: 13px;
  color: #6b7280;
}

.timeline-modal-event {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px;
  background: #f9fafb;
  border-radius: 6px;
  margin-bottom: 12px;
  font-size: 13px;
}

.timeline-reason-input {
  width: 100%;
  padding: 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  resize: none;
  font-family: inherit;
}

.timeline-reason-input:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.timeline-modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 16px 20px;
  border-top: 1px solid #e5e7eb;
}

.timeline-modal-btn {
  padding: 8px 16px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  cursor: pointer;
  font-size: 13px;
  color: #374151;
}

.timeline-modal-btn:hover {
  background: #f3f4f6;
}

.timeline-modal-btn--cancel {
  color: #6b7280;
}

.timeline-modal-btn--confirm {
  background: #3b82f6;
  border-color: #3b82f6;
  color: white;
}

.timeline-modal-btn--confirm:hover {
  background: #2563eb;
}

.timeline-modal-btn--confirm:disabled {
  background: #9ca3af;
  border-color: #9ca3af;
  cursor: not-allowed;
}

/* 수정 이력 목록 */
.timeline-audit-empty {
  text-align: center;
  padding: 20px;
  color: #9ca3af;
  font-size: 13px;
}

.timeline-audit-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.timeline-audit-item {
  padding: 10px;
  background: #f9fafb;
  border-radius: 6px;
  border-left: 3px solid #3b82f6;
}

.timeline-audit-meta {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
  font-size: 11px;
}

.timeline-audit-date {
  color: #6b7280;
}

.timeline-audit-user {
  color: #3b82f6;
  font-weight: 500;
}

.timeline-audit-reason {
  font-size: 12px;
  color: #374151;
}

.timeline-audit-field {
  font-size: 11px;
  color: #9ca3af;
  margin-top: 4px;
}

/* 메모 추가 섹션 (타임라인 아래) */
.today-memo-add-section {
  margin-top: 8px;
}

.today-memo-add-section .add-memo-btn-inline {
  width: 100%;
  padding: 8px 12px;
  border: 1px dashed #d1d5db;
  border-radius: 6px;
  background: transparent;
  cursor: pointer;
  font-size: 12px;
  color: #6b7280;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: all 0.15s;
}

.today-memo-add-section .add-memo-btn-inline:hover {
  background: #f9fafb;
  border-color: #9ca3af;
  color: #374151;
}

.today-memo-add-section .custom-memo {
  padding: 8px;
  background: #f9fafb;
  border-radius: 6px;
  border: 1px solid #e5e7eb;
}

.today-memo-add-section .custom-memo.editing {
  display: flex;
  gap: 8px;
  align-items: center;
}

.today-memo-add-section .memo-edit-input {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 12px;
}

.today-memo-add-section .memo-edit-input:focus {
  outline: none;
  border-color: #3b82f6;
}

.today-memo-add-section .memo-delete-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: #fee2e2;
  border-radius: 4px;
  cursor: pointer;
  color: #dc2626;
  display: flex;
  align-items: center;
  justify-content: center;
}

.today-memo-add-section .memo-delete-btn:hover {
  background: #fecaca;
}

/* ===== 타임라인 인라인 편집 패널 ===== */
.package-timeline .timeline-inline-panel {
  margin: 4px 0 8px 0;
  padding: 12px;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.package-timeline .timeline-event--expanded {
  background: #e0f2fe !important;
  border-color: #7dd3fc;
}

.timeline-edit-inline {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.timeline-edit-info {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.timeline-edit-info .edit-info-row {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
}

.timeline-edit-info .edit-label {
  color: #64748b;
  min-width: 70px;
}

.timeline-edit-info .edit-value {
  color: #1e293b;
  font-weight: 500;
}

.timeline-edit-info .edit-info-message {
  margin: 0;
  font-size: 13px;
  color: #64748b;
  text-align: center;
  padding: 8px 0;
}

.timeline-edit-memo {
  width: 100%;
}

.timeline-edit-memo .memo-edit-input-inline {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
  font-family: inherit;
}

.timeline-edit-memo .memo-edit-input-inline:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
}

.timeline-edit-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.timeline-edit-actions button {
  padding: 6px 14px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.timeline-edit-actions .btn-edit-inline {
  background: #3b82f6;
  border: none;
  color: white;
}

.timeline-edit-actions .btn-edit-inline:hover {
  background: #2563eb;
}

.timeline-edit-actions .btn-save-inline {
  background: #10b981;
  border: none;
  color: white;
}

.timeline-edit-actions .btn-save-inline:hover {
  background: #059669;
}

.timeline-edit-actions .btn-delete-inline {
  background: #fef2f2;
  border: 1px solid #fecaca;
  color: #dc2626;
}

.timeline-edit-actions .btn-delete-inline:hover {
  background: #fee2e2;
}

.timeline-edit-actions .btn-close-inline {
  background: white;
  border: 1px solid #d1d5db;
  color: #6b7280;
}

.timeline-edit-actions .btn-close-inline:hover {
  background: #f3f4f6;
}

/* 한약 선결제 인라인 수정 */
.timeline-edit-inline.herbal-edit {
  gap: 10px;
}

.herbal-edit-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  background: #f1f5f9;
  border-radius: 6px;
  font-size: 13px;
  color: #475569;
}

.herbal-edit-info .info-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.herbal-edit-info .info-item i {
  color: #94a3b8;
}

.herbal-edit-info .linked-amount {
  color: #3b82f6;
  font-weight: 500;
}

.herbal-edit-row {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

.herbal-edit-row > label {
  min-width: 90px;
  flex-shrink: 0;
  font-size: 13px;
  font-weight: 500;
  color: #475569;
  line-height: 32px;
}

.herbal-edit-row > select,
.herbal-edit-row > input[type="text"] {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
}

.herbal-edit-row > select:focus,
.herbal-edit-row > input[type="text"]:focus {
  outline: none;
  border-color: #3b82f6;
}

/* 패키지 종류 버튼 */
.package-type-buttons {
  display: flex;
  gap: 6px;
  flex: 1;
}

.package-type-buttons .type-btn {
  flex: 1;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  background: white;
  font-size: 12px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.package-type-buttons .type-btn:hover {
  border-color: #94a3b8;
  background: #f8fafc;
}

.package-type-buttons .type-btn.active {
  border-color: #3b82f6;
  background: #eff6ff;
  color: #2563eb;
}

.package-type-buttons .type-btn .count {
  font-size: 10px;
  font-weight: 400;
  color: #94a3b8;
}

.package-type-buttons .type-btn.active .count {
  color: #60a5fa;
}

/* 질환명 태그 */
.disease-tags-inline {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.disease-tags-inline .tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.disease-tags-inline .disease-tag-item {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  background: #e0f2fe;
  border-radius: 12px;
  font-size: 12px;
  color: #0369a1;
}

.disease-tags-inline .disease-tag-item button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  padding: 0;
  border: none;
  background: transparent;
  color: #0369a1;
  cursor: pointer;
  font-size: 12px;
  line-height: 1;
}

.disease-tags-inline .disease-tag-item button:hover {
  color: #dc2626;
}

.disease-tags-inline .tag-input-wrapper {
  position: relative;
}

.disease-tags-inline .tag-input-wrapper input {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
}

.disease-tags-inline .tag-input-wrapper input:focus {
  outline: none;
  border-color: #3b82f6;
}

.disease-tags-inline .tag-suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  z-index: 10;
  max-height: 150px;
  overflow-y: auto;
}

.disease-tags-inline .suggestion-item {
  padding: 8px 12px;
  font-size: 13px;
  cursor: pointer;
}

.disease-tags-inline .suggestion-item:hover {
  background: #f1f5f9;
}

/* 통증마일리지 인라인 수정 */
.timeline-edit-inline.treatment-edit {
  gap: 10px;
}

/* 녹용선결제 인라인 수정 */
.timeline-edit-inline.nokryong-edit {
  gap: 10px;
}

/* 멤버십 인라인 수정 */
.timeline-edit-inline.membership-edit {
  gap: 10px;
}

.timeline-edit-inline.membership-edit select {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
  background: white;
}

.timeline-edit-inline.membership-edit select:focus {
  outline: none;
  border-color: #3b82f6;
}

.timeline-edit-inline.membership-edit input[type="date"] {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
}

.timeline-edit-inline.membership-edit input[type="date"]:focus {
  outline: none;
  border-color: #3b82f6;
}

/* 상태 토글 버튼 */
.status-toggle-buttons {
  display: flex;
  gap: 6px;
  flex: 1;
}

.status-btn {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  background: white;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.status-btn:hover {
  background: #f1f5f9;
}

.status-btn.active {
  background: #3b82f6;
  border-color: #3b82f6;
  color: white;
}

.status-btn.expired.active {
  background: #ef4444;
  border-color: #ef4444;
  color: white;
}

/* 횟수 조절 입력 그룹 */
.count-input-group {
  display: flex;
  align-items: center;
  gap: 4px;
  flex: 1;
}

.count-input-group input[type="number"] {
  width: 60px;
  padding: 6px 8px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
  text-align: center;
}

.count-input-group input[type="number"]:focus {
  outline: none;
  border-color: #3b82f6;
}

.count-input-group .count-btn {
  width: 28px;
  height: 28px;
  padding: 0;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  background: white;
  font-size: 16px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  justify-content: center;
}

.count-input-group .count-btn:hover {
  border-color: #94a3b8;
  background: #f8fafc;
}

.count-input-group .count-btn:active {
  background: #e2e8f0;
}

/* 한약 선결제 사용(차감) 인라인 수정 */
.timeline-edit-inline.pickup-edit {
  gap: 10px;
}

.pickup-edit-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  background: #fef3c7;
  border-radius: 6px;
  font-size: 13px;
  color: #92400e;
}

.pickup-edit-info .info-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.pickup-edit-info .info-item i {
  color: #d97706;
}

.pickup-edit-info .info-item.highlight {
  font-weight: 600;
  color: #b45309;
}

.pickup-edit-info .info-item .total-info {
  font-weight: 400;
  color: #92400e;
}

.pickup-edit-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.pickup-edit-row > label {
  min-width: 70px;
  font-size: 13px;
  font-weight: 500;
  color: #475569;
}

/* 수령방법 버튼 */
.delivery-method-buttons {
  display: flex;
  gap: 6px;
  flex: 1;
}

.delivery-method-buttons .method-btn {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  background: white;
  font-size: 13px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  transition: all 0.15s;
}

.delivery-method-buttons .method-btn:hover {
  border-color: #94a3b8;
  background: #f8fafc;
}

.delivery-method-buttons .method-btn.active {
  border-color: #f59e0b;
  background: #fffbeb;
  color: #b45309;
}

/* 녹용 사용 옵션 */
.nokryong-option {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.nokryong-option .checkbox-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: #475569;
  cursor: pointer;
}

.nokryong-option .checkbox-label input[type="checkbox"] {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.nokryong-option select {
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
  min-width: 150px;
}

.nokryong-option select:focus {
  outline: none;
  border-color: #3b82f6;
}

.nokryong-option .nok-info {
  font-size: 12px;
  color: #059669;
  font-weight: 500;
}

/* 한약 선결제 차감 인라인 패널 */
.timeline-external-panel {
  margin-top: 4px;
  border: none;
  box-shadow: none;
  padding: 0;
}

.timeline-edit-inline.deduct-panel {
  gap: 8px;
  background: white;
  border: none;
  padding: 6px;
  border-radius: 6px;
  margin: 0;
}

.deduct-panel-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid #e2e8f0;
  margin-bottom: 4px;
}

.deduct-panel-header .panel-title {
  font-size: 13px;
  font-weight: 600;
  color: #1e40af;
}

.deduct-panel-empty {
  padding: 12px;
  text-align: center;
  color: #64748b;
}

.deduct-panel-empty p {
  margin: 0;
  font-size: 12px;
}

.pickup-edit-row select {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 12px;
}

.pickup-edit-row select:focus {
  outline: none;
  border-color: #3b82f6;
}

/* 차감 패널 내부 스타일 조정 */
.deduct-panel .pickup-edit-info {
  padding: 6px 8px;
  font-size: 12px;
}

.deduct-panel .pickup-edit-row {
  gap: 8px;
}

.deduct-panel .pickup-edit-row > label {
  min-width: 60px;
  font-size: 12px;
}

.deduct-panel .delivery-method-buttons .method-btn {
  padding: 6px 8px;
  font-size: 12px;
}

.deduct-panel .nokryong-option {
  gap: 8px;
}

.deduct-panel .nokryong-option .checkbox-label {
  font-size: 12px;
}

.deduct-panel .nokryong-option select {
  font-size: 12px;
  min-width: 120px;
}

.deduct-panel .timeline-edit-actions {
  padding-top: 8px;
  border-top: 1px solid #e2e8f0;
  margin-top: 4px;
}

/* ===== 타임라인 이벤트 수정 모달 ===== */
.timeline-edit-modal {
  width: 420px;
  max-width: 95vw;
}

.timeline-edit-header {
  cursor: move;
}

.timeline-edit-header .header-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.timeline-edit-header .header-info h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: #111827;
}

.timeline-edit-header .patient-info {
  font-size: 13px;
  color: #6b7280;
}

.timeline-edit-body .event-info {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: #f1f5f9;
  border-radius: 8px;
  margin-bottom: 16px;
}

.timeline-edit-body .event-date {
  font-size: 13px;
  color: #64748b;
  font-weight: 500;
}

.timeline-edit-body .event-label {
  font-size: 14px;
  color: #334155;
}

/* 수정 폼 */
.timeline-edit-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.timeline-edit-form .form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.timeline-edit-form .form-group label {
  font-size: 13px;
  font-weight: 500;
  color: #374151;
}

.timeline-edit-form .form-group input,
.timeline-edit-form .form-group select,
.timeline-edit-form .form-group textarea {
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 14px;
  font-family: inherit;
  background: white;
  transition: border-color 0.15s, box-shadow 0.15s;
}

.timeline-edit-form .form-group input:focus,
.timeline-edit-form .form-group select:focus,
.timeline-edit-form .form-group textarea:focus {
  outline: none;
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.timeline-edit-form .form-group textarea {
  resize: vertical;
  min-height: 80px;
}

.timeline-edit-form .form-group input[type="number"] {
  width: 100px;
}

.timeline-edit-form .form-row {
  display: flex;
  gap: 12px;
}

.timeline-edit-form .form-row .form-group {
  flex: 1;
}

/* 푸터 버튼 */
.timeline-edit-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.timeline-edit-footer .footer-right {
  display: flex;
  gap: 8px;
}

.timeline-edit-footer .btn-delete {
  padding: 8px 16px;
  border: 1px solid #fecaca;
  border-radius: 6px;
  background: #fef2f2;
  color: #dc2626;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s;
}

.timeline-edit-footer .btn-delete:hover:not(:disabled) {
  background: #fee2e2;
  border-color: #f87171;
}

.timeline-edit-footer .btn-delete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.timeline-edit-footer .btn-cancel {
  padding: 8px 16px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  color: #6b7280;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s;
}

.timeline-edit-footer .btn-cancel:hover:not(:disabled) {
  background: #f3f4f6;
}

.timeline-edit-footer .btn-save {
  padding: 8px 20px;
  border: none;
  border-radius: 6px;
  background: #3b82f6;
  color: white;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.timeline-edit-footer .btn-save:hover:not(:disabled) {
  background: #2563eb;
}

.timeline-edit-footer .btn-save:disabled {
  background: #93c5fd;
  cursor: not-allowed;
}

/* ============================================
   약침 수정 패널 스타일 (MemoInputPanel용)
   ============================================ */

.yakchim-edit .yakchim-item-name {
  font-weight: 500;
  color: #1e293b;
}

/* MemoInputPanel 약침 수정 모드 */
.yakchim-edit-section {
  padding: 8px 0;
}

.yakchim-edit-info {
  background: #f0fdf4;
  border: 1px solid #86efac;
  border-radius: 6px;
  padding: 10px 12px;
  margin-bottom: 10px;
}

.yakchim-edit-info .info-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0;
  font-size: 13px;
}

.yakchim-edit-info .info-row .label {
  color: #166534;
  font-weight: 500;
  min-width: 80px;
}

.yakchim-edit-info .info-row .value {
  color: #15803d;
  font-weight: 600;
}

.yakchim-edit-form {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  padding: 12px;
  margin-bottom: 12px;
}

.yakchim-edit-form .form-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.yakchim-edit-form .form-row:last-child {
  margin-bottom: 0;
}

.yakchim-edit-form .form-row label {
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  min-width: 50px;
}

.yakchim-edit-form .form-row input[type="text"] {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
}

.yakchim-edit-form .form-row input[type="text"]:focus {
  outline: none;
  border-color: #3b82f6;
}

.yakchim-edit-form .qty-input-wrap {
  display: flex;
  align-items: center;
  gap: 6px;
}

.yakchim-edit-form .qty-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  color: #374151;
}

.yakchim-edit-form .qty-btn:hover {
  background: #e5e7eb;
}

.yakchim-edit-form .qty-input {
  width: 50px;
  padding: 6px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 13px;
  text-align: center;
}

.yakchim-edit-form .qty-input:focus {
  outline: none;
  border-color: #3b82f6;
}

.yakchim-edit-form .qty-unit {
  font-size: 13px;
  color: #6b7280;
}

.yakchim-edit-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.yakchim-edit-actions .btn-update {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  background: #3b82f6;
  color: white;
  border: 1px solid #3b82f6;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-edit-actions .btn-update:hover {
  background: #2563eb;
  border-color: #2563eb;
}

.yakchim-edit-actions .btn-update:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.yakchim-edit-actions .btn-delete {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  background: #fee2e2;
  color: #dc2626;
  border: 1px solid #fecaca;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-edit-actions .btn-delete:hover {
  background: #dc2626;
  color: white;
  border-color: #dc2626;
}

.yakchim-edit-actions .btn-delete:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.yakchim-edit-actions .btn-cancel {
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  background: white;
  color: #6b7280;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-edit-actions .btn-cancel:hover {
  background: #f3f4f6;
  border-color: #9ca3af;
}

.yakchim-edit-actions .btn-cancel:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ============================================
   CRM (환자 중심 통합 관리) 스타일
   ============================================ */

/* CRM 버튼 */
.crm-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  background: #eef2ff;
  color: #4f46e5;
  border: 1px solid #c7d2fe;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  transition: all 0.15s;
}

.crm-btn:hover {
  background: #4f46e5;
  color: white;
  border-color: #4f46e5;
}

/* CRM 모달 */
.crm-modal {
  width: 900px;
  max-width: 95vw;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.crm-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
}

.crm-patient-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.crm-patient-info .patient-name {
  font-size: 18px;
  font-weight: 600;
  color: #111827;
}

.crm-patient-info .patient-chart {
  font-size: 14px;
  color: #6b7280;
}

.crm-patient-info .patient-gender-age {
  font-size: 13px;
  color: #9ca3af;
}

.crm-patient-info .complaint-badge {
  padding: 3px 8px;
  background: #fef2f2;
  color: #dc2626;
  font-size: 11px;
  font-weight: 500;
  border-radius: 10px;
}

/* CRM 탭 */
.crm-tabs {
  display: flex;
  border-bottom: 1px solid #e5e7eb;
  padding: 0 20px;
  background: #f9fafb;
}

.crm-tab {
  padding: 12px 20px;
  background: transparent;
  border: none;
  color: #6b7280;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  position: relative;
  transition: color 0.15s;
}

.crm-tab:hover {
  color: #374151;
}

.crm-tab.active {
  color: #4f46e5;
}

.crm-tab.active::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 2px;
  background: #4f46e5;
}

/* CRM 본문 */
.crm-body {
  flex: 1;
  padding: 20px;
  overflow-y: auto;
}

.crm-loading {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 200px;
  color: #6b7280;
}

/* CRM 종합현황 탭 */
.crm-overview {
  display: grid;
  grid-template-columns: 300px 1fr;
  gap: 24px;
}

.crm-overview-left h4,
.crm-overview-right h4 {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  margin: 0 0 12px 0;
}

.crm-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.crm-section-header h4 {
  margin: 0;
}

.btn-add-note {
  padding: 6px 12px;
  background: #4f46e5;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s;
}

.btn-add-note:hover {
  background: #4338ca;
}

.btn-view-all {
  display: block;
  width: 100%;
  padding: 10px;
  margin-top: 12px;
  background: transparent;
  color: #4f46e5;
  border: 1px dashed #c7d2fe;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-view-all:hover {
  background: #eef2ff;
  border-color: #4f46e5;
}

/* CRM 메모/문의 탭 */
.crm-notes {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* CRM 연결된 문의 */
.crm-linked-inquiries {
  margin-top: 20px;
}

.crm-linked-inquiries h4 {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  margin-bottom: 10px;
}

.crm-linked-inquiry-card {
  background: #f0f4ff;
  border-left: 3px solid #6366f1;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 8px;
}

.crm-linked-inquiry-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.crm-linked-inquiry-time {
  font-size: 12px;
  color: #9ca3af;
  margin-left: auto;
}

.crm-linked-inquiry-content {
  font-size: 13px;
  color: #374151;
  margin: 0;
  line-height: 1.5;
}

.crm-linked-inquiry-response {
  font-size: 12px;
  color: #6b7280;
  margin: 6px 0 0;
  padding-top: 6px;
  border-top: 1px solid #e0e7ff;
}

.crm-linked-inquiry-response span {
  font-weight: 600;
  color: #4f46e5;
}

/* CRM 푸터 */
.crm-footer {
  padding: 12px 20px;
  border-top: 1px solid #e5e7eb;
}

.btn-quick-memo {
  width: 100%;
  padding: 12px;
  background: #f3f4f6;
  color: #6b7280;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-quick-memo:hover {
  background: #e5e7eb;
  color: #374151;
}

.crm-placeholder {
  color: #6b7280;
  text-align: center;
  padding: 40px;
}

/* ============================================
   패키지 현황 컴포넌트
   ============================================ */

.package-status-empty {
  padding: 20px;
  text-align: center;
  color: #9ca3af;
  background: #f9fafb;
  border-radius: 8px;
}

/* 컴팩트 모드 */
.package-status-compact {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.package-tag {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 14px;
  cursor: pointer;
  transition: all 0.15s;
}

.package-tag.tongma {
  background: #fef3c7;
  color: #92400e;
}

.package-tag.tongma:hover {
  background: #fde68a;
}

.package-tag.herbal {
  background: #d1fae5;
  color: #065f46;
}

.package-tag.herbal:hover {
  background: #a7f3d0;
}

.package-tag.nokryong {
  background: #dbeafe;
  color: #1e40af;
}

.package-tag.nokryong:hover {
  background: #bfdbfe;
}

.package-tag.membership {
  background: #f3e8ff;
  color: #7e22ce;
}

.package-tag.membership:hover {
  background: #e9d5ff;
}

/* 전체 모드 */
.package-status-full {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.package-card {
  padding: 14px;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s;
}

.package-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.package-card.tongma {
  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
  border: 1px solid #fcd34d;
}

.package-card.herbal {
  background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
  border: 1px solid #6ee7b7;
}

.package-card.nokryong {
  background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
  border: 1px solid #93c5fd;
}

.package-card.membership {
  background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%);
  border: 1px solid #c4b5fd;
}

.package-card-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}

.package-icon {
  font-size: 16px;
}

.package-name {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
}

.package-card-body {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.package-count {
  display: flex;
  align-items: baseline;
  gap: 2px;
}

.package-count .remaining {
  font-size: 22px;
  font-weight: 700;
  color: #111827;
}

.package-count .separator {
  font-size: 14px;
  color: #9ca3af;
}

.package-count .total {
  font-size: 13px;
  color: #6b7280;
}

.package-progress {
  height: 6px;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 3px;
  overflow: hidden;
}

.package-progress .progress-bar {
  height: 100%;
  background: rgba(0, 0, 0, 0.25);
  border-radius: 3px;
  transition: width 0.3s;
}

.package-expire {
  font-size: 11px;
  color: #6b7280;
}

.package-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.package-info .quantity {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
}

.package-info .expire {
  font-size: 11px;
  color: #6b7280;
}

/* ============================================
   메모 타임라인 컴포넌트
   ============================================ */

.note-timeline-empty {
  padding: 40px;
  text-align: center;
  color: #9ca3af;
  background: #f9fafb;
  border-radius: 8px;
}

.note-timeline-filter {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
}

.note-timeline-filter .filter-btn {
  padding: 6px 12px;
  background: #f3f4f6;
  color: #6b7280;
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.note-timeline-filter .filter-btn:hover {
  background: #e5e7eb;
  color: #374151;
}

.note-timeline-filter .filter-btn.active {
  background: var(--filter-color, #4f46e5);
  color: white;
  border-color: var(--filter-color, #4f46e5);
}

.note-timeline-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.note-timeline-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.note-timeline-date {
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
  padding: 4px 0;
}

.note-timeline-item {
  padding: 12px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s;
}

.note-timeline-item:hover {
  border-color: #c7d2fe;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.note-timeline-item.resolved {
  opacity: 0.7;
  background: #f9fafb;
}

.note-timeline-item.expanded {
  border-color: #4f46e5;
}

.note-item-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.note-item-badges {
  display: flex;
  gap: 6px;
  align-items: center;
}

.note-type-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 500;
  color: white;
  border-radius: 10px;
}

.note-channel-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  background: #f3f4f6;
  font-size: 11px;
  color: #6b7280;
  border-radius: 10px;
}

.note-status-badge {
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 500;
  border-radius: 10px;
}

.note-status-badge.resolved {
  background: #d1fae5;
  color: #065f46;
}

.note-item-time {
  font-size: 11px;
  color: #9ca3af;
}

.note-item-content {
  font-size: 13px;
  color: #374151;
  line-height: 1.5;
}

.note-item-response {
  margin-top: 8px;
  padding: 8px 10px;
  background: #f0fdf4;
  border-radius: 6px;
  font-size: 12px;
  color: #166534;
}

.note-item-response .response-label {
  font-weight: 600;
  margin-right: 4px;
}

.note-item-expanded {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid #e5e7eb;
}

.note-item-meta {
  display: flex;
  gap: 16px;
  font-size: 11px;
  color: #9ca3af;
  margin-bottom: 12px;
}

.note-item-actions {
  display: flex;
  gap: 8px;
}

.note-item-actions .action-btn {
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s;
}

.note-item-actions .action-btn.resolve {
  background: #d1fae5;
  color: #065f46;
  border: 1px solid #a7f3d0;
}

.note-item-actions .action-btn.resolve:hover {
  background: #10b981;
  color: white;
  border-color: #10b981;
}

.note-item-actions .action-btn.reopen {
  background: #fef3c7;
  color: #92400e;
  border: 1px solid #fcd34d;
}

.note-item-actions .action-btn.reopen:hover {
  background: #f59e0b;
  color: white;
  border-color: #f59e0b;
}

.note-item-actions .action-btn.edit {
  background: #eef2ff;
  color: #4f46e5;
  border: 1px solid #c7d2fe;
}

.note-item-actions .action-btn.edit:hover {
  background: #4f46e5;
  color: white;
  border-color: #4f46e5;
}

.note-item-actions .action-btn.delete {
  background: #fef2f2;
  color: #dc2626;
  border: 1px solid #fecaca;
}

.note-item-actions .action-btn.delete:hover {
  background: #dc2626;
  color: white;
  border-color: #dc2626;
}

.note-item-actions .action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ============================================
   메모 입력 컴포넌트
   ============================================ */

.note-input-form {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  padding: 16px;
  margin-bottom: 16px;
}

.note-input-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.note-type-selector {
  display: flex;
  gap: 6px;
}

.note-type-btn {
  padding: 6px 12px;
  background: white;
  color: #6b7280;
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.note-type-btn:hover {
  background: #f3f4f6;
  color: #374151;
}

.note-type-btn.active {
  background: #4f46e5;
  color: white;
  border-color: #4f46e5;
}

.note-channel-selector select {
  padding: 6px 12px;
  font-size: 12px;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  background: white;
  color: #374151;
  cursor: pointer;
}

.note-input-content textarea,
.note-input-response textarea {
  width: 100%;
  padding: 12px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  font-size: 13px;
  font-family: inherit;
  resize: vertical;
  transition: border-color 0.15s;
}

.note-input-content textarea:focus,
.note-input-response textarea:focus {
  outline: none;
  border-color: #4f46e5;
}

.note-input-response {
  margin-top: 12px;
}

.note-input-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
}

.note-input-info {
  font-size: 11px;
  color: #9ca3af;
}

.note-input-buttons {
  display: flex;
  gap: 8px;
}

/* ============================================
   비급여 액션 모달
   ============================================ */

.noncovered-action-modal {
  width: 450px;
  max-width: 95vw;
}

.noncovered-item-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: #f9fafb;
  border-radius: 8px;
  margin-bottom: 16px;
}

.noncovered-item-info .item-name {
  font-size: 14px;
  font-weight: 600;
  color: #374151;
}

.noncovered-item-info .item-amount {
  font-size: 14px;
  color: #6b7280;
}

/* === 비급여관리 서브탭 === */
.noncovered-tab {
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  background: transparent;
  color: #6b7280;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: all 0.15s;
  white-space: nowrap;
}

.noncovered-tab:hover {
  background: #e5e7eb;
  color: #374151;
}

.noncovered-tab.active {
  background: #3b82f6;
  color: white;
}

/* === 일별 비급여 처리 현황 === */
.daily-uncovered {
  display: flex;
  flex-direction: column;
  flex: 1;
  overflow: hidden;
}

.daily-uncovered-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: white;
  border-bottom: 1px solid #e5e7eb;
}

.daily-uncovered-date-nav {
  display: flex;
  align-items: center;
  gap: 6px;
}

.daily-uncovered-date-nav .date-nav-btn {
  width: 28px;
  height: 28px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: white;
  color: #374151;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.daily-uncovered-date-nav .date-nav-btn:hover {
  background: #f3f4f6;
}

.daily-uncovered-date-nav .date-picker {
  padding: 4px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 15px;
  color: #374151;
}

.daily-uncovered-date-nav .date-today-btn {
  padding: 4px 10px;
  border: 1px solid #3b82f6;
  border-radius: 4px;
  background: white;
  color: #3b82f6;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
}

.daily-uncovered-date-nav .date-today-btn:hover {
  background: #eff6ff;
}

.daily-uncovered-refresh {
  width: 28px;
  height: 28px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: white;
  color: #6b7280;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
}

.daily-uncovered-refresh:hover {
  background: #f3f4f6;
}

/* 통계 바 */
.daily-uncovered-stats {
  display: flex;
  gap: 6px;
  padding: 10px 16px;
  background: white;
  border-bottom: 1px solid #e5e7eb;
  flex-wrap: wrap;
}

.daily-stat-chip {
  padding: 5px 10px;
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  background: white;
  color: #374151;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 4px;
  transition: all 0.15s;
}

.daily-stat-chip:hover {
  background: #f9fafb;
  border-color: #d1d5db;
}

.daily-stat-chip.active {
  background: var(--chip-color, #3b82f6);
  color: white;
  border-color: var(--chip-color, #3b82f6);
}

.daily-stat-chip .stat-count {
  font-weight: 600;
  margin-left: 2px;
}

/* 테이블 */
.daily-uncovered-table-wrap {
  flex: 1;
  overflow-y: auto;
  padding: 0;
}

.daily-uncovered-loading,
.daily-uncovered-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  color: #9ca3af;
  font-size: 16px;
  gap: 12px;
}

.daily-uncovered-empty i {
  font-size: 32px;
  color: #d1d5db;
}

.daily-uncovered-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 15px;
}

.daily-uncovered-table thead {
  position: sticky;
  top: 0;
  z-index: 1;
}

.daily-uncovered-table th {
  background: #f9fafb;
  padding: 8px 12px;
  text-align: left;
  font-weight: 500;
  color: #6b7280;
  font-size: 14px;
  border-bottom: 1px solid #e5e7eb;
  white-space: nowrap;
}

.daily-uncovered-table td {
  padding: 8px 12px;
  border-bottom: 1px solid #f3f4f6;
  color: #374151;
  vertical-align: middle;
}

.daily-uncovered-table tr:hover td {
  background: #f9fafb;
}

.daily-uncovered-table .col-time {
  width: 50px;
  color: #6b7280;
  font-size: 14px;
}

.daily-uncovered-table .col-patient {
  width: 120px;
}

.daily-uncovered-table .col-patient .patient-name {
  font-weight: 500;
  color: #1f2937;
}

.daily-uncovered-table .col-patient .chart-number {
  font-size: 13px;
  color: #9ca3af;
  margin-left: 4px;
}

.daily-uncovered-table .col-type {
  width: 80px;
}

.daily-uncovered-table .type-badge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  padding: 2px 8px;
  border-radius: 10px;
  color: white;
  font-size: 13px;
  font-weight: 500;
  white-space: nowrap;
}

.daily-uncovered-table .type-badge i {
  font-size: 12px;
}

.daily-uncovered-table .col-item {
  font-weight: 500;
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.daily-uncovered-table .col-detail {
  color: #6b7280;
  font-size: 15px;
  max-width: 250px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.daily-uncovered-table .col-action {
  width: 40px;
  text-align: center;
}

.daily-uncovered-table .delete-btn {
  width: 26px;
  height: 26px;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: #d1d5db;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  transition: all 0.15s;
}

.daily-uncovered-table .delete-btn:hover {
  background: #fef2f2;
  color: #dc2626;
}

/* 패키지 관리 알림 */
.package-alert {
  padding: 0;
}

.package-alert-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 16px 20px 12px;
  align-items: center;
}

.package-alert-table-wrap {
  padding: 0 20px 20px;
  overflow-x: auto;
}

.package-status-section {
  margin-bottom: 20px;
}

.package-status-section h4 {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  margin: 0 0 10px 0;
}

.action-selection {
  margin-bottom: 16px;
}

.action-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.action-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s;
}

.action-option:hover {
  border-color: #c7d2fe;
  background: #f9fafb;
}

.action-option.selected {
  border-color: #4f46e5;
  background: #eef2ff;
}

.action-option .option-icon {
  font-size: 18px;
}

.action-option .option-label {
  font-size: 14px;
  font-weight: 500;
  color: #374151;
}

.deduct-step h4,
.memo-step label,
.register-step p {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
  margin: 0 0 10px 0;
}

.package-select-options {
  display: flex;
  gap: 10px;
  margin-bottom: 16px;
}

.package-select-btn {
  flex: 1;
  padding: 12px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  color: #374151;
  cursor: pointer;
  transition: all 0.15s;
}

.package-select-btn:hover {
  border-color: #c7d2fe;
}

.package-select-btn.selected {
  background: #4f46e5;
  color: white;
  border-color: #4f46e5;
}

.memo-input label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: #6b7280;
  margin-bottom: 6px;
}

.memo-input textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  font-size: 13px;
  font-family: inherit;
  resize: vertical;
  transition: border-color 0.15s;
}

.memo-input textarea:focus {
  outline: none;
  border-color: #4f46e5;
}

.btn-back {
  padding: 8px 16px;
  background: white;
  color: #6b7280;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
  margin-right: auto;
}

.btn-back:hover {
  background: #f3f4f6;
  border-color: #d1d5db;
}

/* ============================================
   해피콜 히스토리 컴포넌트
   ============================================ */

.happycall-loading,
.happycall-error,
.happycall-empty {
  padding: 40px;
  text-align: center;
  color: #9ca3af;
}

.happycall-empty .happycall-hint {
  font-size: 12px;
  margin-top: 8px;
  color: #d1d5db;
}

.happycall-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.happycall-item {
  padding: 14px;
  background: white;
  border: 1px solid #e5e7eb;
  border-radius: 10px;
}

.happycall-item-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.happycall-date {
  font-size: 13px;
  font-weight: 600;
  color: #374151;
}

.happycall-type {
  font-size: 12px;
  color: #6b7280;
}

.happycall-result {
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 500;
  color: white;
  border-radius: 10px;
}

.happycall-notes {
  font-size: 13px;
  color: #374151;
  line-height: 1.5;
  margin-bottom: 8px;
}

.happycall-staff {
  font-size: 11px;
  color: #9ca3af;
}

/* ============================================
   CRM View (메뉴 페이지)
   ============================================ */

.crm-view {
  height: 100%;
  display: flex;
  flex-direction: column;
  background: #f9fafb;
}

/* CRM 모드 탭 */
.crm-mode-tabs {
  display: flex;
  padding: 0 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  gap: 4px;
}

.crm-mode-tab {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 14px 24px;
  background: rgba(255, 255, 255, 0.1);
  border: none;
  border-radius: 8px 8px 0 0;
  cursor: pointer;
  font-size: 0.95em;
  color: rgba(255, 255, 255, 0.7);
  transition: all 0.2s;
  margin-top: 8px;
}

.crm-mode-tab:hover {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

.crm-mode-tab.active {
  background: #f9fafb;
  color: #667eea;
  font-weight: 600;
}

.crm-mode-tab i {
  font-size: 1.1em;
}

/* 환자 검색 패널 */
.crm-search-panel {
  flex: 1;
  padding: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.crm-search-header {
  text-align: center;
  margin-bottom: 32px;
}

.crm-search-header h2 {
  font-size: 24px;
  font-weight: 700;
  color: #111827;
  margin: 0 0 8px 0;
}

.crm-search-header p {
  font-size: 14px;
  color: #6b7280;
  margin: 0;
}

.crm-search-box {
  display: flex;
  gap: 10px;
  width: 100%;
  max-width: 500px;
  margin-bottom: 24px;
}

.crm-search-box input {
  flex: 1;
  padding: 14px 18px;
  font-size: 15px;
  border: 2px solid #e5e7eb;
  border-radius: 10px;
  transition: border-color 0.15s;
}

.crm-search-box input:focus {
  outline: none;
  border-color: #4f46e5;
}

.crm-search-box button {
  padding: 14px 24px;
  background: #4f46e5;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
}

.crm-search-box button:hover {
  background: #4338ca;
}

.crm-search-box button:disabled {
  background: #9ca3af;
  cursor: not-allowed;
}

.crm-search-results {
  width: 100%;
  max-width: 800px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  overflow: hidden;
}

.crm-search-results table {
  width: 100%;
  border-collapse: collapse;
}

.crm-search-results th {
  padding: 14px 16px;
  text-align: left;
  font-size: 12px;
  font-weight: 600;
  color: #6b7280;
  background: #f9fafb;
  border-bottom: 1px solid #e5e7eb;
}

.crm-search-results td {
  padding: 14px 16px;
  font-size: 14px;
  color: #374151;
  border-bottom: 1px solid #f3f4f6;
}

.crm-search-results tr:hover {
  background: #f9fafb;
}

.crm-search-results .patient-name {
  font-weight: 600;
  color: #111827;
}

.crm-search-results .btn-select {
  padding: 6px 14px;
  background: #4f46e5;
  color: white;
  border: none;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s;
}

.crm-search-results .btn-select:hover {
  background: #4338ca;
}

.crm-no-results {
  text-align: center;
  padding: 40px;
  color: #9ca3af;
}

/* CRM 상세 패널 */
.crm-detail-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: white;
}

.crm-detail-header {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 16px 24px;
  border-bottom: 1px solid #e5e7eb;
  background: #f9fafb;
}

.crm-detail-header .btn-back {
  padding: 8px 14px;
  background: white;
  color: #6b7280;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  align-items: center;
  gap: 6px;
}

.crm-detail-header .btn-back:hover {
  background: #f3f4f6;
  color: #374151;
  border-color: #d1d5db;
}

.crm-detail-body {
  flex: 1;
  padding: 24px;
  overflow-y: auto;
}

/* ============================================
   약침 편집 패널 스타일
   ============================================ */

.timeline-edit-inline.yakchim-edit {
  gap: 10px;
}

.timeline-edit-inline.yakchim-edit .herbal-edit-row > label {
  min-width: 70px;
}

.timeline-edit-inline.yakchim-edit select {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  font-size: 13px;
  background: white;
}

.timeline-edit-inline.yakchim-edit select:focus {
  outline: none;
  border-color: #3b82f6;
}

/* 사용방식 버튼 그룹 */
.source-type-buttons {
  display: flex;
  gap: 6px;
  flex: 1;
}

.source-type-btn {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  background: white;
  color: #6b7280;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.source-type-btn:hover:not(:disabled) {
  background: #f3f4f6;
  border-color: #9ca3af;
}

.source-type-btn.active {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
}

.source-type-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 멤버십 정보 표시 */
.membership-info {
  padding: 8px 12px;
  background: #f0fdf4;
  border: 1px solid #bbf7d0;
  border-radius: 5px;
  font-size: 13px;
  color: #166534;
}

/* 소스 변경 알림 */
.source-change-notice {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: #fef3c7;
  border: 1px solid #fcd34d;
  border-radius: 6px;
  color: #92400e;
  font-size: 12px;
}

.source-change-notice i {
  color: #d97706;
}

/* 작은 로딩 표시 */
.loading-small {
  padding: 20px;
  text-align: center;
  color: #6b7280;
  font-size: 13px;
}

/* 약침 복수 선택 UI */
.yakchim-multi-select {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  flex: 1;
}

.yakchim-select-btn {
  position: relative;
  padding: 8px 14px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  color: #374151;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.yakchim-select-btn:hover:not(:disabled) {
  background: #f3f4f6;
  border-color: #9ca3af;
}

.yakchim-select-btn.selected {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
}

.yakchim-select-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.yakchim-qty-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  background: #ef4444;
  color: white;
  font-size: 11px;
  font-weight: 600;
  border-radius: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 선택된 약침 목록 */
.selected-yakchim-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex: 1;
}

.selected-yakchim-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
}

.selected-yakchim-item .yakchim-name {
  font-size: 13px;
  font-weight: 500;
  color: #374151;
}

.count-input-group.small {
  gap: 4px;
}

.count-input-group.small .count-btn {
  width: 24px;
  height: 24px;
  font-size: 14px;
}

.count-input-group.small .count-value {
  min-width: 28px;
  text-align: center;
  font-size: 13px;
  font-weight: 600;
  color: #374151;
}

/* 약침 차감 포인트 표시 */
.deduction-badge {
  margin-left: 4px;
  padding: 1px 5px;
  background: rgba(239, 68, 68, 0.1);
  color: #dc2626;
  font-size: 10px;
  font-weight: 600;
  border-radius: 3px;
}

.yakchim-select-btn.selected .deduction-badge {
  background: rgba(255, 255, 255, 0.2);
  color: white;
}

.yakchim-deduction-text {
  margin-left: 4px;
  color: #dc2626;
  font-size: 11px;
  font-weight: 500;
}

.deduction-info {
  color: #dc2626 !important;
  font-weight: 600;
}

/* 예상 잔여 횟수 표시 */
.expected-remaining-info {
  margin-top: 8px;
  padding: 8px 12px;
  background: #f0f9ff;
  border: 1px solid #bae6fd;
  border-radius: 6px;
  font-size: 12px;
  color: #0369a1;
  display: flex;
  align-items: center;
  gap: 6px;
}

.expected-remaining-info i {
  color: #0ea5e9;
}

.expected-remaining-info strong {
  font-weight: 600;
  color: #0c4a6e;
}

.expected-remaining-info.insufficient {
  background: #fef2f2;
  border-color: #fecaca;
  color: #991b1b;
}

.expected-remaining-info.insufficient i {
  color: #ef4444;
}

.expected-remaining-info.insufficient strong {
  color: #7f1d1d;
}

.expected-remaining-info .warning-text {
  color: #dc2626;
  font-weight: 600;
}

/* ===== 패키지 모달 히스토리 ===== */
.package-modal-tabs {
  display: flex;
  gap: 0;
  border-bottom: 1px solid #e5e7eb;
  margin-bottom: 16px;
}

.package-modal-tabs .tab-btn {
  flex: 1;
  padding: 10px 16px;
  border: none;
  background: transparent;
  color: #6b7280;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.15s;
}

.package-modal-tabs .tab-btn:hover {
  color: #374151;
  background: #f9fafb;
}

.package-modal-tabs .tab-btn.active {
  color: #2563eb;
  border-bottom-color: #2563eb;
}

.package-history-section {
  min-height: 200px;
}

.package-history-section .history-loading,
.package-history-section .history-empty {
  padding: 40px 20px;
  text-align: center;
  color: #9ca3af;
  font-size: 14px;
}

.package-history-section .history-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.package-history-section .history-item {
  padding: 12px;
  border-radius: 8px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
}

.package-history-section .history-item.add {
  background: #f0fdf4;
  border-color: #bbf7d0;
}

.package-history-section .history-item.usage {
  background: #fef3c7;
  border-color: #fde68a;
}

.package-history-section .history-date {
  font-size: 12px;
  color: #6b7280;
  margin-bottom: 4px;
}

.package-history-section .history-content {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.package-history-section .history-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 600;
}

.package-history-section .history-badge.add {
  background: #22c55e;
  color: white;
}

.package-history-section .history-badge.usage {
  background: #f59e0b;
  color: white;
}

.package-history-section .history-label {
  font-size: 14px;
  font-weight: 500;
  color: #1f2937;
}

.package-history-section .history-deduction {
  font-size: 13px;
  color: #dc2626;
  font-weight: 600;
}

.package-history-section .history-remaining {
  font-size: 12px;
  color: #6b7280;
  margin-left: auto;
}

.package-history-section .history-sublabel {
  font-size: 12px;
  color: #6b7280;
  margin-top: 4px;
}

/* ============================================
   로컬 환자 등록 버튼
   ============================================ */
.local-patient-btn {
  padding: 8px 14px;
  background: linear-gradient(135deg, #6366f1, #8b5cf6);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: all 0.2s ease;
  box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3);
}

.local-patient-btn:hover {
  background: linear-gradient(135deg, #4f46e5, #7c3aed);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(99, 102, 241, 0.4);
}

.local-patient-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(99, 102, 241, 0.3);
}

.local-patient-btn i {
  font-size: 12px;
}

/* ========================================
   헤더 환자 검색
   ======================================== */

.cs-header-search {
  position: relative;
  flex: 0 0 auto;
  width: 200px;
  margin: 0 12px;
}

.cs-header-search-input {
  width: 100%;
  padding: 6px 12px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.12);
  color: #fff;
  font-size: 15px;
  outline: none;
  transition: border-color 0.2s, background 0.2s;
}

.cs-header-search-input::placeholder {
  color: rgba(255, 255, 255, 0.5);
}

.cs-header-search-input:focus {
  border-color: #60a5fa;
  background: rgba(255, 255, 255, 0.18);
}

.cs-header-search-dropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  width: 360px;
  background: #fff;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  max-height: 320px;
  overflow-y: auto;
  z-index: 9999;
}

.cs-header-search-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  font-size: 14px;
  cursor: pointer;
  font-size: 13px;
  color: #334155;
  border-bottom: 1px solid #f1f5f9;
  transition: background 0.15s;
}

.cs-header-search-item:last-child {
  border-bottom: none;
}

.cs-header-search-item:hover,
.cs-header-search-item.highlighted {
  background: #eff6ff;
}

.cs-header-search-item-name {
  font-weight: 600;
  color: #1e293b;
  min-width: 60px;
}

.cs-header-search-item-chart {
  color: #6366f1;
  font-size: 14px;
}

.cs-header-search-item-birth {
  color: #64748b;
  font-size: 14px;
}

.cs-header-search-item-phone {
  color: #64748b;
  font-size: 14px;
  margin-left: auto;
}

.cs-header-search-empty,
.cs-header-search-loading {
  padding: 16px;
  text-align: center;
  color: #94a3b8;
  font-size: 13px;
}

/* ========================================
   환자 퀵 액션 패널
   ======================================== */

.cs-quick-panel {
  background: #f8fafc;
  border-bottom: 2px solid #e2e8f0;
  padding: 10px 20px;
  animation: cs-quick-panel-slide 0.2s ease-out;
}

@keyframes cs-quick-panel-slide {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.cs-quick-panel-info {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  color: #334155;
  margin-bottom: 8px;
}

.cs-quick-panel-name {
  font-weight: 700;
  color: #1e293b;
  font-size: 15px;
}

.cs-quick-panel-gender {
  font-weight: 400;
  color: #64748b;
  font-size: 13px;
  margin-left: 2px;
}

.cs-quick-panel-divider {
  color: #cbd5e1;
}

.cs-quick-close-btn {
  margin-left: auto;
  background: none;
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  width: 28px;
  height: 28px;
  font-size: 18px;
  color: #94a3b8;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
}

.cs-quick-close-btn:hover {
  background: #fee2e2;
  color: #ef4444;
  border-color: #fecaca;
}

.cs-quick-panel-actions {
  display: flex;
  gap: 8px;
}

.cs-quick-action-btn {
  padding: 6px 16px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: #fff;
  color: #374151;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.cs-quick-action-btn:hover {
  background: #eff6ff;
  border-color: #93c5fd;
  color: #1d4ed8;
}

.cs-quick-action-btn.active {
  background: #1d4ed8;
  border-color: #1d4ed8;
  color: #fff;
}

.cs-quick-panel-memo {
  margin-top: 10px;
  padding: 12px;
  background: #fff;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
}

/* ========================================
   헤더 도구 영역 (검색 + 빠른기록)
   ======================================== */

.cs-header-tools {
  display: flex;
  align-items: center;
  flex: 1;
  max-width: 400px;
  margin: 0 12px;
  gap: 6px;
}

.cs-header-tools .cs-header-search {
  margin: 0;
}

/* 환자등록 버튼 (헤더 내) */
.cs-header-register-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 34px;
  height: 34px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  background: white;
  color: #6b7280;
  font-size: 14px;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.15s;
}
.cs-header-register-btn:hover {
  background: #f0fdf4;
  color: #16a34a;
  border-color: #86efac;
}

/* 빠른 기록 버튼 (헤더 내) */
.cs-quick-memo-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 34px;
  height: 34px;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 6px;
  background: rgba(255, 255, 255, 0.12);
  color: rgba(255, 255, 255, 0.8);
  font-size: 14px;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.2s;
}

.cs-quick-memo-btn:hover {
  background: rgba(255, 255, 255, 0.22);
  color: #fff;
}

.cs-quick-memo-btn.active {
  background: #fbbf24;
  color: #1e3a8a;
  border-color: #fbbf24;
}

/* ========================================
   빠른 기록 모달
   ======================================== */

.cs-quick-memo-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  animation: cs-quick-memo-fade 0.15s ease-out;
}

@keyframes cs-quick-memo-fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

.cs-quick-memo-modal {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
  width: 480px;
  max-width: 90vw;
  max-height: 90vh;
  overflow-y: auto;
  animation: cs-quick-memo-slide-up 0.2s ease-out;
}

@keyframes cs-quick-memo-slide-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.cs-quick-memo-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e2e8f0;
}

.cs-quick-memo-title {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
  color: #1e293b;
}

.cs-quick-memo-close {
  background: none;
  border: none;
  font-size: 22px;
  color: #94a3b8;
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.15s;
}

.cs-quick-memo-close:hover {
  background: #fee2e2;
  color: #ef4444;
}

.cs-quick-memo-form {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.cs-quick-memo-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.cs-quick-memo-label {
  font-size: 12px;
  font-weight: 600;
  color: #64748b;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* 채널/유형 선택 버튼 그룹 */
.cs-quick-memo-channels {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.cs-quick-memo-channel {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 14px;
  border: 1px solid #e5e7eb;
  border-radius: 20px;
  background: #fff;
  color: #6b7280;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.cs-quick-memo-channel:hover {
  border-color: #93c5fd;
  color: #1d4ed8;
}

.cs-quick-memo-channel.active {
  background: #1d4ed8;
  border-color: #1d4ed8;
  color: #fff;
}

/* 발신자 정보 */
.cs-quick-memo-caller {
  display: flex;
  gap: 8px;
}

.cs-quick-memo-input {
  flex: 1;
  padding: 8px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  outline: none;
  transition: border-color 0.2s;
}

.cs-quick-memo-input:focus {
  border-color: #60a5fa;
  box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
}

/* 메모 내용 */
.cs-quick-memo-textarea {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 13px;
  resize: vertical;
  outline: none;
  min-height: 80px;
  font-family: inherit;
  transition: border-color 0.2s;
}

.cs-quick-memo-textarea:focus {
  border-color: #60a5fa;
  box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.15);
}

/* 하단 버튼 */
.cs-quick-memo-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding-top: 4px;
}

.cs-quick-memo-cancel-btn {
  padding: 8px 20px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: #fff;
  color: #6b7280;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s;
}

.cs-quick-memo-cancel-btn:hover {
  background: #f1f5f9;
  color: #374151;
}

.cs-quick-memo-save-btn {
  padding: 8px 24px;
  border: none;
  border-radius: 6px;
  background: #1d4ed8;
  color: #fff;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
}

.cs-quick-memo-save-btn:hover:not(:disabled) {
  background: #1e40af;
}

.cs-quick-memo-save-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ============================================
   통합 환자 대시보드
   ============================================ */

/* 대시보드 오버레이 (콘텐츠 영역 내) */
.patient-dashboard-overlay {
  position: absolute;
  inset: 0;
  z-index: 100;
  background: #f8fafc;
}

.patient-dashboard {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  font-size: 16px;
}

/* 대시보드 헤더 바 */
.dashboard-header-bar {
  flex-shrink: 0;
  background: #fff;
  border-bottom: 1px solid #e2e8f0;
  padding: 0;
}

/* 한 줄 인라인 헤더 */
.dashboard-header-inline {
  display: flex;
  align-items: center;
  gap: 0;
  padding: 8px 16px;
  font-size: 14px;
  flex-wrap: nowrap;
  overflow: hidden;
}

.dashboard-header-inline .dh-name {
  font-weight: 700;
  color: #1e293b;
  font-size: 17px;
  flex-shrink: 0;
}

.dashboard-header-inline .dh-sep {
  color: #cbd5e1;
  margin: 0 8px;
  flex-shrink: 0;
}

.dashboard-header-inline .dh-chart {
  color: #64748b;
  flex-shrink: 0;
}

.dashboard-header-inline .dh-gender {
  color: #475569;
  flex-shrink: 0;
}

.dashboard-header-inline .dh-age {
  color: #475569;
  flex-shrink: 0;
}

.dashboard-header-inline .dh-phone {
  color: #2563eb;
  text-decoration: none;
  flex-shrink: 0;
}

.dashboard-header-inline .dh-phone:hover {
  text-decoration: underline;
}

.dashboard-header-inline .dh-meta {
  color: #64748b;
  font-size: 15px;
  flex-shrink: 0;
}

.dashboard-header-inline .dh-referral {
  color: #8b5cf6;
  font-size: 15px;
  flex-shrink: 0;
}

.dashboard-header-inline .dh-badge {
  font-size: 13px;
  font-weight: 600;
  padding: 3px 10px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  border-radius: 4px;
  white-space: nowrap;
  flex-shrink: 0;
}
/* 섹션 제목 클릭 */
.section-title-clickable {
  cursor: pointer;
  transition: color 0.15s;
}
.section-title-clickable:hover {
  color: #3b82f6;
}
/* 확대 모달 */
.expanded-section-modal {
  background: white;
  border-radius: 12px;
  width: 480px;
  max-width: 90vw;
  height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}
.expanded-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
}
.expanded-section-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
}
.expanded-section-body {
  flex: 1;
  overflow-y: auto;
  padding: 12px 16px;
  min-height: 0;
}
.expanded-section-body,
.expanded-section-body * {
  max-height: none !important;
}
.expanded-section-body {
  max-height: none !important;
  overflow-y: auto !important;
  padding: 8px 10px !important;
}
.expanded-section-body .dashboard-section-content {
  padding: 0 !important;
}
.expanded-section-body .herbal-draft-history {
  padding: 0 !important;
  margin: 0 !important;
}

.dashboard-header-inline .dh-badge.clickable {
  cursor: pointer;
  transition: filter 0.15s;
}
.dashboard-header-inline .dh-badge.clickable:hover {
  filter: brightness(0.9);
}
.dashboard-header-inline .dh-badges {
  display: flex;
  gap: 4px;
  align-items: center;
  flex-shrink: 0;
}
.dh-badge.herbal { background: #d1fae5; color: #059669; }
.dh-badge.nokryong { background: #fef3c7; color: #d97706; }
.dh-badge.tongma { background: #dbeafe; color: #2563eb; }
.dh-badge.membership { background: #ede9fe; color: #7c3aed; }

.dashboard-header-inline .dh-add-btns {
  display: flex;
  gap: 2px;
  align-items: center;
  flex-shrink: 0;
  margin-left: 4px;
}
.dh-add-btns .pkg-add-btn {
  padding: 3px 10px;
  height: 28px;
  border: 1px solid;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}
.dh-add-btns .pkg-add-btn.herbal { background: #f0fdf4; border-color: #86efac; color: #22c55e; }
.dh-add-btns .pkg-add-btn.herbal:hover { background: #22c55e; color: white; }
.dh-add-btns .pkg-add-btn.nokryong { background: #fffbeb; border-color: #fcd34d; color: #f59e0b; }
.dh-add-btns .pkg-add-btn.nokryong:hover { background: #f59e0b; color: white; }
.dh-add-btns .pkg-add-btn.treatment { background: #ecfeff; border-color: #67e8f9; color: #0891b2; }
.dh-add-btns .pkg-add-btn.treatment:hover { background: #0891b2; color: white; }
.dh-add-btns .pkg-add-btn.membership { background: #fef2f2; border-color: #fca5a5; color: #ef4444; }
.dh-add-btns .pkg-add-btn.membership:hover { background: #ef4444; color: white; }

.dashboard-header-inline .dh-actions {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  flex-shrink: 0;
}

.dashboard-header-inline .btn-header-close {
  background: none;
  border: none;
  font-size: 18px;
  color: #94a3b8;
  cursor: pointer;
  padding: 2px 6px;
  line-height: 1;
}

.dashboard-header-inline .btn-header-close:hover {
  color: #ef4444;
}

.btn-memo-toggle {
  padding: 5px 14px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  background: #fff;
  color: #475569;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.15s;
}

.btn-memo-toggle:hover {
  background: #f1f5f9;
}

.btn-memo-toggle.active {
  background: #eff6ff;
  border-color: #3b82f6;
  color: #2563eb;
}

.btn-refresh-dashboard {
  padding: 5px 14px;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  background: #fff;
  color: #475569;
  font-size: 14px;
  cursor: pointer;
  margin-left: auto;
}

.btn-refresh-dashboard:hover {
  background: #f1f5f9;
}

.dashboard-memo-form {
  padding: 0 16px 12px;
}

/* 에러 표시 */
.dashboard-error {
  padding: 10px 16px;
  background: #fef2f2;
  color: #dc2626;
  font-size: 14px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.dashboard-error button {
  padding: 3px 10px;
  border: 1px solid #fca5a5;
  border-radius: 4px;
  background: #fff;
  color: #dc2626;
  font-size: 13px;
  cursor: pointer;
}

/* 대시보드 레이아웃 */
.dashboard-layout {
  display: flex;
  flex-direction: column;
  gap: 14px;
  flex: 1;
  overflow-y: auto;
  padding: 14px;
}

/* 2x2 그리드 (legacy) */
.dashboard-grid-2x2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  flex: 1;
  min-height: 0;
}

/* 3단 레이아웃 (legacy) */
.dashboard-3col {
  display: grid;
  grid-template-columns: 1fr 1.2fr 1.2fr;
  gap: 14px;
  flex: 1;
  overflow-y: auto;
  padding: 14px;
  min-height: 0;
}

.dashboard-col {
  display: flex;
  flex-direction: column;
  gap: 14px;
  min-height: 0;
  overflow-y: auto;
}

.dashboard-col.left .dashboard-section {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.dashboard-col.left .dashboard-section .dashboard-section-content {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
}

/* 3단 v2 레이아웃 (각 단 독립 높이) */
.dashboard-3col-v2 {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 14px;
  flex: 1;
  overflow: hidden;
  padding: 14px;
  min-height: 0;
}

.dashboard-3col-v2 > .dashboard-col {
  display: flex;
  flex-direction: column;
  gap: 14px;
  min-height: 0;
  overflow: hidden;
}

/* 1단: auto + fill */
.dashboard-3col-v2 .dashboard-section.auto-height {
  flex: 0 0 auto;
}

.dashboard-3col-v2 .dashboard-section.fill-height {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.dashboard-3col-v2 .dashboard-section.fill-height > .dashboard-section-content,
.dashboard-3col-v2 .dashboard-section.fill-height > .irh-container {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
}

/* 2단, 3단: 1:1 균등 분할 */
.dashboard-3col-v2 .dashboard-col.equal-split > .dashboard-section {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.dashboard-3col-v2 .dashboard-col.equal-split > .dashboard-section > .dashboard-section-content {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
}

/* 기타 메모 표시 */
.etc-memo-display {
  margin: 0;
  font-family: inherit;
  font-size: 14px;
  line-height: 1.5;
  color: #78350f;
  white-space: pre-wrap;
  word-break: break-word;
  padding: 10px 12px;
  background: #fffbeb;
  border-radius: 6px;
}

/* 패키지 인라인 리스트 */
.package-inline-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 6px;
}
.package-inline-item {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  padding: 8px 10px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 6px;
}
.pkg-badge {
  display: inline-block;
  padding: 1px 6px;
  border-radius: 3px;
  font-size: 11px;
  font-weight: 700;
  flex-shrink: 0;
}
.pkg-badge.tongma { background: #dbeafe; color: #2563eb; }
.pkg-badge.herbal { background: #dcfce7; color: #16a34a; }
.pkg-badge.nokryong { background: #fef9c3; color: #a16207; }
.pkg-badge.membership { background: #f3e8ff; color: #7c3aed; }
.pkg-date {
  color: #6b7280;
  font-size: 12px;
  flex-shrink: 0;
}
.pkg-info {
  color: #334155;
  font-weight: 500;
}

.section-action-btn.consult-add {
  padding: 2px 10px;
  border: 1px solid #667eea;
  border-radius: 4px;
  background: white;
  color: #667eea;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
}
.section-action-btn.consult-add.memo-btn {
  background: #f0fdf4;
  color: #16a34a;
  border-color: #bbf7d0;
}
.section-action-btn.consult-add.memo-btn:hover {
  background: #dcfce7;
}
.section-action-btn.consult-add:hover {
  background: #eff1fe;
}

/* CalendarGrid (탕전 일정) */
.hcg-container { padding: 12px 16px; flex: 1; display: flex; flex-direction: column; min-height: 0; }
.hcg-nav { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; }
.hcg-nav button { border: 1px solid #e5e7eb; background: white; border-radius: 6px; padding: 4px 10px; cursor: pointer; font-size: 13px; }
.hcg-nav button:hover { background: #f3f4f6; }
.hcg-today { font-weight: 600; color: #2563eb; }
.hcg-label { font-weight: 600; font-size: 14px; color: #334155; margin-left: 8px; }
.hcg-grid-wrapper { flex: 1; overflow: auto; min-height: 0; border-radius: 8px; }
.hcg-grid { display: grid; border: 1px solid #e2e8f0; border-radius: 8px; background: white; min-width: 760px; }
.hcg-corner { padding: 6px 4px; font-size: 11px; color: #94a3b8; text-align: center; border-bottom: 1px solid #e2e8f0; border-right: 1px solid #e5e7eb; background: #f8fafc; }
.hcg-day-header { padding: 6px 4px; text-align: center; font-size: 12px; font-weight: 600; color: #374151; border-bottom: 1px solid #e2e8f0; border-right: 1px solid #f0f0f0; background: #f8fafc; }
.hcg-day-header.today { background: #eff6ff; color: #2563eb; }
.hcg-day-num { display: block; font-size: 16px; font-weight: 700; }
.hcg-time { padding: 4px 6px; font-size: 11px; color: #94a3b8; text-align: right; border-bottom: 1px solid #f0f0f0; border-right: 1px solid #e5e7eb; min-height: 50px; display: flex; align-items: flex-start; justify-content: flex-end; }
.hcg-time.alt { background: #f8fafc; }
.hcg-cell { border-bottom: 1px solid #f0f0f0; border-right: 1px solid #f0f0f0; min-height: 50px; padding: 2px; cursor: pointer; transition: background 0.15s; display: flex; flex-direction: column; gap: 2px; }
.hcg-cell.alt { background: #f8fafc; }
.hcg-cell:hover { background: #eff6ff; }
.hcg-cell.selected { background: #dbeafe; }
.hcg-cell.pending { background: #e0f2fe; box-shadow: inset 0 0 0 2px #38bdf8; }
.hcg-order { padding: 3px 5px; border-radius: 4px; font-size: 12px; line-height: 1.3; overflow: hidden; }
.hcg-order-name { font-weight: 600; display: block; font-size: 13px; }
.hcg-order-meta { font-size: 11px; opacity: 0.7; }
.hcg-confirm-bar { display: flex; align-items: center; justify-content: space-between; padding: 10px 16px; background: #f0f9ff; border-top: 1px solid #bae6fd; }
.hcg-confirm-info { display: flex; align-items: center; gap: 4px; font-size: 13px; }
.hcg-from { text-decoration: line-through; color: #94a3b8; }
.hcg-to { font-weight: 700; color: #2563eb; }
.hcg-change-label { margin-left: 6px; font-size: 12px; color: #64748b; }
.hcg-confirm-actions { display: flex; gap: 8px; }
.hcg-confirm-actions button { padding: 6px 14px; border: 1px solid #e5e7eb; border-radius: 6px; background: white; cursor: pointer; font-size: 13px; }
.hcg-confirm-actions button.confirm { background: #2563eb; color: white; border-color: #2563eb; font-weight: 600; }
.hcg-confirm-actions button.confirm:hover { background: #1d4ed8; }

/* 약상담 모달 */
.herbal-consult-modal {
  position: relative;
  background: white;
  border-radius: 12px;
  width: 520px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}
.hcm-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px 20px;
  border-bottom: 1px solid #e5e7eb;
}
.hcm-header h3 {
  font-size: 16px;
  font-weight: 700;
  margin: 0;
}
.hcm-header .hcm-patient {
  font-size: 13px;
  color: #6b7280;
}
.hcm-header .btn-close {
  margin-left: auto;
  background: none;
  border: none;
  font-size: 16px;
  color: #9ca3af;
  cursor: pointer;
}
.hcm-body {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0 24px;
}
.hcm-section {
  margin-bottom: 4px;
}
.hcm-section h4 {
  font-size: 13px;
  font-weight: 700;
  color: #374151;
  margin: 0 0 12px;
  padding-bottom: 6px;
  border-bottom: 1px solid #e5e7eb;
}
.hcm-row {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-bottom: 14px;
}
.hcm-row > label {
  min-width: 70px;
  font-size: 15px;
  font-weight: 600;
  color: #4b5563;
  padding-top: 6px;
  flex-shrink: 0;
}
.hcm-row > input[type="date"],
.hcm-row > input[type="text"],
.hcm-row > select {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 15px;
}
.hcm-row > textarea {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 15px;
  resize: vertical;
}
.hcm-btn-group {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
  flex: 1;
}
.hcm-btn-group.wrap { flex-wrap: wrap; }
.hcm-btn {
  padding: 5px 12px;
  border: 1px solid #d1d5db;
  border-radius: 16px;
  background: white;
  font-size: 13px;
  cursor: pointer;
  color: #374151;
  transition: all 0.15s;
}
.hcm-btn:hover { border-color: #9ca3af; background: #f9fafb; }
.hcm-btn.active {
  background: #eff6ff;
  color: #1d4ed8;
  border-color: #3b82f6;
  font-weight: 600;
}
.hcm-btn.fail.active {
  background: #ef4444;
  border-color: #ef4444;
}
.hcm-period-display {
  font-size: 12px;
  color: #3b82f6;
  font-weight: 600;
  padding-top: 6px;
}
/* 질환 태그 */
.hcm-tags-area {
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  align-items: center;
}
.hcm-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  background: #eff6ff;
  color: #1d4ed8;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
}
.hcm-tag button {
  background: none;
  border: none;
  color: #93c5fd;
  cursor: pointer;
  font-size: 10px;
  padding: 0;
}
.hcm-tag button:hover { color: #dc2626; }
.hcm-tag-input-wrap {
  position: relative;
  flex: 1;
  min-width: 120px;
}
.hcm-tag-input-wrap input {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  font-size: 15px;
}
.hcm-tag-suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: white;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  z-index: 10;
  max-height: 150px;
  overflow-y: auto;
}
.hcm-suggestion {
  padding: 6px 10px;
  font-size: 12px;
  cursor: pointer;
}
.hcm-suggestion:hover { background: #f3f4f6; }
/* 푸터 */
.hcm-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 12px 20px;
  border-top: 1px solid #e5e7eb;
}
.hcm-cancel {
  padding: 8px 20px;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: white;
  font-size: 13px;
  cursor: pointer;
}
.hcm-save {
  padding: 8px 24px;
  border: none;
  border-radius: 6px;
  background: #3b82f6;
  color: white;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
}
.hcm-save:hover { background: #2563eb; }
.hcm-save:disabled { opacity: 0.5; cursor: not-allowed; }

/* 상담 메모 입력 */
.consult-memo-input-row {
  display: flex;
  gap: 6px;
  margin-bottom: 10px;
}
.consult-memo-textarea {
  flex: 1;
  padding: 8px;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  font-size: 13px;
  line-height: 1.4;
  color: #334155;
  resize: vertical;
  font-family: inherit;
  box-sizing: border-box;
}
.consult-memo-textarea:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.15);
}
.consult-memo-add-btn {
  padding: 0 12px;
  border: 1px solid #667eea;
  border-radius: 6px;
  background: #667eea;
  color: white;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  align-self: flex-end;
  height: 32px;
}
.consult-memo-add-btn:disabled {
  opacity: 0.5;
  cursor: default;
}
.consult-memo-add-btn:hover:not(:disabled) {
  background: #5a6fd6;
}

/* 상담 메모 리스트 */
.consult-memo-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.consult-memo-item {
  padding: 8px 10px;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  border-left: 3px solid #667eea;
}
.consult-memo-meta {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 4px;
  font-size: 11px;
  color: #94a3b8;
}
.consult-memo-date {
  font-weight: 600;
  color: #64748b;
}
.consult-memo-author {
  color: #667eea;
}
.consult-memo-del {
  margin-left: auto;
  background: none;
  border: none;
  color: #cbd5e1;
  font-size: 14px;
  cursor: pointer;
  padding: 0 2px;
  line-height: 1;
}
.consult-memo-del:hover {
  color: #ef4444;
}
.consult-memo-text {
  font-size: 14px;
  line-height: 1.5;
  color: #334155;
  white-space: pre-wrap;
  word-break: break-word;
}

/* 약상담 기록 태그 */
.herbal-consult-type-badge {
  display: inline-block;
  padding: 1px 6px;
  border-radius: 3px;
  font-size: 11px;
  font-weight: 700;
  background: #dbeafe;
  color: #1e40af;
}
.hc-tag {
  display: inline-block;
  padding: 2px 7px;
  border-radius: 3px;
  font-size: 13px;
  background: #f3f4f6;
  color: #4b5563;
  margin-right: 2px;
  margin-bottom: 2px;
  font-weight: 600;
}
.hc-label {
  font-size: 11px;
  color: #9ca3af;
  margin-right: 6px;
}
.hc-tag.disease { background: #eff6ff; color: #1d4ed8; }
.hc-tag.nokryong { background: #fef9c3; color: #a16207; }
.hc-tag.payment { background: #dcfce7; color: #16a34a; }
.hc-tag.fail { background: #fef2f2; color: #dc2626; }
.hc-followup-memo { font-size: 12px; color: #6b7280; }

/* 섹션 카드 */
.dashboard-section {
  background: #fff;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  min-height: 0;
  overflow: hidden;
}

.dashboard-section.full {
  grid-column: 1 / -1;
}

/* 인콜/아웃콜 서브섹션 */
.call-subsection {
  margin-bottom: 10px;
}

.call-subsection:last-child {
  margin-bottom: 0;
}

.call-subsection .dashboard-section-content {
  padding: 0;
}

.call-subsection .group-label {
  margin: 0 0 4px;
}

.dashboard-section .section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 14px 4px;
  margin-bottom: 0;
  border-bottom: 1px solid #f1f5f9;
  flex-shrink: 0;
}

.dashboard-section .section-header h4 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: #1e293b;
}

.dashboard-section .section-count {
  font-size: 15px;
  color: #94a3b8;
  margin-left: 8px;
}

.dashboard-section .section-summary {
  font-size: 15px;
  color: #64748b;
  margin-left: auto;
}

.dashboard-section-content {
  padding: 0 14px 10px;
  overflow-y: auto;
  flex: 1;
  max-height: 300px;
}

/* 로딩/빈 상태 */
.section-loading,
.section-empty {
  padding: 20px;
  text-align: center;
  color: #94a3b8;
  font-size: 14px;
}

/* 대시보드 테이블 공통 */
.dashboard-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 15px;
}

.dashboard-table th {
  text-align: left;
  padding: 6px 8px;
  font-weight: 600;
  color: #64748b;
  border-bottom: 1px solid #e2e8f0;
  white-space: nowrap;
  font-size: 12px;
}

.dashboard-table td {
  padding: 6px 8px;
  color: #334155;
  border-bottom: 1px solid #f8fafc;
  white-space: nowrap;
}

.dashboard-table tr:hover {
  background: #f8fafc;
}

.dashboard-table .text-right {
  text-align: right;
}

.dashboard-table .text-danger {
  color: #dc2626;
  font-weight: 600;
}

.dashboard-table .td-date {
  color: #64748b;
  font-size: 14px;
}

.dashboard-table .td-treatment {
  max-width: 150px;
  overflow: hidden;
}

/* 수납 요약 */
.receipt-summary {
  display: flex;
  gap: 12px;
  padding: 0 0 8px;
  margin-bottom: 8px;
  border-bottom: 1px solid #f1f5f9;
}

.receipt-summary .summary-item {
  font-size: 13px;
  color: #475569;
  font-weight: 500;
}

/* 진료 태그 */
.treatment-tags {
  display: flex;
  gap: 3px;
  flex-wrap: wrap;
}

.treatment-tags .tag {
  padding: 1px 5px;
  border-radius: 3px;
  font-size: 11px;
  background: #eff6ff;
  color: #3b82f6;
}

.treatment-tags .tag.uncovered {
  background: #fef3c7;
  color: #b45309;
}

/* 예약 그룹 */
.reservation-group {
  margin-bottom: 10px;
}

.reservation-group:last-child {
  margin-bottom: 0;
}

.group-label {
  margin: 0 0 6px;
  font-size: 12px;
  font-weight: 600;
  color: #64748b;
}

.dashboard-table tr.upcoming {
  background: #f0fdf4;
}

.dashboard-table tr.canceled td {
  color: #94a3b8;
  text-decoration: line-through;
}

/* 노쇼 상태 */
.dashboard-table .status-noshow {
  color: #dc2626;
  font-weight: 600;
}

/* 노쇼+취소 비율 (헤더 인라인) */
.reservation-miss-rate-inline {
  font-size: 13px;
  color: #64748b;
  margin-left: 8px;
}

.miss-rate-value {
  margin-left: 4px;
  font-weight: 600;
  color: #334155;
}

.miss-rate-value.high {
  color: #dc2626;
}

/* 응대 기록 리스트 */
.contact-log-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.contact-log-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  border-bottom: 1px solid #f8fafc;
  font-size: 13px;
}

.contact-log-item .log-channel {
  font-size: 15px;
  flex-shrink: 0;
}

.contact-log-item .log-type {
  font-size: 15px;
  color: #64748b;
  flex-shrink: 0;
  min-width: 40px;
}

.contact-log-item .log-content {
  flex: 1;
  color: #334155;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.contact-log-item .log-date {
  font-size: 14px;
  color: #94a3b8;
  flex-shrink: 0;
}

.contact-log-item .log-staff {
  font-size: 14px;
  color: #94a3b8;
  flex-shrink: 0;
}

/* 아웃콜 대기열 */
.callqueue-group {
  margin-bottom: 10px;
}

.callqueue-group:last-child {
  margin-bottom: 0;
}

.callqueue-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 0;
  border-bottom: 1px solid #f8fafc;
  font-size: 13px;
}

.callqueue-item .cq-type {
  font-weight: 500;
  color: #475569;
  min-width: 80px;
}

.callqueue-item .cq-date {
  color: #64748b;
  font-size: 14px;
}

.callqueue-item .cq-reason {
  flex: 1;
  color: #334155;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.callqueue-item .cq-status {
  font-size: 14px;
  padding: 1px 6px;
  border-radius: 3px;
  background: #f1f5f9;
  color: #64748b;
}

.callqueue-item.pending .cq-type {
  color: #ea580c;
}

.callqueue-item.completed .cq-status {
  background: #dcfce7;
  color: #16a34a;
}

/* 패키지 그리드 */
.package-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 10px;
}

.package-card {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 12px;
}

.package-label {
  font-size: 13px;
  font-weight: 600;
  color: #475569;
  margin-bottom: 6px;
}

.package-detail {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.package-count {
  font-size: 14px;
  color: #334155;
}

.package-count strong {
  color: #2563eb;
  font-size: 16px;
}

.patient-dashboard .package-expire {
  font-size: 12px;
  color: #94a3b8;
}

.package-progress {
  height: 6px;
  background: #e2e8f0;
  border-radius: 3px;
  overflow: hidden;
}

.package-progress-bar {
  height: 100%;
  background: #3b82f6;
  border-radius: 3px;
  transition: width 0.3s;
}

.package-progress-bar.herbal {
  background: #10b981;
}

.package-progress-bar.nokryong {
  background: #8b5cf6;
}

/* EMR 메모 섹션 */
.emr-memo-section {
  border-left: 3px solid #6366f1;
}

.emr-memo-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 10px;
}

.emr-memo-card {
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  padding: 10px 12px;
  border-left: 3px solid #94a3b8;
}

.emr-memo-card.doctor {
  border-left-color: #3b82f6;
  background: #eff6ff;
}

.emr-memo-card.nurse {
  border-left-color: #10b981;
  background: #ecfdf5;
}

.emr-memo-card.etc {
  border-left-color: #f59e0b;
  background: #fffbeb;
}

.emr-memo-label {
  font-size: 15px;
  font-weight: 600;
  color: #64748b;
  margin-bottom: 6px;
}

.emr-memo-card.doctor .emr-memo-label { color: #2563eb; }
.emr-memo-card.nurse .emr-memo-label { color: #059669; }
.emr-memo-card.etc .emr-memo-label { color: #d97706; }

.emr-memo-content {
  margin: 0;
  font-family: inherit;
  font-size: 15px;
  line-height: 1.5;
  color: #334155;
  white-space: pre-wrap;
  word-break: break-word;
  overflow-y: auto;
}

/* 선결제/패키지 관리 버튼 */
/* 한약+ 버튼 */
.patient-dashboard .section-action-btn.herbal-draft {
  border-color: #10b981;
  color: #10b981;
}

.patient-dashboard .section-action-btn.herbal-draft:hover {
  background: #10b981;
  color: white;
}

.patient-dashboard .section-action-btn.jaboyak-draft {
  border-color: #d97706;
  color: #d97706;
  background: #fffbeb;
}

.patient-dashboard .section-action-btn.jaboyak-draft:hover {
  background: #d97706;
  color: white;
}

.patient-dashboard .section-action-btn.medicine-draft {
  border-color: #6366f1;
  color: #6366f1;
  background: #eef2ff;
}

.patient-dashboard .section-action-btn.medicine-draft:hover {
  background: #6366f1;
  color: white;
}

.patient-dashboard .section-action-btn.incall-btn {
  border-color: #3b82f6;
  color: #3b82f6;
  background: #eff6ff;
}

.patient-dashboard .section-action-btn.incall-btn:hover {
  background: #3b82f6;
  color: white;
}

.patient-dashboard .section-filter-btn {
  padding: 2px 8px;
  border: 1px solid #d1d5db;
  border-radius: 5px;
  background: white;
  font-size: 11px;
  cursor: pointer;
  color: #6b7280;
}
.patient-dashboard .section-filter-btn:hover { background: #f3f4f6; }
.patient-dashboard .section-filter-btn.active {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
}

.patient-dashboard .section-action-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 10px;
  border: 1px solid #8b5cf6;
  border-radius: 5px;
  background: white;
  color: #8b5cf6;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  margin-left: auto;
  transition: background 0.15s, color 0.15s;
}

.patient-dashboard .section-action-btn:hover {
  background: #8b5cf6;
  color: white;
}

.patient-dashboard .section-action-btn i {
  font-size: 11px;
}

/* 패키지 관리 모달 */
.pkg-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: pkg-modal-fadein 0.15s ease;
}

@keyframes pkg-modal-fadein {
  from { opacity: 0; }
  to { opacity: 1; }
}

.pkg-modal-container {
  background: white;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
  width: 90vw;
  max-width: 800px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  animation: pkg-modal-slidein 0.2s ease;
}

@keyframes pkg-modal-slidein {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.pkg-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid #e2e8f0;
  flex-shrink: 0;
}

.pkg-modal-header h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 700;
  color: #1e293b;
}

.pkg-modal-close-btn {
  width: 32px;
  height: 32px;
  border: none;
  background: #f1f5f9;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #64748b;
  font-size: 16px;
  transition: background 0.15s, color 0.15s;
}

.pkg-modal-close-btn:hover {
  background: #e2e8f0;
  color: #1e293b;
}

.pkg-modal-body {
  padding: 16px 20px;
  overflow-y: auto;
  flex: 1;
}


/* VIP year chip (shared) */
.vip-year-chip {
  display: inline-block;
  padding: 1px 6px;
  margin: 0 2px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 600;
  background: #f3f4f6;
  color: #6b7280;
}
.vip-year-chip.current {
  background: #8b5cf6;
  color: white;
}
.dh-vip-badges {
  display: inline-flex;
  gap: 2px;
  vertical-align: middle;
}
